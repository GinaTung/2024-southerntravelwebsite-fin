import{b as K,c as G,d as Q,f as Z,n as O,h as V,S as ee,a as te,N as se}from"./navigation-uXerqhoc.js";import{s as q}from"./sweetAlert-vh7MHkUs.js";import{_ as ae,o as S,c as A,a as o,t as B,b as j,w as F,F as N,h as W,g as X,k as Y,d as ie,r as U,p as ne,f as le}from"./index-eSL6eiNh.js";function z(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function re(i){let{swiper:e,extendParams:L,on:m,emit:v}=i;const d="swiper-pagination";L({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:s=>s,formatFractionTotal:s=>s,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),e.pagination={el:null,bullets:[]};let P,C=0;const n=s=>(Array.isArray(s)||(s=[s].filter(t=>!!t)),s);function y(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(s,t){const{bulletActiveClass:a}=e.params.pagination;s&&(s=s[`${t==="prev"?"previous":"next"}ElementSibling`],s&&(s.classList.add(`${a}-${t}`),s=s[`${t==="prev"?"previous":"next"}ElementSibling`],s&&s.classList.add(`${a}-${t}-${t}`)))}function $(s){const t=s.target.closest(z(e.params.pagination.bulletClass));if(!t)return;s.preventDefault();const a=G(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===a)return;const l=e.getSlideIndexByData(a),p=e.getSlideIndexByData(e.realIndex);l>e.slides.length-e.loopedSlides&&e.loopFix({direction:l>p?"next":"prev",activeSlideIndex:l,slideTo:!1}),e.slideToLoop(a)}else e.slideTo(a)}function k(){const s=e.rtl,t=e.params.pagination;if(y())return;let a=e.pagination.el;a=n(a);let l,p;const M=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,h=e.params.loop?Math.ceil(M/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(p=e.previousRealIndex||0,l=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(l=e.snapIndex,p=e.previousSnapIndex):(p=e.previousIndex||0,l=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let T,f,E;if(t.dynamicBullets&&(P=K(r[0],e.isHorizontal()?"width":"height",!0),a.forEach(u=>{u.style[e.isHorizontal()?"width":"height"]=`${P*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&p!==void 0&&(C+=l-(p||0),C>t.dynamicMainBullets-1?C=t.dynamicMainBullets-1:C<0&&(C=0)),T=Math.max(l-C,0),f=T+(Math.min(r.length,t.dynamicMainBullets)-1),E=(f+T)/2),r.forEach(u=>{const g=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(b=>`${t.bulletActiveClass}${b}`)].map(b=>typeof b=="string"&&b.includes(" ")?b.split(" "):b).flat();u.classList.remove(...g)}),a.length>1)r.forEach(u=>{const g=G(u);g===l?u.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&u.setAttribute("part","bullet"),t.dynamicBullets&&(g>=T&&g<=f&&u.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),g===T&&c(u,"prev"),g===f&&c(u,"next"))});else{const u=r[l];if(u&&u.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&r.forEach((g,b)=>{g.setAttribute("part",b===l?"bullet-active":"bullet")}),t.dynamicBullets){const g=r[T],b=r[f];for(let D=T;D<=f;D+=1)r[D]&&r[D].classList.add(...`${t.bulletActiveClass}-main`.split(" "));c(g,"prev"),c(b,"next")}}if(t.dynamicBullets){const u=Math.min(r.length,t.dynamicMainBullets+4),g=(P*u-P)/2-E*P,b=s?"right":"left";r.forEach(D=>{D.style[e.isHorizontal()?b:"top"]=`${g}px`})}}a.forEach((r,T)=>{if(t.type==="fraction"&&(r.querySelectorAll(z(t.currentClass)).forEach(f=>{f.textContent=t.formatFractionCurrent(l+1)}),r.querySelectorAll(z(t.totalClass)).forEach(f=>{f.textContent=t.formatFractionTotal(h)})),t.type==="progressbar"){let f;t.progressbarOpposite?f=e.isHorizontal()?"vertical":"horizontal":f=e.isHorizontal()?"horizontal":"vertical";const E=(l+1)/h;let u=1,g=1;f==="horizontal"?u=E:g=E,r.querySelectorAll(z(t.progressbarFillClass)).forEach(b=>{b.style.transform=`translate3d(0,0,0) scaleX(${u}) scaleY(${g})`,b.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(r.innerHTML=t.renderCustom(e,l+1,h),T===0&&v("paginationRender",r)):(T===0&&v("paginationRender",r),v("paginationUpdate",r)),e.params.watchOverflow&&e.enabled&&r.classList[e.isLocked?"add":"remove"](t.lockClass)})}function _(){const s=e.params.pagination;if(y())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let a=e.pagination.el;a=n(a);let l="";if(s.type==="bullets"){let p=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&p>t&&(p=t);for(let M=0;M<p;M+=1)s.renderBullet?l+=s.renderBullet.call(e,M,s.bulletClass):l+=`<${s.bulletElement} ${e.isElement?'part="bullet"':""} class="${s.bulletClass}"></${s.bulletElement}>`}s.type==="fraction"&&(s.renderFraction?l=s.renderFraction.call(e,s.currentClass,s.totalClass):l=`<span class="${s.currentClass}"></span> / <span class="${s.totalClass}"></span>`),s.type==="progressbar"&&(s.renderProgressbar?l=s.renderProgressbar.call(e,s.progressbarFillClass):l=`<span class="${s.progressbarFillClass}"></span>`),e.pagination.bullets=[],a.forEach(p=>{s.type!=="custom"&&(p.innerHTML=l||""),s.type==="bullets"&&e.pagination.bullets.push(...p.querySelectorAll(z(s.bulletClass)))}),s.type!=="custom"&&v("paginationRender",a[0])}function x(){e.params.pagination=Q(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const s=e.params.pagination;if(!s.el)return;let t;typeof s.el=="string"&&e.isElement&&(t=e.el.querySelector(s.el)),!t&&typeof s.el=="string"&&(t=[...document.querySelectorAll(s.el)]),t||(t=s.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof s.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(s.el)],t.length>1&&(t=t.filter(a=>Z(a,".swiper")[0]===e.el)[0])),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=n(t),t.forEach(a=>{s.type==="bullets"&&s.clickable&&a.classList.add(s.clickableClass),a.classList.add(s.modifierClass+s.type),a.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass),s.type==="bullets"&&s.dynamicBullets&&(a.classList.add(`${s.modifierClass}${s.type}-dynamic`),C=0,s.dynamicMainBullets<1&&(s.dynamicMainBullets=1)),s.type==="progressbar"&&s.progressbarOpposite&&a.classList.add(s.progressbarOppositeClass),s.clickable&&a.addEventListener("click",$),e.enabled||a.classList.add(s.lockClass)}))}function I(){const s=e.params.pagination;if(y())return;let t=e.pagination.el;t&&(t=n(t),t.forEach(a=>{a.classList.remove(s.hiddenClass),a.classList.remove(s.modifierClass+s.type),a.classList.remove(e.isHorizontal()?s.horizontalClass:s.verticalClass),s.clickable&&a.removeEventListener("click",$)})),e.pagination.bullets&&e.pagination.bullets.forEach(a=>a.classList.remove(...s.bulletActiveClass.split(" ")))}m("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const s=e.params.pagination;let{el:t}=e.pagination;t=n(t),t.forEach(a=>{a.classList.remove(s.horizontalClass,s.verticalClass),a.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass)})}),m("init",()=>{e.params.pagination.enabled===!1?w():(x(),_(),k())}),m("activeIndexChange",()=>{typeof e.snapIndex>"u"&&k()}),m("snapIndexChange",()=>{k()}),m("snapGridLengthChange",()=>{_(),k()}),m("destroy",()=>{I()}),m("enable disable",()=>{let{el:s}=e.pagination;s&&(s=n(s),s.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),m("lock unlock",()=>{k()}),m("click",(s,t)=>{const a=t.target,l=n(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&l&&l.length>0&&!a.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&a===e.navigation.nextEl||e.navigation.prevEl&&a===e.navigation.prevEl))return;const p=l[0].classList.contains(e.params.pagination.hiddenClass);v(p===!0?"paginationShow":"paginationHide"),l.forEach(M=>M.classList.toggle(e.params.pagination.hiddenClass))}});const H=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:s}=e.pagination;s&&(s=n(s),s.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),x(),_(),k()},w=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:s}=e.pagination;s&&(s=n(s),s.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),I()};Object.assign(e.pagination,{enable:H,disable:w,render:_,update:k,init:x,destroy:I})}function oe(i){let{swiper:e,extendParams:L,emit:m,once:v}=i;L({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function d(){if(e.params.cssMode)return;const n=e.getTranslate();e.setTranslate(n),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function P(){if(e.params.cssMode)return;const{touchEventsData:n,touches:y}=e;n.velocities.length===0&&n.velocities.push({position:y[e.isHorizontal()?"startX":"startY"],time:n.touchStartTime}),n.velocities.push({position:y[e.isHorizontal()?"currentX":"currentY"],time:O()})}function C(n){let{currentPos:y}=n;if(e.params.cssMode)return;const{params:c,wrapperEl:$,rtlTranslate:k,snapGrid:_,touchEventsData:x}=e,H=O()-x.touchStartTime;if(y<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(y>-e.maxTranslate()){e.slides.length<_.length?e.slideTo(_.length-1):e.slideTo(e.slides.length-1);return}if(c.freeMode.momentum){if(x.velocities.length>1){const h=x.velocities.pop(),r=x.velocities.pop(),T=h.position-r.position,f=h.time-r.time;e.velocity=T/f,e.velocity/=2,Math.abs(e.velocity)<c.freeMode.minimumVelocity&&(e.velocity=0),(f>150||O()-h.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=c.freeMode.momentumVelocityRatio,x.velocities.length=0;let w=1e3*c.freeMode.momentumRatio;const s=e.velocity*w;let t=e.translate+s;k&&(t=-t);let a=!1,l;const p=Math.abs(e.velocity)*20*c.freeMode.momentumBounceRatio;let M;if(t<e.maxTranslate())c.freeMode.momentumBounce?(t+e.maxTranslate()<-p&&(t=e.maxTranslate()-p),l=e.maxTranslate(),a=!0,x.allowMomentumBounce=!0):t=e.maxTranslate(),c.loop&&c.centeredSlides&&(M=!0);else if(t>e.minTranslate())c.freeMode.momentumBounce?(t-e.minTranslate()>p&&(t=e.minTranslate()+p),l=e.minTranslate(),a=!0,x.allowMomentumBounce=!0):t=e.minTranslate(),c.loop&&c.centeredSlides&&(M=!0);else if(c.freeMode.sticky){let h;for(let r=0;r<_.length;r+=1)if(_[r]>-t){h=r;break}Math.abs(_[h]-t)<Math.abs(_[h-1]-t)||e.swipeDirection==="next"?t=_[h]:t=_[h-1],t=-t}if(M&&v("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(k?w=Math.abs((-t-e.translate)/e.velocity):w=Math.abs((t-e.translate)/e.velocity),c.freeMode.sticky){const h=Math.abs((k?-t:t)-e.translate),r=e.slidesSizesGrid[e.activeIndex];h<r?w=c.speed:h<2*r?w=c.speed*1.5:w=c.speed*2.5}}else if(c.freeMode.sticky){e.slideToClosest();return}c.freeMode.momentumBounce&&a?(e.updateProgress(l),e.setTransition(w),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating=!0,V($,()=>{!e||e.destroyed||!x.allowMomentumBounce||(m("momentumBounce"),e.setTransition(c.speed),setTimeout(()=>{e.setTranslate(l),V($,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(m("_freeModeNoMomentumRelease"),e.updateProgress(t),e.setTransition(w),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,V($,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(t),e.updateActiveIndex(),e.updateSlidesClasses()}else if(c.freeMode.sticky){e.slideToClosest();return}else c.freeMode&&m("_freeModeNoMomentumRelease");(!c.freeMode.momentum||H>=c.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:d,onTouchMove:P,onTouchEnd:C}})}const J="https://two024-south-json-server-vercel.onrender.com",ce={components:{Swiper:ee,SwiperSlide:te},props:["adCategoryTitle","token","userId","currentDate"],data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],adTitle:{attractions:"探索旅遊景點",packages:"探索旅遊方案"},isFavorite:{},linkPath:"",enabledProducts:[]}},methods:{goRouter(i){return`#/TouristAttractions/${i.category}/${i.title}`},goRouterProduct(i){return`#/TouristPackage/${i.category}/${i.title}`},getAttractions(){this.axios.get(`${J}/attractions`).then(i=>{this.attractions=i.data,this.enabledAttractions=this.attractions.filter(e=>e.is_enabled===1),this.removeAttractionWithTitle(this.attractionTitle)}).catch(i=>{q.threeLayerCheckType("error","取得景點資料失敗")})},removeAttractionWithTitle(i){i&&(this.enabledAttractions=this.enabledAttractions.filter(e=>e.title!==i))},getProducts(){this.axios.get(`${J}/products`).then(i=>{i.data.forEach(e=>{e.is_enabled===1&&this.enabledProducts.push(e)}),this.removeProductsWithTitle(this.attractionTitle)}).catch(()=>{this.isLoading=!1,q.threeLayerCheckType("error","取得產品資料失敗")})},removeProductsWithTitle(i){i&&(this.enabledProducts=this.enabledProducts.filter(e=>e.title!==i))},truncateContent(i,e){return i&&i.length>e?i.substring(0,e)+"...":i},thousand(i){return i!==void 0&&(i=i.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${i}`}},setup(){return{modules:[oe,re,se]}},mounted(){this.attractionTitle=this.$route.params.title,this.linkPath=this.$route.name,this.getAttractions(),this.getProducts()}},R=i=>(ne("data-v-25e3d621"),i=i(),le(),i),de={key:0,class:"mt-10"},pe={class:"card h-100"},ue={class:"tag text-white"},fe={class:"card-header p-0 border-0 h-100"},me=["href"],he=["src"],ge={class:"card-body",style:{transform:"rotate(0)"}},ve=["href"],be={class:"card-title fs-5 fw-bold text-primary-700 text-center flex-grow-1 h-35 stretched-link"},ye={class:"fs-6 pb-7"},_e=R(()=>o("button",{class:"swiper-button-next border-0 bg-transparent"},null,-1)),Ce=R(()=>o("button",{class:"swiper-button-prev border-0 bg-transparent"},null,-1)),xe={key:1,class:"mt-10"},Te={class:"card h-100 flex-grow-1"},ke={class:"tag text-white"},we={class:"card-header p-0 border-0"},Me=["href"],Be=["src"],Pe={class:"card-body",style:{transform:"rotate(0)"}},Se=["href"],Le={class:"card-title fs-5 fw-bold text-primary-700 text-center flex-grow-1 h-45 stretched-link"},Ae={class:"fs-6"},$e={class:"card-footer border-0",style:{transform:"rotate(0)"}},De={class:"d-flex align-items-center pb-4"},Ee=["href"],ze={key:0},Re={class:"d-flex align-items-center mt-1"},Ie=R(()=>o("h5",{class:"text-danger fw-bold me-2"},"促銷價",-1)),Fe={class:"text-danger"},He={key:1,class:"text-danger py-3"},Oe=R(()=>o("button",{class:"swiper-button-next border-0 bg-transparent"},null,-1)),Ve=R(()=>o("button",{class:"swiper-button-prev border-0 bg-transparent"},null,-1));function Ne(i,e,L,m,v,d){const P=U("swiper-slide"),C=U("swiper");return S(),A(N,null,[v.linkPath==="TouristSingleAttraction"?(S(),A("div",de,[o("h2",null,B(v.adTitle[L.adCategoryTitle]),1),j(C,{slidesPerView:1,spaceBetween:10,breakpoints:{768:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{clickable:!0},modules:m.modules,class:"mySwiper4"},{default:F(()=>[(S(!0),A(N,null,W(v.enabledAttractions,(n,y)=>(S(),X(P,{key:y+123},{default:F(()=>[o("div",pe,[o("span",ue,B(n.category),1),o("div",fe,[o("a",{href:d.goRouter(n),target:"_blank"},[o("img",{src:n.imageUrl,class:"img-fluid h-100",alt:"attractionItem.title"},null,8,he)],8,me)]),o("div",ge,[o("a",{href:d.goRouterProduct(n),target:"_blank"},[o("h5",be,B(n.title),1)],8,ve),o("p",ye,B(d.truncateContent(n.description,52)),1)])])]),_:2},1024))),128)),_e,Ce]),_:1},8,["navigation","modules"])])):Y("",!0),v.linkPath==="TouristSinglePackage"?(S(),A("div",xe,[o("h2",null,B(v.adTitle[L.adCategoryTitle]),1),j(C,{slidesPerView:1,spaceBetween:10,breakpoints:{768:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{clickable:!0},modules:m.modules,class:"mySwiper4"},{default:F(()=>[(S(!0),A(N,null,W(v.enabledProducts,(n,y)=>(S(),X(P,{key:y+123},{default:F(()=>[o("div",Te,[o("span",ke,B(n.category),1),o("div",we,[o("a",{href:d.goRouterProduct(n),target:"_blank"},[o("img",{src:n.imageUrl,class:"img-fluid",alt:"productsItem.title"},null,8,Be)],8,Me)]),o("div",Pe,[o("a",{href:d.goRouterProduct(n),target:"_blank"},[o("h5",Le,B(n.title),1)],8,Se),o("p",Ae,B(d.truncateContent(n.description,48)),1)]),o("div",$e,[o("div",De,[o("a",{href:d.goRouterProduct(n),target:"_blank",class:"stretched-link"},[L.currentDate<=n.endDate?(S(),A("h6",ze,[ie(" 預約期間： "+B(n.startDate)+" 至 "+B(n.endDate)+" ",1),o("div",Re,[Ie,o("h5",Fe,"NT"+B(d.thousand(n.price)),1)])])):(S(),A("h5",He,"預約時間已截止"))],8,Ee)])])])]),_:2},1024))),128)),Oe,Ve]),_:1},8,["navigation","modules"])])):Y("",!0)],64)}const We=ae(ce,[["render",Ne],["__scopeId","data-v-25e3d621"]]);export{We as L,oe as f};
