import{_ as c,c as u,a as e,C as m,f as a,y as l,b as p,w as h,r as f,o as _,d as w}from"./index-BzeQhHl-.js";const k="https://ec-course-api.hexschool.io/v2",g={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token&&(alert("目前已為管理者身分登入，無需再次登入"),this.$router.push({path:"/admin/AdminHome"}))},login(){this.axios.post(`${k}/admin/signin`,this.user).then(o=>{alert(`${o.data.message}`),this.$router.push({name:"AdminHome"}),this.$emitter.emit("loginCheck",!0);const{expired:s,token:i}=o.data;document.cookie=`hexToken=${i}; expires=${new Date(s)}`}).catch(o=>{alert(`${o.data.message}`)})}},mounted(){setTimeout(()=>{this.checkAdmin()},1e3)}},x={class:"container py-10 py-lg-30"},b={class:"row justify-content-center"},v={class:"col-6"},y=e("h1",{class:"h3 mb-4"},"管理者登入",-1),$={class:"form-floating mb-4"},A=e("label",{for:"username"},"Email address",-1),V={class:"form-floating mb-4"},C=e("label",{for:"password"},"Password",-1),T={class:"mt-3"};function q(o,s,i,B,n,r){const d=f("router-link");return _(),u("div",x,[e("div",b,[e("div",v,[y,e("form",{id:"form",class:"form-signin",onSubmit:s[3]||(s[3]=m((...t)=>r.login&&r.login(...t),["prevent"]))},[e("div",$,[a(e("input",{type:"email",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=t=>n.user.username=t),id:"username",placeholder:"name@example.com",required:"",autofocus:"",autocomplete:"username"},null,512),[[l,n.user.username]]),A]),e("div",V,[a(e("input",{type:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=t=>n.user.password=t),id:"password",placeholder:"Password",required:"",autocomplete:"current-password"},null,512),[[l,n.user.password]]),C]),e("a",{class:"btn-turquoise w-100 mt-3 text-center",type:"button",onClick:s[2]||(s[2]=(...t)=>r.login&&r.login(...t))}," 登入 "),e("div",T,[p(d,{to:"/",class:"btn-outline-turquoise w-100 text-center",type:"button"},{default:h(()=>[w("回前台")]),_:1})])],32)])])])}const D=c(g,[["render",q]]);export{D as default};
