import{_ as p,c as _,a as e,b as o,w as n,e as m,r as h,o as f,d as r,t as b}from"./index-HaXGubSD.js";const l="https://two024-south-json-server-vercel.onrender.com",g={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${l}/api/users/${user}`).then(s=>{this.userIsLoggedIn=!0}).catch(s=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${l}/products`).then(s=>{console.log(s),this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.enabledProducts.push(t)}),this.getNewText()}).catch(s=>{console.log(s)})},truncateContent(s,t){return s&&s.length>t?s.substring(0,t)+"...":s},getNewText(){const s={};this.products.forEach(t=>{t.description&&t.description.split(";").forEach(d=>{const i=d.trim();s[t.id]||(s[t.id]=[]),s[t.id].push(i)})}),this.newProductsDes=Object.entries(s).map(([t,a])=>({id:t,descriptions:a}))},searchProducts(){this.axios.get(`${l}/products?category=嘉義`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.searchChiayi.push(t)}),console.log(this.searchChiayi)}).catch(s=>{alert(`${s.message}`)})}},mounted(){this.getProducts()}},v={class:"container py-10 py-lg-30"},k={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-20"},x={class:"breadcrumb mb-0 fs-5"},w={class:"breadcrumb-item"},y=e("li",{class:"breadcrumb-item","aria-current":"page"},"南部旅遊方案",-1),$={class:"tourist-list"},T={class:"row"},P={class:"col-12 col-md-3 mb-5 mb-md-6 mb-lg-0 d-none d-md-flex"},C={class:"border-info2 border-1 border"},j=e("p",{class:"fs-4 p-5 bg-primary-500 text-white"},"地區篩選",-1),N={class:"nav flex-column"},E={class:"nav-item"},V={class:""},D={class:"nav-item"},I=m('<li class="nav-item"><a class="nav-link p-5 fs-5 link-color d-flex justify-content-between" href="#" data-name="台南">台南<span class="">0</span></a></li><li class="nav-item"><a class="nav-link p-5 fs-5 link-color d-flex justify-content-between" data-name="高雄">高雄<span class="">0</span></a></li>',2),B={class:"col-12 col-md-9"};function A(s,t,a,d,i,S){const c=h("router-link"),u=h("router-view");return f(),_("div",v,[e("nav",k,[e("ol",x,[e("li",w,[o(c,{to:"/",class:"navbar-brand py-6"},{default:n(()=>[r(" 首頁 ")]),_:1})]),y])]),e("div",$,[e("div",T,[e("div",P,[e("div",C,[j,e("ul",N,[e("li",E,[o(c,{class:"nav-link p-5 fs-5 link-color active d-flex justify-content-between","data-name":"全部","aria-current":"page",to:"/TouristPackage/all"},{default:n(()=>[r("全部區域"),e("span",V,b(i.products.length),1)]),_:1})]),e("li",D,[o(c,{class:"nav-link p-5 fs-5 link-color d-flex justify-content-between",to:"/TouristPackage/searchChiayi","data-name":"嘉義"},{default:n(()=>[r("嘉義")]),_:1})]),I])])]),e("div",B,[o(u)])])])])}const K=p(g,[["render",A]]);export{K as default};
