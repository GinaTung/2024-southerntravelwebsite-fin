import{s as d}from"./sweetAlert-F2TKQW-X.js";import{_ as w,c as r,a as e,F as n,i as u,o,n as _,g as b,t as g,b as k,w as x,p as D,f as C,r as I,e as m}from"./index-ZdB5XV1r.js";const p="https://two024-south-json-server-vercel.onrender.com",F={data(){return{userId:"",token:"",heartData:[],heartData2:[],heartCategory:"全部",heartCategory2:"全部",isFavorite:{},isLoading:!1,pageName:""}},methods:{getHeartData(s="全部"){this.pageName="旅遊景點",this.heartCategory=s,s==="全部"?this.axios.get(`${p}/hearts?userId=${this.userId}&tag=旅遊景點`).then(a=>{this.heartData=a.data,this.isLoading=!1,this.heartData.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(a=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")}):this.axios.get(`${p}/hearts?category=${s}&userId=${this.userId}&tag=旅遊景點`).then(a=>{this.heartData=a.data,this.heartData.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(a=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")})},getHeartData2(s="全部"){this.heartCategory2=s,this.pageName="旅遊方案",s==="全部"?this.axios.get(`${p}/hearts?userId=${this.userId}&tag=旅遊方案`).then(a=>{this.heartData2=a.data,this.isLoading=!1,this.heartData2.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(a=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")}):this.axios.get(`${p}/hearts?category=${s}&userId=${this.userId}&tag=旅遊方案`).then(a=>{this.heartData2=a.data,this.heartData2.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(a=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(s,a,c,f){this.token?this.axios.get(`${p}/hearts?category=${a}&userId=${this.userId}&tag=${f}`).then(i=>{const l=i.data.find(h=>h.product===s);l&&this.axios.delete(`${p}/hearts/${l.id}`).then(h=>{this.isFavorite[s]=!1,d.threeLayerCheckType("success",`取消收藏 ${c} 成功`),this.getHeartData(),this.getHeartData2()}).catch(h=>{d.threeLayerCheckType("error","取消收藏資料失敗")})}):d.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getCookie(s){const a=document.cookie.split(";");for(let c of a){const[f,i]=c.trim().split("=");if(f===s)return i}return null}},mounted(){window.scrollTo(0,0),this.isLoading=!0;const s=this.getCookie("userId"),a=this.getCookie("hexTokenU");this.userId=s*1,this.token=a,this.getHeartData(),this.getHeartData2()}},v=s=>(D("data-v-fe2ddb20"),s=s(),C(),s),L=v(()=>e("div",{class:"d-flex justify-content-center align-items-center w-100"},[e("span",{class:"line"}),e("h5",{class:"flex-grow-1 fs-6 fs-lg-5 text-center"},"南部旅遊景點"),e("span",{class:"line"})],-1)),T={class:"d-flex justify-content-center align-items-center my-5"},j=["onClick"],S={key:0,class:"row g-3 py-8"},$=m('<div class="card card-att h-100" data-v-fe2ddb20><span class="tag text-white" data-v-fe2ddb20></span><div class="heart" data-v-fe2ddb20><i class="bi bi-heart heart-click" data-heartStatus="false" data-v-fe2ddb20></i></div><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" style="height:180px;" data-v-fe2ddb20><div class="card-body placeholder-glow" data-v-fe2ddb20><span class="placeholder w-50 text-center" data-v-fe2ddb20></span></div></div>',1),H=[$],N={key:1,class:"row g-3 py-8"},z={key:0,class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},E=v(()=>e("h3",{class:"text-center"},"無收藏資料",-1)),P=[E],U={class:"card h-100"},V=["src"],B={class:"tag text-white"},q=["onClick"],A={class:"card-body"},G={class:"fs-6 fs-xl-5 fw-bold text-primary-700 card-title stretched-link text-center"},M=v(()=>e("div",{class:"d-flex justify-content-center align-items-center w-100"},[e("span",{class:"line"}),e("h5",{class:"flex-grow-1 fs-6 fs-lg-5 text-center"},"南部旅遊方案"),e("span",{class:"line"})],-1)),J={class:"d-flex justify-content-center align-items-center my-5"},K=["onClick"],O={key:2,class:"row g-3 py-8"},Q=m('<div class="card card-att h-100" data-v-fe2ddb20><span class="tag text-white" data-v-fe2ddb20></span><div class="heart" data-v-fe2ddb20><i class="bi bi-heart heart-click" data-heartStatus="false" data-v-fe2ddb20></i></div><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" style="height:180px;" data-v-fe2ddb20><div class="card-body placeholder-glow" data-v-fe2ddb20><span class="placeholder w-50 text-center" data-v-fe2ddb20></span></div></div>',1),R=[Q],W={key:3,class:"row g-3 py-8"},X={key:0,class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},Y=v(()=>e("h3",{class:"text-center"},"無收藏資料",-1)),Z=[Y],tt={class:"card h-100"},et=["src"],st={class:"tag text-white"},at=["onClick"],it={class:"card-body"},rt={class:"fs-6 fs-xl-5 fw-bold text-primary-700 card-title stretched-link text-center",style:{}};function ot(s,a,c,f,i,l){const h=I("router-link");return o(),r(n,null,[L,e("div",T,[(o(),r(n,null,u(["全部","嘉義","台南","高雄"],t=>e("button",{key:t,type:"button",class:_(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory===t}]),onClick:b(y=>l.getHeartData(t),["prevent"])},g(t),11,j)),64))]),i.isLoading&i.pageName==="旅遊景點"?(o(),r("div",S,[(o(),r(n,null,u(3,t=>e("div",{key:t,class:"col-12 col-md-6 col-lg-4"},H)),64))])):(o(),r("div",N,[i.heartData.length===0?(o(),r("div",z,P)):(o(!0),r(n,{key:1},u(i.heartData,t=>(o(),r("div",{class:"col-12 col-md-6 col-lg-4",key:t.id},[e("div",U,[e("img",{src:t.imageUrl,class:"img-fluid h-100 card-radius",alt:"item.title",style:{height:"180px"}},null,8,V),e("span",B,g(t.category),1),e("button",{class:"heart border-0",onClick:y=>l.toggleFavorite(t.product,t.category,t.title,"旅遊景點"),type:"button"},[e("i",{class:_(["bi",{"bi-heart-fill":i.isFavorite[t.product],"bi-heart":!i.isFavorite[t.product]}]),style:{"font-size":"24px"}},null,2)],8,q),e("div",A,[k(h,{to:{name:"TouristSingleAttraction",params:{category:t.category,title:t.title}}},{default:x(()=>[e("h4",G,g(t.title),1)]),_:2},1032,["to"])])])]))),128))])),M,e("div",J,[(o(),r(n,null,u(["全部","嘉義","台南","高雄"],t=>e("button",{key:t,type:"button",class:_(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory2===t}]),onClick:b(y=>l.getHeartData2(t),["prevent"])},g(t),11,K)),64))]),i.isLoading&i.pageName==="旅遊方案"?(o(),r("div",O,[(o(),r(n,null,u(3,t=>e("div",{key:t,class:"col-12 col-md-6 col-lg-4"},R)),64))])):(o(),r("div",W,[i.heartData2.length===0?(o(),r("div",X,Z)):(o(!0),r(n,{key:1},u(i.heartData2,t=>(o(),r("div",{class:"col-12 col-md-6 col-lg-4",key:t.id},[e("div",tt,[e("img",{src:t.imageUrl,class:"img-fluid h-100 card-radius",alt:"item.title",style:{height:"180px"}},null,8,et),e("span",st,g(t.category),1),e("button",{class:"heart border-0",onClick:y=>l.toggleFavorite(t.product,t.category,t.title,"旅遊方案"),type:"button"},[e("i",{class:_(["bi",{"bi-heart-fill":i.isFavorite[t.product],"bi-heart":!i.isFavorite[t.product]}]),style:{"font-size":"24px"}},null,2)],8,at),e("div",it,[k(h,{to:{name:"TouristSinglePackage",params:{category:t.category,title:t.title}}},{default:x(()=>[e("h4",rt,g(t.title),1)]),_:2},1032,["to"])])])]))),128))]))],64)}const dt=w(F,[["render",ot],["__scopeId","data-v-fe2ddb20"]]);export{dt as default};
