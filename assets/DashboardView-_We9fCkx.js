import{C as m}from"./bootstrap.esm-kE75U2LM.js";import{s as d}from"./sweetAlert-Szd-9iv_.js";import{_ as b,c as h,a,b as r,w as l,g as k,F as _,r as g,o as i,d as c,p as f,f as C}from"./index-2WhFc1Hy.js";const u="https://ec-course-api.hexschool.io/v2",I={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:"",navCollapse:null}},methods:{toggleNavbar(){this.$refs.navbar.classList.contains("show")?this.navCollapse.hide():this.navCollapse.show()},checkAdmin(){this.$emitter.on("loginCheck",s=>{this.userIsLoggedIn=s}),this.token&&this.axios.post(`${u}/api/user/check`).then(s=>{this.userIsLoggedIn=!0}).catch(()=>{this.userIsLoggedIn=!1,d.threeLayerCheckType("error","管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/AdminHome"})})},logout(){this.axios.post(`${u}/logout`).then(()=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(()=>{d.threeLayerCheckType("error","管理者身分登出失敗，請稍後再點選登出按鈕")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkAdmin(),this.navCollapse=new m(this.$refs.navbar,{toggle:!1})}},x=s=>(f("data-v-37953d76"),s=s(),C(),s),w={class:"navbar navbar-expand-lg navbar-light bg-light"},N={class:"container"},L=x(()=>a("span",{class:"navbar-toggler-icon"},null,-1)),y=[L],$={class:"collapse navbar-collapse",id:"navbarSupportedContent",ref:"navbar"},T={class:"navbar-nav ms-auto mb-2 mb-lg-0"};function V(s,e,A,S,p,t){const n=g("router-link"),v=g("RouterView");return i(),h(_,null,[a("nav",w,[a("div",N,[r(n,{to:"/admin/adminHome",class:"navbar-brand"},{default:l(()=>[c("後台管理")]),_:1}),a("button",{class:"navbar-toggler",type:"button","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:e[0]||(e[0]=(...o)=>t.toggleNavbar&&t.toggleNavbar(...o))},y),a("div",$,[a("ul",T,[a("li",{class:"nav-item",onClick:e[1]||(e[1]=(...o)=>t.toggleNavbar&&t.toggleNavbar(...o))},[r(n,{to:"/",class:"nav-link"},{default:l(()=>[c("回前台")]),_:1})]),a("li",{class:"nav-item",onClick:e[3]||(e[3]=(...o)=>t.toggleNavbar&&t.toggleNavbar(...o))},[p.userIsLoggedIn===!1?(i(),k(n,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:l(()=>[c("管理者登入")]),_:1})):(i(),h("a",{key:1,class:"nav-link",onClick:e[2]||(e[2]=o=>t.logout())},"登出"))])])],512)])]),r(v)],64)}const R=b(I,[["render",V],["__scopeId","data-v-37953d76"]]);export{R as default};
