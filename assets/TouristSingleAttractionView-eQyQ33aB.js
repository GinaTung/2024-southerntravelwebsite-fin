import{e as ce,b as te,c as de,d as ue,g as pe,i as me,f as fe,n as G,h as U,S as ie,a as ae,N as ne}from"./navigation-p3jlk25_.js";import{s as E}from"./sweetAlert-UymCMAde.js";import{_ as Q,l as he,o as w,c as T,b as z,w as H,F as P,h as V,g as K,a as l,r as F,p as W,i as Z,t as D,f as X,v as Y,n as ge,d as se,k as J}from"./index-vL5Jgdvl.js";import{B as be}from"./BannerBlock-XKlnFSsP.js";function q(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function ve(i){let{swiper:e,extendParams:y,on:d,emit:o}=i;const u="swiper-pagination";y({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:s=>s,formatFractionTotal:s=>s,bulletClass:`${u}-bullet`,bulletActiveClass:`${u}-bullet-active`,modifierClass:`${u}-`,currentClass:`${u}-current`,totalClass:`${u}-total`,hiddenClass:`${u}-hidden`,progressbarFillClass:`${u}-progressbar-fill`,progressbarOppositeClass:`${u}-progressbar-opposite`,clickableClass:`${u}-clickable`,lockClass:`${u}-lock`,horizontalClass:`${u}-horizontal`,verticalClass:`${u}-vertical`,paginationDisabledClass:`${u}-disabled`}}),e.pagination={el:null,bullets:[]};let A,_=0;const c=s=>(Array.isArray(s)||(s=[s].filter(t=>!!t)),s);function r(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function a(s,t){const{bulletActiveClass:n}=e.params.pagination;s&&(s=s[`${t==="prev"?"previous":"next"}ElementSibling`],s&&(s.classList.add(`${n}-${t}`),s=s[`${t==="prev"?"previous":"next"}ElementSibling`],s&&s.classList.add(`${n}-${t}-${t}`)))}function h(s){const t=s.target.closest(q(e.params.pagination.bulletClass));if(!t)return;s.preventDefault();const n=te(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===n)return;const m=e.getSlideIndexByData(n),x=e.getSlideIndexByData(e.realIndex);m>e.slides.length-e.loopedSlides&&e.loopFix({direction:m>x?"next":"prev",activeSlideIndex:m,slideTo:!1}),e.slideToLoop(n)}else e.slideTo(n)}function g(){const s=e.rtl,t=e.params.pagination;if(r())return;let n=e.pagination.el;n=c(n);let m,x;const B=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,I=e.params.loop?Math.ceil(B/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(x=e.previousRealIndex||0,m=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(m=e.snapIndex,x=e.previousSnapIndex):(x=e.previousIndex||0,m=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const f=e.pagination.bullets;let $,S,R;if(t.dynamicBullets&&(A=ce(f[0],e.isHorizontal()?"width":"height",!0),n.forEach(C=>{C.style[e.isHorizontal()?"width":"height"]=`${A*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&x!==void 0&&(_+=m-(x||0),_>t.dynamicMainBullets-1?_=t.dynamicMainBullets-1:_<0&&(_=0)),$=Math.max(m-_,0),S=$+(Math.min(f.length,t.dynamicMainBullets)-1),R=(S+$)/2),f.forEach(C=>{const L=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(M=>`${t.bulletActiveClass}${M}`)].map(M=>typeof M=="string"&&M.includes(" ")?M.split(" "):M).flat();C.classList.remove(...L)}),n.length>1)f.forEach(C=>{const L=te(C);L===m?C.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&C.setAttribute("part","bullet"),t.dynamicBullets&&(L>=$&&L<=S&&C.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),L===$&&a(C,"prev"),L===S&&a(C,"next"))});else{const C=f[m];if(C&&C.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&f.forEach((L,M)=>{L.setAttribute("part",M===m?"bullet-active":"bullet")}),t.dynamicBullets){const L=f[$],M=f[S];for(let j=$;j<=S;j+=1)f[j]&&f[j].classList.add(...`${t.bulletActiveClass}-main`.split(" "));a(L,"prev"),a(M,"next")}}if(t.dynamicBullets){const C=Math.min(f.length,t.dynamicMainBullets+4),L=(A*C-A)/2-R*A,M=s?"right":"left";f.forEach(j=>{j.style[e.isHorizontal()?M:"top"]=`${L}px`})}}n.forEach((f,$)=>{if(t.type==="fraction"&&(f.querySelectorAll(q(t.currentClass)).forEach(S=>{S.textContent=t.formatFractionCurrent(m+1)}),f.querySelectorAll(q(t.totalClass)).forEach(S=>{S.textContent=t.formatFractionTotal(I)})),t.type==="progressbar"){let S;t.progressbarOpposite?S=e.isHorizontal()?"vertical":"horizontal":S=e.isHorizontal()?"horizontal":"vertical";const R=(m+1)/I;let C=1,L=1;S==="horizontal"?C=R:L=R,f.querySelectorAll(q(t.progressbarFillClass)).forEach(M=>{M.style.transform=`translate3d(0,0,0) scaleX(${C}) scaleY(${L})`,M.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(f.innerHTML=t.renderCustom(e,m+1,I),$===0&&o("paginationRender",f)):($===0&&o("paginationRender",f),o("paginationUpdate",f)),e.params.watchOverflow&&e.enabled&&f.classList[e.isLocked?"add":"remove"](t.lockClass)})}function p(){const s=e.params.pagination;if(r())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let n=e.pagination.el;n=c(n);let m="";if(s.type==="bullets"){let x=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&x>t&&(x=t);for(let B=0;B<x;B+=1)s.renderBullet?m+=s.renderBullet.call(e,B,s.bulletClass):m+=`<${s.bulletElement} ${e.isElement?'part="bullet"':""} class="${s.bulletClass}"></${s.bulletElement}>`}s.type==="fraction"&&(s.renderFraction?m=s.renderFraction.call(e,s.currentClass,s.totalClass):m=`<span class="${s.currentClass}"></span> / <span class="${s.totalClass}"></span>`),s.type==="progressbar"&&(s.renderProgressbar?m=s.renderProgressbar.call(e,s.progressbarFillClass):m=`<span class="${s.progressbarFillClass}"></span>`),e.pagination.bullets=[],n.forEach(x=>{s.type!=="custom"&&(x.innerHTML=m||""),s.type==="bullets"&&e.pagination.bullets.push(...x.querySelectorAll(q(s.bulletClass)))}),s.type!=="custom"&&o("paginationRender",n[0])}function v(){e.params.pagination=de(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const s=e.params.pagination;if(!s.el)return;let t;typeof s.el=="string"&&e.isElement&&(t=e.el.querySelector(s.el)),!t&&typeof s.el=="string"&&(t=[...document.querySelectorAll(s.el)]),t||(t=s.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof s.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(s.el)],t.length>1&&(t=t.filter(n=>ue(n,".swiper")[0]===e.el)[0])),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=c(t),t.forEach(n=>{s.type==="bullets"&&s.clickable&&n.classList.add(s.clickableClass),n.classList.add(s.modifierClass+s.type),n.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass),s.type==="bullets"&&s.dynamicBullets&&(n.classList.add(`${s.modifierClass}${s.type}-dynamic`),_=0,s.dynamicMainBullets<1&&(s.dynamicMainBullets=1)),s.type==="progressbar"&&s.progressbarOpposite&&n.classList.add(s.progressbarOppositeClass),s.clickable&&n.addEventListener("click",h),e.enabled||n.classList.add(s.lockClass)}))}function O(){const s=e.params.pagination;if(r())return;let t=e.pagination.el;t&&(t=c(t),t.forEach(n=>{n.classList.remove(s.hiddenClass),n.classList.remove(s.modifierClass+s.type),n.classList.remove(e.isHorizontal()?s.horizontalClass:s.verticalClass),s.clickable&&n.removeEventListener("click",h)})),e.pagination.bullets&&e.pagination.bullets.forEach(n=>n.classList.remove(...s.bulletActiveClass.split(" ")))}d("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const s=e.params.pagination;let{el:t}=e.pagination;t=c(t),t.forEach(n=>{n.classList.remove(s.horizontalClass,s.verticalClass),n.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass)})}),d("init",()=>{e.params.pagination.enabled===!1?b():(v(),p(),g())}),d("activeIndexChange",()=>{typeof e.snapIndex>"u"&&g()}),d("snapIndexChange",()=>{g()}),d("snapGridLengthChange",()=>{p(),g()}),d("destroy",()=>{O()}),d("enable disable",()=>{let{el:s}=e.pagination;s&&(s=c(s),s.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),d("lock unlock",()=>{g()}),d("click",(s,t)=>{const n=t.target,m=c(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&m&&m.length>0&&!n.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;const x=m[0].classList.contains(e.params.pagination.hiddenClass);o(x===!0?"paginationShow":"paginationHide"),m.forEach(B=>B.classList.toggle(e.params.pagination.hiddenClass))}});const k=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:s}=e.pagination;s&&(s=c(s),s.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),v(),p(),g()},b=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:s}=e.pagination;s&&(s=c(s),s.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),O()};Object.assign(e.pagination,{enable:k,disable:b,render:p,update:g,init:v,destroy:O})}function ye(i){let{swiper:e,extendParams:y,on:d}=i;y({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let o=!1,u=!1;e.thumbs={swiper:null};function A(){const r=e.thumbs.swiper;if(!r||r.destroyed)return;const a=r.clickedIndex,h=r.clickedSlide;if(h&&h.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof a>"u"||a===null)return;let g;r.params.loop?g=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10):g=a,e.params.loop?e.slideToLoop(g):e.slideTo(g)}function _(){const{thumbs:r}=e.params;if(o)return!1;o=!0;const a=e.constructor;if(r.swiper instanceof a)e.thumbs.swiper=r.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(me(r.swiper)){const h=Object.assign({},r.swiper);Object.assign(h,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new a(h),u=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",A),!0}function c(r){const a=e.thumbs.swiper;if(!a||a.destroyed)return;const h=a.params.slidesPerView==="auto"?a.slidesPerViewDynamic():a.params.slidesPerView;let g=1;const p=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(g=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(g=1),g=Math.floor(g),a.slides.forEach(k=>k.classList.remove(p)),a.params.loop||a.params.virtual&&a.params.virtual.enabled)for(let k=0;k<g;k+=1)fe(a.slidesEl,`[data-swiper-slide-index="${e.realIndex+k}"]`).forEach(b=>{b.classList.add(p)});else for(let k=0;k<g;k+=1)a.slides[e.realIndex+k]&&a.slides[e.realIndex+k].classList.add(p);const v=e.params.thumbs.autoScrollOffset,O=v&&!a.params.loop;if(e.realIndex!==a.realIndex||O){const k=a.activeIndex;let b,s;if(a.params.loop){const t=a.slides.filter(n=>n.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];b=a.slides.indexOf(t),s=e.activeIndex>e.previousIndex?"next":"prev"}else b=e.realIndex,s=b>e.previousIndex?"next":"prev";O&&(b+=s==="next"?v:-1*v),a.visibleSlidesIndexes&&a.visibleSlidesIndexes.indexOf(b)<0&&(a.params.centeredSlides?b>k?b=b-Math.floor(h/2)+1:b=b+Math.floor(h/2)-1:b>k&&a.params.slidesPerGroup,a.slideTo(b,r?0:void 0))}}d("beforeInit",()=>{const{thumbs:r}=e.params;if(!(!r||!r.swiper))if(typeof r.swiper=="string"||r.swiper instanceof HTMLElement){const a=pe(),h=()=>{const p=typeof r.swiper=="string"?a.querySelector(r.swiper):r.swiper;if(p&&p.swiper)r.swiper=p.swiper,_(),c(!0);else if(p){const v=O=>{r.swiper=O.detail[0],p.removeEventListener("init",v),_(),c(!0),r.swiper.update(),e.update()};p.addEventListener("init",v)}return p},g=()=>{if(e.destroyed)return;h()||requestAnimationFrame(g)};requestAnimationFrame(g)}else _(),c(!0)}),d("slideChange update resize observerUpdate",()=>{c()}),d("setTransition",(r,a)=>{const h=e.thumbs.swiper;!h||h.destroyed||h.setTransition(a)}),d("beforeDestroy",()=>{const r=e.thumbs.swiper;!r||r.destroyed||u&&r.destroy()}),Object.assign(e.thumbs,{init:_,update:c})}function re(i){let{swiper:e,extendParams:y,emit:d,once:o}=i;y({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function u(){if(e.params.cssMode)return;const c=e.getTranslate();e.setTranslate(c),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function A(){if(e.params.cssMode)return;const{touchEventsData:c,touches:r}=e;c.velocities.length===0&&c.velocities.push({position:r[e.isHorizontal()?"startX":"startY"],time:c.touchStartTime}),c.velocities.push({position:r[e.isHorizontal()?"currentX":"currentY"],time:G()})}function _(c){let{currentPos:r}=c;if(e.params.cssMode)return;const{params:a,wrapperEl:h,rtlTranslate:g,snapGrid:p,touchEventsData:v}=e,k=G()-v.touchStartTime;if(r<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(r>-e.maxTranslate()){e.slides.length<p.length?e.slideTo(p.length-1):e.slideTo(e.slides.length-1);return}if(a.freeMode.momentum){if(v.velocities.length>1){const I=v.velocities.pop(),f=v.velocities.pop(),$=I.position-f.position,S=I.time-f.time;e.velocity=$/S,e.velocity/=2,Math.abs(e.velocity)<a.freeMode.minimumVelocity&&(e.velocity=0),(S>150||G()-I.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=a.freeMode.momentumVelocityRatio,v.velocities.length=0;let b=1e3*a.freeMode.momentumRatio;const s=e.velocity*b;let t=e.translate+s;g&&(t=-t);let n=!1,m;const x=Math.abs(e.velocity)*20*a.freeMode.momentumBounceRatio;let B;if(t<e.maxTranslate())a.freeMode.momentumBounce?(t+e.maxTranslate()<-x&&(t=e.maxTranslate()-x),m=e.maxTranslate(),n=!0,v.allowMomentumBounce=!0):t=e.maxTranslate(),a.loop&&a.centeredSlides&&(B=!0);else if(t>e.minTranslate())a.freeMode.momentumBounce?(t-e.minTranslate()>x&&(t=e.minTranslate()+x),m=e.minTranslate(),n=!0,v.allowMomentumBounce=!0):t=e.minTranslate(),a.loop&&a.centeredSlides&&(B=!0);else if(a.freeMode.sticky){let I;for(let f=0;f<p.length;f+=1)if(p[f]>-t){I=f;break}Math.abs(p[I]-t)<Math.abs(p[I-1]-t)||e.swipeDirection==="next"?t=p[I]:t=p[I-1],t=-t}if(B&&o("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(g?b=Math.abs((-t-e.translate)/e.velocity):b=Math.abs((t-e.translate)/e.velocity),a.freeMode.sticky){const I=Math.abs((g?-t:t)-e.translate),f=e.slidesSizesGrid[e.activeIndex];I<f?b=a.speed:I<2*f?b=a.speed*1.5:b=a.speed*2.5}}else if(a.freeMode.sticky){e.slideToClosest();return}a.freeMode.momentumBounce&&n?(e.updateProgress(m),e.setTransition(b),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating=!0,U(h,()=>{!e||e.destroyed||!v.allowMomentumBounce||(d("momentumBounce"),e.setTransition(a.speed),setTimeout(()=>{e.setTranslate(m),U(h,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(d("_freeModeNoMomentumRelease"),e.updateProgress(t),e.setTransition(b),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,U(h,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(t),e.updateActiveIndex(),e.updateSlidesClasses()}else if(a.freeMode.sticky){e.slideToClosest();return}else a.freeMode&&d("_freeModeNoMomentumRelease");(!a.freeMode.momentum||k>=a.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:u,onTouchMove:A,onTouchEnd:_}})}const we="https://two024-south-json-server-vercel.onrender.com",_e={components:{Swiper:ie,SwiperSlide:ae},data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],imagesUrl:""}},methods:{getAttractions(){this.axios.get(`${we}/attractions`).then(i=>{this.attractions=i.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&this.enabledAttractions.push(e)}),this.imagesUrl=this.enabledAttractions[0].imagesUrl}).catch(i=>{E.threeLayerCheckType("error","取得景點資料失敗")})}},setup(){const i=he(null);return{thumbsSwiper:i,setThumbsSwiper:y=>{i.value=y},modules:[re,ne,ye]}},mounted(){this.attractionTitle=this.$route.params.title,this.getAttractions()}},oe=i=>(W("data-v-c53f480c"),i=i(),Z(),i),xe=["src"],Te=oe(()=>l("button",{class:"swiper-button-next border-0 bg-transparent"},null,-1)),Ce=oe(()=>l("button",{class:"swiper-button-prev border-0 bg-transparent"},null,-1)),ke=["src"];function Se(i,e,y,d,o,u){const A=F("swiper-slide"),_=F("swiper");return w(),T(P,null,[z(_,{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:d.thumbsSwiper},modules:d.modules,class:"mySwiper2"},{default:H(()=>[(w(!0),T(P,null,V(o.imagesUrl,(c,r)=>(w(),K(A,{key:r+123},{default:H(()=>[l("img",{src:c,class:"img-fluid"},null,8,xe)]),_:2},1024))),128)),Te,Ce]),_:1},8,["navigation","thumbs","modules"]),z(_,{onSwiper:d.setThumbsSwiper,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:d.modules,class:"mySwiper3"},{default:H(()=>[(w(!0),T(P,null,V(o.imagesUrl,(c,r)=>(w(),K(A,{key:r+123},{default:H(()=>[l("img",{src:c,class:"img-fluid"},null,8,ke)]),_:2},1024))),128))]),_:1},8,["onSwiper","modules"])],64)}const Ae=Q(_e,[["render",Se],["__scopeId","data-v-c53f480c"]]),Ie="https://two024-south-json-server-vercel.onrender.com",Le={components:{Swiper:ie,SwiperSlide:ae},props:["adCategoryTitle","token","userId"],data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],adTitle:{sweet:"你可能喜歡景點"},isFavorite:{}}},methods:{goRouter(i){return`#/TouristAttractions/${i.category}/${i.title}`},getAttractions(){this.axios.get(`${Ie}/attractions`).then(i=>{this.attractions=i.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.enabledAttractions.push(e)}),console.log(this.enabledAttractions)}).catch(i=>{E.threeLayerCheckType("error","取得景點資料失敗")})},truncateContent(i,e){return i&&i.length>e?i.substring(0,e)+"...":i}},setup(){return{modules:[re,ve,ne]}},mounted(){this.attractionTitle=this.$route.params.title,this.getAttractions()}},le=i=>(W("data-v-7592b61c"),i=i(),Z(),i),Me={class:"mt-10"},$e={class:"card h-100 flex-grow-1"},Be={class:"tag text-white"},Ee=["href"],Pe=["src"],De={class:"card-body"},Oe={class:"fs-5 fs-lg-4 fw-bold text-primary-700 text-center flex-grow-1 h-35"},ze=le(()=>l("button",{class:"swiper-button-next border-0 bg-transparent"},null,-1)),Fe=le(()=>l("button",{class:"swiper-button-prev border-0 bg-transparent"},null,-1));function Ve(i,e,y,d,o,u){const A=F("swiper-slide"),_=F("swiper");return w(),T("div",Me,[l("h2",null,D(o.adTitle[y.adCategoryTitle]),1),z(_,{slidesPerView:1,spaceBetween:10,breakpoints:{768:{slidesPerView:2,spaceBetween:20},992:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{clickable:!0},modules:d.modules,class:"mySwiper4"},{default:H(()=>[(w(!0),T(P,null,V(o.enabledAttractions,(c,r)=>(w(),K(A,{key:r+123},{default:H(()=>[l("div",$e,[l("span",Be,D(c.category),1),l("a",{href:u.goRouter(c),target:"_blank",class:"stretched-link"},[l("img",{src:c.imageUrl,class:"img-fluid",alt:"attractionItem.title"},null,8,Pe)],8,Ee),l("div",De,[l("h5",Oe,D(c.title),1),l("p",null,D(u.truncateContent(c.description,48)),1)])])]),_:2},1024))),128)),ze,Fe]),_:1},8,["navigation","modules"])])}const He=Q(Le,[["render",Ve],["__scopeId","data-v-7592b61c"]]),N="https://two024-south-json-server-vercel.onrender.com",je={components:{singleAttraction:Ae,BannerBlock:be,LikeBlock:He},data(){return{category:"",attractionTitle:"",attractions:[],enabledAttractions:[],newAttractionsContent:"",newAttractionsTimeOpen:"",attractionId:"",heartData:[],isFavorite:{},userId:"",token:"",isLoading:!1}},methods:{redirectToA(i){this.$router.push({path:"/TouristAttractions",query:{category:i}})},getHeartData(){this.axios.get(`${N}/hearts`).then(i=>{i.data.forEach(e=>{e.userId===this.userId&&e.tag==="旅遊景點"&&(this.isFavorite[e.product]=!0)})}).catch(i=>{E.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(i,e,y){this.token?this.axios.get(`${N}/hearts`).then(d=>{const o=d.data.find(u=>u.product===i&&u.userId===this.userId&&u.tag==="旅遊景點");o?this.axios.delete(`${N}/hearts/${o.id}`).then(u=>{this.isFavorite[i]=!1,E.threeLayerCheckType("success",`取消收藏 ${y} 成功`),this.getHeartData()}).catch(u=>{E.threeLayerCheckType("error","取消收藏資料失敗")}):this.axios.post(`${N}/hearts`,{product:i,category:e,title:y,userId:this.userId,tag:"旅遊景點"}).then(u=>{this.isFavorite[i]=!0,E.threeLayerCheckType("success",`已加入收藏 ${y} 成功`),this.getHeartData()}).catch(u=>{E.threeLayerCheckType("error","收藏資料失敗")})}).catch(d=>{E.threeLayerCheckType("error","取得愛心收藏資料失敗")}):E.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getAttractions(){this.axios.get(`${N}/attractions`).then(i=>{this.attractions=i.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&(this.enabledAttractions.push(e),this.attractionId=e.id,this.isLoading=!1)}),this.getNewText(),this.getnewAttractionsTimeOpen()}).catch(()=>{E.threeLayerCheckType("error","取得景點資料失敗")})},getNewText(){const i={};this.attractions.forEach(e=>{e.content&&e.content.split(";").forEach(d=>{const o=d.trim();i[e.id]||(i[e.id]=[]),i[e.id].push(o)})}),this.newProductsContent=Object.entries(i).map(([e,y])=>({id:e,content:y}))},getnewAttractionsTimeOpen(){const i={};this.attractions.forEach(e=>{e.content&&e.timeOpen.split(";").forEach(d=>{const o=d.trim();i[e.id]||(i[e.id]=[]),i[e.id].push(o)})}),this.newAttractionsTimeOpen=Object.entries(i).map(([e,y])=>({id:e,content:y}))},getCookie(i){const e=document.cookie.split(";");for(let y of e){const[d,o]=y.trim().split("=");if(d===i)return o}return null}},mounted(){this.category=this.$route.params.category,this.attractionTitle=this.$route.params.title;const i=this.getCookie("userId"),e=this.getCookie("hexTokenU");this.userId=i*1,this.token=e,this.isLoading=!0,this.getAttractions(),this.getHeartData(),window.scrollTo(0,0),console.log(this.token,this.userId)}},ee=i=>(W("data-v-c7648fa0"),i=i(),Z(),i),Re={class:"container py-10 py-lg-30 px-lg-20"},qe={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-15"},Ne={class:"breadcrumb mb-0 fs-5"},Ge={class:"breadcrumb-item"},Ue={class:"breadcrumb-item"},Xe={class:"breadcrumb-item"},Ye={class:"breadcrumb-item"},Je={class:"intr-title d-flex align-items-center mb-4 fs-3 border-start border-primary-500 border-3"},Ke={class:"fs-3 me-2 fw-bold ps-3"},Qe={class:"fs-3 me-4 fw-bold"},We={key:0},Ze={class:"tourist-intr-content my-lg-10 my-5"},et={class:"mb-8"},tt=ee(()=>l("p",{class:"fs-5 fs-md-4 fw-bold mb-4"},"景點介紹",-1)),st={class:"fs-6 fs-md-5"},it={class:"mb-8"},at=ee(()=>l("span",{class:"fs-5 fs-md-4 mb-4 fw-bold"},"開放時間：",-1)),nt={key:0},rt=ee(()=>l("p",{class:"fs-5 fs-md-4 mb-3 fw-bold"},"交通資訊：",-1)),ot={class:"row"},lt={class:"d-flex col-12 col-lg-7 justify-content-between flex-column"},ct={key:0},dt={class:"col-12 col-lg-5"},ut=["src"];function pt(i,e,y,d,o,u){const A=F("VueLoading"),_=F("BannerBlock"),c=F("router-link"),r=F("singleAttraction"),a=F("LikeBlock");return w(),T(P,null,[z(A,{active:o.isLoading,class:"text-center","z-index":1060},null,8,["active"]),z(_),l("div",Re,[l("nav",qe,[l("ol",Ne,[l("li",Ge,[z(c,{to:"/",exact:"","active-class":"active-link"},{default:H(()=>[se("首頁")]),_:1})]),l("li",Ue,[z(c,{exact:"","active-class":"active-link",to:{path:"/TouristAttractions",query:{category:"全部",page:"1"}}},{default:H(()=>[se(" 南部旅遊景點 ")]),_:1})]),l("li",Xe,[X(l("a",{onClick:e[0]||(e[0]=h=>u.redirectToA("台南")),class:"navbar-brand"},"台南",512),[[Y,o.category==="台南"]]),X(l("a",{onClick:e[1]||(e[1]=h=>u.redirectToA("嘉義")),class:"navbar-brand"},"嘉義",512),[[Y,o.category==="嘉義"]]),X(l("a",{onClick:e[2]||(e[2]=h=>u.redirectToA("高雄")),class:"navbar-brand"},"高雄",512),[[Y,o.category==="高雄"]])]),l("li",Ye,D(o.attractionTitle),1)])]),l("div",Je,[l("span",Ke,D(o.category),1),l("p",Qe,D(o.attractionTitle),1),l("button",{class:"border-0 heart4 fs-3",onClick:e[3]||(e[3]=h=>u.toggleFavorite(o.attractionId,o.category,o.attractionTitle)),type:"button"},[l("i",{class:ge(["bi",{"bi-heart-fill":o.isFavorite[o.attractionId],"bi-heart":!o.isFavorite[o.attractionId]}])},null,2)])]),z(r),(w(!0),T(P,null,V(o.enabledAttractions,(h,g)=>(w(),T("div",{class:"row g-3",key:h.id},[g===0?(w(),T("div",We,[l("div",Ze,[l("div",et,[tt,l("p",st,D(h.description),1)]),l("div",it,[at,(w(!0),T(P,null,V(o.newAttractionsTimeOpen,p=>(w(),T("div",{key:p.id},[p.id===h.id?(w(),T("div",nt,[(w(!0),T(P,null,V(p.content,v=>(w(),T("p",{key:v+123,class:"fs-6 fs-md-5 my-4"},D(v),1))),128))])):J("",!0)]))),128))]),l("div",null,[rt,l("div",ot,[l("div",lt,[(w(!0),T(P,null,V(i.newProductsContent,p=>(w(),T("div",{key:p.id},[p.id===h.id?(w(),T("div",ct,[(w(!0),T(P,null,V(p.content,v=>(w(),T("p",{key:v,class:"fs-6 fs-md-5 my-4 mb-4"},D(v),1))),128))])):J("",!0)]))),128))]),l("div",dt,[l("iframe",{src:h.imgMap,width:"100%",height:"100%",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,ut)])])])])])):J("",!0)]))),128)),z(a,{adCategoryTitle:"sweet",token:o.token,"user-id":o.userId},null,8,["token","user-id"])])],64)}const bt=Q(je,[["render",pt],["__scopeId","data-v-c7648fa0"]]);export{bt as default};
