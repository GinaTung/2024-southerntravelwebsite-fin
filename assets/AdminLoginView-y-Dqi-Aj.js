import{_ as f,c as w,a as e,b as o,w as u,A as k,r as i,o as g,n as p,d as x}from"./index-CnCUfF1T.js";const b="https://ec-course-api.hexschool.io/v2",V={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token&&(alert("目前已為管理者身分登入，無需再次登入"),this.$router.push({path:"/admin/AdminHome"}))},login(){this.axios.post(`${b}/admin/signin`,this.user).then(t=>{alert(`${t.data.message}`),this.$router.push({name:"AdminHome"}),this.$emitter.emit("loginCheck",!0);const{expired:s,token:l}=t.data;document.cookie=`hexToken=${l}; expires=${new Date(s)}`}).catch(t=>{alert(`${t.data.message}`)})}},mounted(){setTimeout(()=>{this.checkAdmin()},1e3)}},v={class:"container py-10 py-lg-30"},$={class:"row justify-content-center"},y={class:"col-md-6"},A=e("h1",{class:"h3 mb-4 text-center"},"管理者登入",-1),C={class:"form-floating mb-4"},E=e("label",{for:"email"},"請輸入 Email",-1),q={class:"form-floating mb-4"},F=e("label",{for:"userpassword"},"請輸入Password",-1),T={class:"mt-3"};function B(t,s,l,M,n,r){const d=i("VeeField"),m=i("ErrorMessage"),h=i("router-link"),_=i("VeeForm");return g(),w("div",v,[e("div",$,[e("div",y,[A,o(_,{id:"form",ref:"form",onSubmit:k(r.login,["prevent"])},{default:u(({errors:c})=>[e("div",C,[o(d,{type:"email",name:"email",class:p(["form-control",{"is-invalid":c.email}]),modelValue:n.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>n.user.email=a),id:"email",placeholder:"請輸入 Email",rules:"email|required",autocomplete:"useremail"},null,8,["modelValue","class"]),E,o(m,{name:"email",class:"invalid-feedback"})]),e("div",q,[o(d,{type:"password",class:p(["form-control",{"is-invalid":c.password}]),name:"password",id:"userpassword",placeholder:"請輸入Password",rules:"min:8|alpha_dash|required",autocomplete:"current-password",modelValue:n.user.password,"onUpdate:modelValue":s[1]||(s[1]=a=>n.user.password=a)},null,8,["class","modelValue"]),F,o(m,{name:"password",class:"invalid-feedback"})]),e("a",{class:"btn-turquoise w-100 mt-3 text-center",type:"button",onClick:s[2]||(s[2]=(...a)=>r.login&&r.login(...a))}," 登入 "),e("div",T,[o(h,{to:"/",class:"btn-outline-turquoise w-100 text-center",type:"button"},{default:u(()=>[x("回前台")]),_:1})])]),_:1},8,["onSubmit"])])])])}const z=f(V,[["render",B]]);export{z as default};
