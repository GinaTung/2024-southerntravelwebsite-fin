import{_ as b,a,b as t,F as d,x as u,z as c,f as m,o as l,h as _,B as g,A as f}from"./index-3YyzOM4j.js";const p="https://two024-south-json-server-vercel.onrender.com",x={data(){return{id:"",title:"",category:"",status:{addCartLoading:"",carteQtyLoading:""},cart:[],cartId:null,products:[],enabledProducts:[],newCart:[]}},methods:{thousand(e){return e!==void 0&&(e=e.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${e}`},getCart(){this.axios.get(`${p}/carts`).then(e=>{this.cart=e.data,this.cart.forEach(n=>{n.id===this.cartId&&(this.cart=n)}),this.combineCart()}).catch(e=>{console.log(e)})},getCookie(e){const o=`; ${document.cookie}`.split(`; ${e}=`);if(o.length===2)return o.pop().split(";").shift()},getProducts(){this.axios.get(`${p}/products`).then(e=>{this.products=e.data,this.combineCart()}).catch(e=>{console.log(e)})},combineCart(){this.products.forEach(e=>{if(e.id===this.cart.data.product_id){const n={...this.cart.data,product:e};this.newCart.push({cartData:n})}})}},mounted(){this.getCart(),this.getProducts(),this.cartId=this.getCookie("cartId")*1}},y={class:"container py-10 py-lg-30"},w=m('<div class="row"><div class="col-md-6 mx-auto pb-5 pb-lg-15"><ol class="pay-list mt-5 d-flex justify-content-between list-unstyled pe-0 position-relative"><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center number-active mb-0"> 1 </p><p class="fw-bold mb-0">確認行程</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">2</p><p class="fw-bold mb-0">訂單資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">3</p><p class="fw-bold mb-0">付款資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">4</p><p class="fw-bold mb-0">訂單完成</p></li></ol></div></div>',1),v={class:"table align-middle"},C=t("thead",null,[t("tr",null,[t("th",{style:{width:"100px"}}),t("th",{style:{width:"150px"}},"圖片"),t("th",null,"行程名稱"),t("th",{style:{width:"180px"}},"數量/單位"),t("th",{style:{width:"100px"}},"單價"),t("th",{class:"text-end",style:{width:"100px"}},"小計")])],-1),D=t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," x ")],-1),k=["src"],$={class:"input-group input-group-sm"},j={class:"input-group my-3"},V=t("button",{class:"btn btn-outline-primary",type:"button"},"-",-1),B=t("button",{type:"button",class:"btn btn-outline-danger",style:{"padding-left":"10px","padding-right":"10px"}},[t("i",{class:"bi bi-trash"})],-1),I=["onUpdate:modelValue"],L=t("button",{class:"btn btn-outline-primary",type:"button"},"+",-1),E={class:"text-end"},N=t("td",{colspan:"5",class:"text-end text-success"},"預約",-1),P={class:"text-end text-success"},S=t("td",{colspan:"5",class:"text-end"},"總計",-1),U={key:0,class:"text-end"};function q(e,n,o,F,i,h){return l(),a("div",y,[w,t("table",v,[C,t("tbody",null,[(l(!0),a(d,null,u(i.newCart,s=>(l(),a("tr",{key:s.id},[D,t("td",null,[t("img",{src:s.cartData.product.imageUrl,alt:"",class:"img-fluid"},null,8,k)]),t("td",null,c(s.cartData.product.title),1),t("td",null,[t("div",$,[t("div",j,[V,B,_(t("input",{min:"1",type:"number",class:"form-control text-end","onUpdate:modelValue":r=>s.cartData.qty=r},null,8,I),[[g,s.cartData.qty]]),L])])]),t("td",null,"$ "+c(s.cartData.price),1),t("td",E," $ "+c(s.cartData.total),1)]))),128))]),t("tfoot",null,[t("tr",null,[N,t("td",P,c(i.newCart.length)+" 項行程",1)]),(l(!0),a(d,null,u(i.newCart,(s,r)=>(l(),a("tr",{key:s.id},[S,r===0?(l(),a("td",U,c(h.thousand(s.cartData.total)),1)):f("",!0)]))),128))])])])}const A=b(x,[["render",q]]);export{A as default};
