import{C as f}from"./bootstrap.esm-kKkoYt6m.js";import{A as k}from"./AdminSidebar-ob-_1FT2.js";import{s as d}from"./sweetAlert-MUiQSz63.js";import{_ as g,a as x,b as w,c as C}from"./logo-sm-8HbWJp6J.js";import{_ as I,c as h,a as e,b as n,w as i,h as N,F as A,r as l,o as c,d as p,p as L,f as y}from"./index-NbCyhOnH.js";const m="https://ec-course-api.hexschool.io/v2",S={components:{AdminSidebar:k},data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:"",navCollapse:null}},methods:{toggleNavbar(){this.$refs.navbar.classList.contains("show")?this.navCollapse.hide():this.navCollapse.show()},checkAdmin(){this.$emitter.on("loginCheck",a=>{this.userIsLoggedIn=a}),this.token&&this.axios.post(`${m}/api/user/check`).then(a=>{this.userIsLoggedIn=!0}).catch(()=>{this.userIsLoggedIn=!1,d.threeLayerCheckType("error","管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/AdminHome"})})},logout(){this.axios.post(`${m}/logout`).then(()=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(()=>{d.threeLayerCheckType("error","管理者身分登出失敗，請稍後再點選登出按鈕")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkAdmin(),this.navCollapse=new f(this.$refs.navbar,{toggle:!1})}},u=a=>(L("data-v-35222ae8"),a=a(),y(),a),$=g+" 1920w, "+x+" 960w, "+w+" 480w, "+C+" 375w",T={class:"navbar navbar-expand-lg navbar-light bg-light"},V={class:"container"},B=u(()=>e("img",{src:g,alt:"南部輕旅遊網站",style:{"aspect-ratio":"322 / 96",height:"48px"},srcset:$,sizes:`(max-width: 375px) 100vw, \r
         (max-width: 1920px) 50vw, \r
         960px`},null,-1)),z=u(()=>e("span",{class:"navbar-toggler-icon"},null,-1)),F=[z],H={class:"collapse navbar-collapse",id:"navbarSupportedContent",ref:"navbar"},R={class:"navbar-nav ms-auto mb-2 mb-lg-0"},D={class:"container"},E={class:"row flex-column flex-md-row"},j={class:"col-12 col-md-3"},q={class:"col-12 col-md-9"};function G(a,s,J,K,_,o){const r=l("router-link"),v=l("AdminSidebar"),b=l("RouterView");return c(),h(A,null,[e("nav",T,[e("div",V,[n(r,{to:"/admin/adminHome",class:"navbar-brand"},{default:i(()=>[B]),_:1}),e("button",{class:"navbar-toggler",type:"button","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:s[0]||(s[0]=(...t)=>o.toggleNavbar&&o.toggleNavbar(...t))},F),e("div",H,[e("ul",R,[e("li",{class:"nav-item",onClick:s[1]||(s[1]=(...t)=>o.toggleNavbar&&o.toggleNavbar(...t))},[n(r,{to:"/",class:"nav-link"},{default:i(()=>[p("回前台")]),_:1})]),e("li",{class:"nav-item",onClick:s[3]||(s[3]=(...t)=>o.toggleNavbar&&o.toggleNavbar(...t))},[_.userIsLoggedIn===!1?(c(),N(r,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:i(()=>[p("管理者登入")]),_:1})):(c(),h("a",{key:1,class:"nav-link",onClick:s[2]||(s[2]=t=>o.logout())},"登出"))])])],512)])]),e("div",D,[e("div",E,[e("div",j,[n(v)]),e("div",q,[n(b)])])])],64)}const W=I(S,[["render",G],["__scopeId","data-v-35222ae8"]]);export{W as default};
