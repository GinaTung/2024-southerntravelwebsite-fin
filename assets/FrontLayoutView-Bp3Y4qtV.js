import{s as x}from"./sweetAlert-4LcaMrYB.js";import{C as k}from"./collapse-XPp6DcCg.js";import{_ as g,o as d,c as u,a as t,b as o,w as l,d as i,e as f,r as h,f as w,v as y,t as C,F as $}from"./index-Ic4_C9O8.js";const b="/2024-southerntravelwebsite-fin/assets/logo-WY09ya8o.png",I={},L={class:"bg-light"},N={class:"container py-10 justify-content-between"},T={class:"navbar mb-10 flex-column flex-lg-row py-0"},S=t("img",{src:b,alt:"南部輕旅遊網站"},null,-1),A={class:"navbar-nav flex-column flex-lg-row"},q={class:"nav-item"},B={class:"nav-item"},F={class:"nav-item"},O=f('<ul class="navbar-nav flex-row fs-add-2"><li class="nav-item"><a class="nav-link py-0 ps-1" href="#"><i class="bi bi-youtube img-lg"></i></a></li><li class="nav-item"><a class="nav-link py-0 ps-6" href="#"><i class="bi bi-instagram img-lg"></i></a></li><li class="nav-item"><a class="nav-link py-0 ps-6" href="#"><i class="bi bi-facebook img-lg"></i></a></li></ul>',1),U=f('<div class="d-flex text-center flex-column align-items-center"><p class="fw-bold text-dark mb-1"> 南部輕旅行 「完美套裝」 </p><p class="fw-bold text-dark mb-1"> 輕鬆省心，玩得盡興！ </p><p class="text-dark mb-10"> 景點探索 + 美食巡禮 + 便捷交通 + 舒適住宿 </p><p class="text-dark2 text-center fs-7 fs-lg-6"> 本網站僅供個人作品使用，不提供商業用途<br> 資料來源<br><a href="https://www.taiwan.net.tw/" class="fw-bold fs-7" target="_blank">臺灣觀光資訊網</a><br><a href="https://www.swcoast-nsa.gov.tw/zh-tw" class="fw-bold fs-7" target="_blank">雲嘉南濱海國家風景區管理處網站</a><br><a href="https://khh.travel/" target="_blank" class="fw-bold fs-7">高雄旅遊網</a>、<a href="https://travel.chiayi.gov.tw/" target="_blank" class="fw-bold fs-7">嘉義市觀光旅遊網</a></p></div>',1),V={class:"navbar-nav text-end"},j={class:"nav-item"};function z(e,a){const s=h("router-link");return d(),u("div",L,[t("div",N,[t("nav",T,[o(s,{to:"/",class:"navbar-brand mb-10 mb-lg-0 py-0 mx-0"},{default:l(()=>[S]),_:1}),t("ul",A,[t("li",q,[o(s,{to:"/TouristAttractions",class:"nav-link px-5 px-xl-10 fs-6 fs-lg-5 text-dark mb-3 mb-lg-0"},{default:l(()=>[i("南部旅遊景點")]),_:1})]),t("li",B,[o(s,{to:"/TouristPackage",class:"nav-link px-5 px-xl-10 fs-6 fs-lg-5 text-dark mb-3 mb-lg-0"},{default:l(()=>[i("南部旅遊方案")]),_:1})]),t("li",F,[o(s,{to:"/TouristBudget",class:"nav-link px-5 px-xl-10 fs-6 fs-lg-5 text-dark mb-3 mb-lg-0"},{default:l(()=>[i("南部旅遊預算")]),_:1})])]),O]),U,t("ul",V,[t("li",j,[o(s,{to:"/admin/adminlogin",class:"nav-link"},{default:l(()=>[i("後台管理")]),_:1})])])])])}const E=g(I,[["render",z]]),D="https://two024-south-json-server-vercel.onrender.com",G={components:{FrontLayoutFooter:E},data(){return{headerCollapse:{},isNavbarOpen:!1,userIsLoggedIn2:!1,token:"",carts:[],userCarts:[],cartsLength:0,userCartsNum:[],transCartNumberStatus:!1}},created(){this.$emitter.on("updateCart",()=>{this.getCarts()})},watch:{$route(){this.headerCollapse.hide()}},methods:{checkLoggedInUser(){this.$emitter.on("loginCheck2",e=>{this.userIsLoggedIn2=e}),this.token?this.userIsLoggedIn2=!0:this.userIsLoggedIn2=!1},toggleNavbar(){this.isNavbarOpen=!this.isNavbarOpen},logout(){this.deleteAllCookies(),this.userIsLoggedIn2=!1,x.threeLayerCheckType("success","會員登出成功"),this.$router.push("/")},getCarts(){this.axios.get(`${D}/carts`).then(e=>{this.carts=e.data,this.carts.forEach(n=>{n.userId===this.userId&&this.userCarts.push(n)});const a=[],s=new Set;this.userCarts.forEach(n=>{s.has(n.productId)||(s.add(n.productId),a.push(n))}),this.userCarts=a,this.cartsLength=this.userCarts.length}).catch(e=>{alert(`${e.message}`)})},deleteAllCookies(){for(var e=document.cookie.split(";"),a=0;a<e.length;a++){var s=e[a],n=s.indexOf("="),r=n>-1?s.substr(0,n):s;document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}},getCookie(e){const a=document.cookie.split(";");for(let s of a){const[n,r]=s.trim().split("=");if(n===e)return r}return null}},mounted(){this.headerCollapse=new k(this.$refs.headerCollapse,{toggle:!1}),this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexTokenU\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkLoggedInUser();const e=this.getCookie("userId");this.userId=e*1,this.getCarts()}},J={class:"navbar navbar-expand-lg navbar-light bg-light py-0 sticky-top"},M={class:"container"},P=t("img",{src:b,alt:"南部輕旅遊網站"},null,-1),W=t("i",{class:"bi bi-list",style:{"font-size":"3rem",color:"#0ea0a6"}},null,-1),Y=[W],H={class:"collapse navbar-collapse py-10 py-lg-0",id:"navbarSupportedContent",ref:"headerCollapse"},K={class:"navbar-nav m-auto mb-lg-0 align-items-center"},Q={class:"nav-item mb-10 mb-lg-0"},R={class:"nav-item mb-10 mb-lg-0"},X={class:"nav-item mb-10 mb-lg-0"},Z={key:0,class:"navbar-nav d-flex pt-5 pt-lg-0 flex-row justify-content-center"},tt={class:"nav-item"},st={class:"nav-item"},et={key:1,class:"navbar-nav d-flex pt-5 pt-lg-0 flex-row justify-content-center align-items-center"},at={class:"nav-item"},ot={type:"button",class:"btn-outline-turquoise position-relative",href:"#/cart",style:{"padding-top":"5px","padding-bottom":"5px"}},nt=t("i",{class:"bi bi-cart-fill fs-5"},null,-1),lt={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},it=t("span",{class:"visually-hidden"},"unread messages",-1),rt=t("li",{class:"nav-item btn-outline-turquoise ms-3",style:{"padding-top":"5px","padding-bottom":"5px"}},[t("i",{class:"bi bi-person-fill fs-5"})],-1),ct={class:"nav-item ms-3"};function dt(e,a,s,n,r,p){const c=h("router-link"),m=h("router-view"),v=h("front-layout-footer");return d(),u($,null,[t("nav",J,[t("div",M,[o(c,{to:"/",class:"navbar-brand py-6"},{default:l(()=>[P]),_:1}),t("button",{class:"navbar-toggler border-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:a[0]||(a[0]=(..._)=>p.toggleNavbar&&p.toggleNavbar(..._))},Y),w(t("div",H,[t("ul",K,[t("li",Q,[o(c,{to:"/TouristAttractions",class:"nav-link px-5 px-xl-10 fs-5 text-dark"},{default:l(()=>[i("南部旅遊景點")]),_:1})]),t("li",R,[o(c,{to:"/TouristPackage",class:"nav-link px-5 px-xl-10 fs-5 text-dark"},{default:l(()=>[i("南部旅遊方案")]),_:1})]),t("li",X,[o(c,{to:"/TouristBudget",class:"nav-link px-5 px-xl-10 fs-5 text-dark"},{default:l(()=>[i("南部旅遊預算")]),_:1})])]),r.userIsLoggedIn2===!1?(d(),u("ul",Z,[t("li",tt,[o(c,{to:"/login",class:"btn-outline-turquoise"},{default:l(()=>[i("登入")]),_:1})]),t("li",st,[o(c,{to:"/signup",class:"btn-turquoise ms-3"},{default:l(()=>[i("註冊")]),_:1})])])):(d(),u("ul",et,[t("li",at,[t("a",ot,[nt,t("span",lt,[i(C(r.cartsLength)+" ",1),it])])]),rt,t("li",ct,[t("a",{href:"#",onClick:a[1]||(a[1]=_=>p.logout()),class:"btn-outline-turquoise"},"登出")])]))],512),[[y,r.isNavbarOpen]])])]),o(m),o(v)],64)}const _t=g(G,[["render",dt]]);export{_t as default};
