import{_ as b,a as n,b as t,F as d,x as u,z as o,f as _,o as a,h as m,B as g,A as f}from"./index-miFw8Ony.js";const p="https://two024-south-json-server-vercel.onrender.com",x={data(){return{id:"",title:"",category:"",status:{addCartLoading:"",carteQtyLoading:""},cart:[],cartId:null,products:[],enabledProducts:[],newCart:[]}},methods:{thousand(s){return s!==void 0&&(s=s.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${s}`},getCart(){this.axios.get(`${p}/carts`).then(s=>{this.cart=s.data,this.cart.forEach(l=>{l.id===this.cartId&&(this.cart=l)}),console.log(this.cart),this.combineCart()}).catch(s=>{console.log(s)})},getCookie(s){const c=`; ${document.cookie}`.split(`; ${s}=`);if(c.length===2)return c.pop().split(";").shift()},getProducts(){this.axios.get(`${p}/products`).then(s=>{this.products=s.data,this.combineCart()}).catch(s=>{console.log(s)})},combineCart(){this.products.forEach(s=>{if(s.id===this.cart.data.product_id){const l={...this.cart.data,product:s};this.newCart.push({cartData:l})}})}},mounted(){this.getCart(),this.getProducts(),this.cartId=this.getCookie("cartId")*1,console.log(this.cartId)}},y={class:"container py-10 py-lg-30"},w=_('<div class="row"><div class="col-md-6 mx-auto pb-5 pb-lg-15"><ol class="pay-list mt-5 d-flex justify-content-between list-unstyled pe-0 position-relative"><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center number-active mb-0"> 1 </p><p class="fw-bold mb-0">確認行程</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">2</p><p class="fw-bold mb-0">訂單資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">3</p><p class="fw-bold mb-0">付款資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">4</p><p class="fw-bold mb-0">訂單完成</p></li></ol></div></div>',1),v={class:"table align-middle"},C=t("thead",null,[t("tr",null,[t("th",{style:{width:"100px"}}),t("th",{style:{width:"150px"}},"圖片"),t("th",null,"行程名稱"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{style:{width:"100px"}},"單價"),t("th",{class:"text-end",style:{width:"100px"}},"小計")])],-1),D=t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," x ")],-1),k=["src"],$={class:"input-group input-group-sm"},j={class:"input-group my-3"},V=["disabled"],B=t("i",{class:"bi bi-dash-lg"},null,-1),I=[B],q={key:1,type:"button",class:"btn btn-outline-danger",style:{"padding-left":"10px","padding-right":"10px"}},L=t("i",{class:"bi bi-trash"},null,-1),E=[L],N=["onUpdate:modelValue"],P=t("button",{class:"btn btn-outline-primary",type:"button"},[t("i",{class:"bi bi-plus-lg"})],-1),S={class:"text-end"},U=t("td",{colspan:"5",class:"text-end text-success"},"預約",-1),F={class:"text-end text-success"},z=t("td",{colspan:"5",class:"text-end"},"總計",-1),A={key:0,class:"text-end"};function M(s,l,c,Q,i,h){return a(),n("div",y,[w,t("table",v,[C,t("tbody",null,[(a(!0),n(d,null,u(i.newCart,e=>(a(),n("tr",{key:e.id},[D,t("td",null,[t("img",{src:e.cartData.product.imageUrl,alt:"",class:"img-fluid"},null,8,k)]),t("td",null,o(e.cartData.product.title),1),t("td",null,[t("div",$,[t("div",j,[e.cartData.qty>3?(a(),n("button",{key:0,class:"btn btn-outline-primary",type:"button",disabled:e.cartData.qty===3},I,8,V)):(a(),n("button",q,E)),m(t("input",{min:"3",max:"10",type:"number",class:"form-control text-end","onUpdate:modelValue":r=>e.cartData.qty=r},null,8,N),[[g,e.cartData.qty]]),P])])]),t("td",null,"$ "+o(e.cartData.price),1),t("td",S," $ "+o(e.cartData.total),1)]))),128))]),t("tfoot",null,[t("tr",null,[U,t("td",F,o(i.newCart.length)+" 項行程",1)]),(a(!0),n(d,null,u(i.newCart,(e,r)=>(a(),n("tr",{key:e.id},[z,r===0?(a(),n("td",A,o(h.thousand(e.cartData.total)),1)):f("",!0)]))),128))])])])}const G=b(x,[["render",M]]);export{G as default};
