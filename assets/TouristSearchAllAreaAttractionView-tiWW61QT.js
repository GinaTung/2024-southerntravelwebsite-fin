import{_ as v,c as l,a as t,F as u,h as f,n as g,A as h,o,t as d,b as k,w as x,d as b,r as y}from"./index-8CZ7-rvQ.js";const A="https://two024-south-json-server-vercel.onrender.com",P={data(){return{attractions:[],enabledAttractions:[],pageTotal:0,currentPage:1,limitPage:6,parsedLinks:""}},methods:{getAttractions(r=1){this.axios.get(`${A}/attractions?_limit=${this.limitPage}&_page=${r}`).then(s=>{var i=parseInt(s.headers["x-total-count"]);this.pageTotal=Math.ceil(i/this.limitPage),this.currentPage=r,this.attractions=s.data,this.enabledAttractions=[],this.attractions.forEach(c=>{c.is_enabled===1&&this.enabledAttractions.push(c)})}).catch(s=>{alert(`${s.message}`)})},parseLinkHeader(r){const s=r.split(", "),i={};return s.forEach(c=>{const[a,n]=c.split("; "),p=/<(.*)>/.exec(a)[1],m=/rel="(.*)"/.exec(n)[1];i[m]=p}),i},truncateContent(r,s){return r&&r.length>s?r.substring(0,s)+"...":r}},mounted(){this.getAttractions()}},C={class:"row g-3"},w={class:"card card-att h-100"},T={class:"tag text-white"},M={class:"card-att-img"},R=["src"],V=t("div",{class:"heart3"},[t("i",{class:"bi bi-heart heart-click"})],-1),j={style:{transform:"rotate(0)"}},B={class:"card-body card-body-att"},E={class:"card-title d-flex justify-content-between align-items-center card-title-att"},L={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title-att"},N={class:"card-text card-font-truncate"},S={class:"card-footer text-end border-0"},F={"aria-label":"Page navigation example ",class:"my-10"},U={class:"pagination justify-content-center"},z=["value","onClick"],D={class:"page-item"};function H(r,s,i,c,a,n){const _=y("router-link");return o(),l(u,null,[t("div",C,[(o(!0),l(u,null,f(a.enabledAttractions,e=>(o(),l("div",{class:"col-12 col-md-6 col-lg-4",key:e.id},[t("div",w,[t("span",T,d(e.category),1),t("div",M,[t("img",{src:e.imageUrl,class:"img-fluid",alt:""},null,8,R)]),V,t("div",j,[t("div",B,[t("div",E,[t("h4",L,d(e.title),1)]),t("p",N,d(n.truncateContent(e.description,53)),1)]),t("div",S,[k(_,{to:{name:"TouristSingleAttraction",params:{category:e.category,title:e.title}},class:"fs-5 stretched-link",type:"button"},{default:x(()=>[b("more")]),_:2},1032,["to"])])])])]))),128))]),t("nav",F,[t("ul",U,[t("li",{class:g(["page-item",{disabled:!a.currentPage||a.currentPage===1}])},[t("a",{class:"page-link page-link-radius-2",href:"",onClick:s[0]||(s[0]=h(e=>n.getAttractions(a.currentPage-1),["prevent"]))},"上一頁")],2),(o(!0),l(u,null,f(a.pageTotal,e=>(o(),l("li",{class:"page-item",key:e+123},[t("a",{class:g(["page-link page-link-0 rounded-0",{active:e===a.currentPage}]),href:"",value:e,onClick:h(p=>n.getAttractions(e),["prevent"])},d(e),11,z)]))),128)),t("li",D,[t("a",{class:g(["page-link page-link-radius",{disabled:!a.currentPage||a.currentPage===a.pageTotal}]),href:"",onClick:s[1]||(s[1]=h(e=>n.getAttractions(a.currentPage+1),["prevent"]))},"下一頁",2)])])])],64)}const K=v(P,[["render",H]]);export{K as default};
