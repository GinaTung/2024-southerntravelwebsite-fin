import{_ as g,c as l,a as e,b as t,w as o,q as _,F as m,r as i,o as n,d as r}from"./index-sCrQA2qA.js";const d="https://ec-course-api.hexschool.io/v2",v={data(){return{user:{username:"",password:""},userIsLoggedIn:!1}},methods:{checkAdmin(){this.axios.post(`${d}/api/user/check`).then(s=>{this.userIsLoggedIn=!0}).catch(s=>{this.userIsLoggedIn=!1})},logout(){this.axios.post(`${d}/logout`).then(s=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(s=>{alert(`${s.message}`)})}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s,this.checkAdmin()}},b={class:"navbar navbar-expand-lg navbar-light bg-light"},k={class:"container"},f=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1),x={class:"collapse navbar-collapse",id:"navbarSupportedContent"},I={class:"navbar-nav ms-auto mb-2 mb-lg-0"},$={class:"nav-item"},w={class:"nav-item"};function C(s,c,V,L,u,h){const a=i("router-link"),p=i("RouterView");return n(),l(m,null,[e("nav",b,[e("div",k,[t(a,{to:"/admin",class:"navbar-brand"},{default:o(()=>[r("後台管理")]),_:1}),f,e("div",x,[e("ul",I,[e("li",$,[t(a,{to:"/",class:"nav-link"},{default:o(()=>[r("回前台")]),_:1})]),e("li",w,[u.userIsLoggedIn===!1?(n(),_(a,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:o(()=>[r("管理者登入")]),_:1})):(n(),l("a",{key:1,class:"nav-link",type:"button",onClick:c[0]||(c[0]=y=>h.logout())},"登出"))])])])])]),t(p)],64)}const T=g(v,[["render",C]]);export{T as default};
