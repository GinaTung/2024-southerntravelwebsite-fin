import{_ as b,c as e,a as t,F as d,s as m,o,t as a}from"./index-u7Uj2myl.js";const n="https://ec-course-api.hexschool.io/v2",u="yuling2023",p={data(){return{products:[],tempProduct:{imagesUrl:[]},pages:{},modalProduct:null,modelDel:null,isNew:!1,ratingId:0,score:0,tempRating:{}}},methods:{checkAdmin(){this.axios.post(`${n}/api/user/check`).then(s=>{this.getProducts()}).catch(s=>{alert("目前未登入狀態，請重新登入"),this.$router.push({path:"/admin/adminlogin"})})},getProducts(){this.axios.get(`${n}/api/${u}/admin/products/all`).then(s=>{console.log(s),this.products=s.data.products}).catch(s=>{alert(`${err.data.message}`)})},openModal(){this.modalProduct.show()}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s,this.checkAdmin(),console.log(this.$refs),this.myModal=new bootstrap.Modal(this.$refs.productModal)}},h={class:"container"},f=t("h1",null,"產品管理",-1),_=t("div",{class:"text-end mt-4"},[t("button",{class:"btn btn-primary",id:"addModalBtn"},"建立新的產品")],-1),v={class:"table mt-4"},y=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120",class:"text-end"},"原價"),t("th",{width:"120",class:"text-end"},"售價"),t("th",{width:"100"},"是否啟用"),t("th",{width:"120"},"編輯")])],-1),g={class:"text-end"},x={class:"text-end"},k={key:0,class:"text-success"},w={key:1},$={class:"btn-group"},M=t("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ",-1),P={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},A=t("div",{class:"modal-dialog modal-xl"},[t("div",{class:"modal-content border-0"},[t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"productModalLabel",class:"modal-title"},[t("span",null,"新增產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",{class:"modal-body"},[t("div",{class:"row"},[t("div",{class:"col-sm-4"},[t("div",{class:"mb-2"},[t("div",{class:"mb-3"},[t("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址"),t("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結"})]),t("img",{class:"img-fluid",src:"",alt:""})]),t("div",null,[t("button",{class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")]),t("div",null,[t("button",{class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 ")])]),t("div",{class:"col-sm-8"},[t("div",{class:"mb-3"},[t("label",{for:"title",class:"form-label"},"標題"),t("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題"})]),t("div",{class:"row"},[t("div",{class:"mb-3 col-md-6"},[t("label",{for:"category",class:"form-label"},"分類"),t("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類"})]),t("div",{class:"mb-3 col-md-6"},[t("label",{for:"price",class:"form-label"},"單位"),t("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位"})])]),t("div",{class:"row"},[t("div",{class:"mb-3 col-md-6"},[t("label",{for:"origin_price",class:"form-label"},"原價"),t("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"})]),t("div",{class:"mb-3 col-md-6"},[t("label",{for:"price",class:"form-label"},"售價"),t("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"})])]),t("hr"),t("div",{class:"mb-3"},[t("label",{for:"description",class:"form-label"},"產品描述"),t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述"},`\r
                    `)]),t("div",{class:"mb-3"},[t("label",{for:"content",class:"form-label"},"說明內容"),t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容"},`\r
                    `)]),t("div",{class:"mb-3"},[t("div",{class:"form-check"},[t("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0}),t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用")])])])])]),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 "),t("button",{type:"button",class:"btn btn-primary"}," 確認 ")])])],-1),B=[A];function L(s,c,C,D,i,r){return o(),e(d,null,[t("div",h,[f,_,t("table",v,[y,t("tbody",null,[(o(!0),e(d,null,m(i.products,l=>(o(),e("tr",{key:l.id},[t("td",null,a(l.category),1),t("td",null,a(l.title),1),t("td",g,a(l.origin_price),1),t("td",x,a(l.price),1),t("td",null,[l.is_enabled?(o(),e("span",k,"啟用")):(o(),e("span",w,"未啟用"))]),t("td",null,[t("div",$,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:c[0]||(c[0]=F=>r.openModal())}," 編輯 "),M])])]))),128))])])]),t("div",P,B,512)],64)}const U=b(p,[["render",L]]);export{U as default};
