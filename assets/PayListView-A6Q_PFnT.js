import{C as f}from"./collapse-Haav5gII.js";import{_ as x,c as i,a as e,d,x as a,f as n,v as m,b,w as _,E as g,A as y,e as v,r as O,o as r}from"./index-AtYEbNVE.js";const h="https://two024-south-json-server-vercel.onrender.com",k={data(){return{text:123,cartId:0,cart:[],isOpen:!1,isOrderOpen:!1,headerCollapse:{},products:[],product:{},cartTotal:0,shoppingData:[],user:{payMethod:"creditCard"}}},watch:{$route(){this.headerCollapse.hide(),this.orderCollapse.hide()}},methods:{backPage(){this.$router.go(-1)},toggleOpen(){this.isOpen=!this.isOpen},toggleOpenOrder(){this.isOrderOpen=!this.isOrderOpen},getProducts(){this.axios.get(`${h}/products`).then(t=>{this.products=t.data,this.products.forEach(o=>{o.id===this.cart.data.product_id&&(this.product=o)})}).catch(t=>{console.log(t)})},getCart(){this.axios.get(`${h}/carts`).then(t=>{this.cart=t.data,this.cart.forEach(o=>{o.id===this.cartId&&(this.cart=o)}),this.cartTotal=this.cart.data.total}).catch(t=>{console.log(t)})},getCookie(t){const p=`; ${document.cookie}`.split(`; ${t}=`);if(p.length===2)return p.pop().split(";").shift()},getOrderData(){this.axios.get(`${h}/order?user.cartId=${this.cartId}`).then(t=>{this.shoppingData=t.data[0].user}).catch(t=>{console.log(t)})},thousand(t){return t!==void 0&&(t=t.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${t}`}},mounted(){this.cartId=this.getCookie("cartId")*1,document.cookie?this.getCart():alert("目前購物車無資料，請加入預約行程"),this.getProducts(),this.getOrderData(),this.headerCollapse=new f(this.$refs.headerCollapse,{toggle:!1}),this.orderCollapse=new f(this.$refs.orderCollapse,{toggle:!1})}},w={class:"container py-10 py-lg-30"},C=v('<div class="row"><div class="col-md-6 mx-auto pb-5 pb-lg-15"><ol class="pay-list mt-5 d-flex justify-content-between list-unstyled pe-0 position-relative"><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center number-active mb-0"> 1 </p><p class="fw-bold mb-0">確認行程</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0 number-active"> 2 </p><p class="fw-bold mb-0">訂單資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0 number-active"> 3 </p><p class="fw-bold mb-0">付款資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0">4</p><p class="fw-bold mb-0">訂單完成</p></li></ol></div></div>',1),D={class:"mb-4"},M={class:"d-grid gap-2"},V=e("br",null,null,-1),j={key:0,class:"bi bi-chevron-down"},E={key:1,class:"bi bi-chevron-up"},P={class:"collapse",id:"collapseExample",ref:"headerCollapse"},R={class:"card card-body rounded-0"},I={class:"row p-10"},T={class:"col-12 col-md-4"},N=["src","alt"],B={class:"col-12 col-md-8"},L={class:"mb-4"},S={class:"mb-4"},A={class:"mb-4"},U={class:"mb-4"},q={class:"d-grid gap-2"},F={key:0,class:"bi bi-chevron-down"},z={key:1,class:"bi bi-chevron-up"},G={class:"collapse",id:"collapseOrder",ref:"orderCollapse"},H={class:"card card-body rounded-0"},J={class:"row p-10"},K={class:"col-12 col-md-5"},Q={class:"col-12 col-md-7"},W={class:"row"},X={class:"col-12 col-md-6 mb-4"},Y=e("h3",{class:"mb-4"},"付款方式",-1),Z={class:"mb-4 d-flex"},$={class:"form-check me-4"},ee=e("label",{class:"form-check-label",for:"flexRadioDefault1"}," 貨到付款",-1),se={class:"form-check"},te=e("label",{class:"form-check-label",for:"flexRadioDefault2"}," 信用卡 ",-1),oe={key:0},le=v('<label for="floatingAddress" class="fs-5 mb-4">信用卡卡號</label><div class="row g-3 d-flex mb-4"><div class="col-3 d-flex"><input type="text" class="form-control rounded-1" placeholder="4622" id="floatingAddress" aria-label="First name"></div><div class="col-3 d-flex"><input type="text" class="form-control rounded-1" placeholder="2223" aria-label="Last name"></div><div class="col-3 d-flex"><input type="text" class="form-control rounded-1" placeholder="3323" aria-label="Last name"></div><div class="col-3"><input type="text" class="form-control rounded-1" placeholder="3231" aria-label="Last name"></div></div><div class="mb-4"><label for="floatingDate" class="fs-5 mb-4">信用卡有效月年</label><input type="month" class="form-control rounded-1" id="floatingDate" placeholder="03/2024"></div><div class="mb-4"><label for="floatingDate" class="fs-5 mb-4">信用卡背後末三碼</label><input type="number" class="form-control rounded-1" id="floatingDate" placeholder="123"></div>',4),ae=[le],ce={class:"d-flex justify-content-between"},ie={class:"w-25"},re={class:"w-25"};function de(t,o,p,ne,s,c){const u=O("router-link");return r(),i("div",w,[C,e("div",D,[e("p",M,[e("button",{class:"btn btn-primary-600 border-top",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample",onClick:o[0]||(o[0]=(...l)=>c.toggleOpen&&c.toggleOpen(...l))},[d(" 總計："+a(s.cartTotal)+"元",1),V,d("購買清單 "),s.isOpen===!1?(r(),i("i",j)):(r(),i("i",E))])]),n(e("div",P,[e("div",R,[e("div",I,[e("div",T,[e("img",{src:s.product.imageUrl,alt:s.product.title,class:"img-fluid h-100"},null,8,N)]),e("div",B,[e("h3",L,"套裝行程名稱："+a(s.product.title),1),e("h3",S,"單價："+a(c.thousand(s.product.price)),1),e("h3",A,"總計："+a(c.thousand(s.cartTotal)),1),b(u,{to:{path:"/TouristPackage/"+s.product.category+"/"+s.product.title},class:"btn-square px-2 px-md-3 w-50",type:"button"},{default:_(()=>[d("查看更多")]),_:1},8,["to"])])])])],512),[[m,s.isOpen]])]),e("div",U,[e("p",q,[e("button",{class:"btn btn-primary-600 border-top",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOrder","aria-expanded":"false","aria-controls":"collapseOrder",onClick:o[1]||(o[1]=(...l)=>c.toggleOpenOrder&&c.toggleOpenOrder(...l))},[d(" 訂單及運送資料 "),s.isOrderOpen===!1?(r(),i("i",F)):(r(),i("i",z))])]),n(e("div",G,[e("div",H,[e("div",J,[e("div",K,[e("h5",null,"收件人名字："+a(s.shoppingData.name),1),e("h5",null,"收件人電話："+a(s.shoppingData.tel),1),e("h5",null,"備註："+a(s.shoppingData.comment),1)]),e("div",Q,[e("h5",null,"收件人地址："+a(s.shoppingData.address),1),e("h5",null,"運送方式："+a(s.shoppingData.shippingMethod),1)])])])],512),[[m,s.isOrderOpen]])]),e("div",W,[e("div",X,[Y,e("div",Z,[e("div",$,[n(e("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1","onUpdate:modelValue":o[2]||(o[2]=l=>s.user.payMethod=l)},null,512),[[g,s.user.payMethod]]),ee]),e("div",se,[n(e("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2","onUpdate:modelValue":o[3]||(o[3]=l=>s.user.payMethod=l),checked:""},null,512),[[g,s.user.payMethod]]),te])]),s.user.payMethod==="creditCard"?(r(),i("div",oe,ae)):y("",!0)])]),e("div",ce,[e("div",ie,[e("a",{class:"btn-cerulean w-100 fs-5 mt-4 me-1",onClick:o[4]||(o[4]=(...l)=>c.backPage&&c.backPage(...l)),type:"button"},"上一步")]),e("div",re,[b(u,{class:"btn-square mt-4 fs-5 w-100",type:"button",to:"/cart/orderDone"},{default:_(()=>[d("下一步")]),_:1})])])])}const ue=x(k,[["render",de]]);export{ue as default};
