import{M as g}from"./modal-WWUKxDhE.js";import{_ as y,o as d,c as r,a as e,t as i,F as h,h as p,n as x,d as _,k}from"./index-4Io-dHTH.js";const v="https://two024-south-json-server-vercel.onrender.com",w={props:{userCart:{type:Object,default(){return{}}},productId:{type:String,required:!0},productTitle:{type:String,required:!0}},data(){return{modal:"",qty:1,newProductsContent:"",enabledProducts:[]}},mounted(){this.modal=new g(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{getCookie(o){const t=document.cookie.split(";");for(let s of t){const[c,l]=s.trim().split("=");if(c===o)return l}return null},openModal(){this.modal.show(),this.getProducts()},hideModal(){this.modal.hide()},getProducts(){this.enabledProducts=[],this.axios.get(`${v}/products`).then(o=>{const t=o.data.filter(s=>s.is_enabled===1&&s.title===this.productTitle);this.enabledProducts.push(...t),this.getNewText()}).catch(o=>{sweetAlert.threeLayerCheckType("error","取得旅遊方案資料失敗")})},getNewText(){const o={};this.enabledProducts.forEach((t,s)=>{t.content&&t.content.split(";").forEach(l=>{const u=l.trim();u!==""&&(o[t.id]||(o[t.id]=[]),o[t.id].push(u))})});for(const t in o)o[t].length===0&&delete o[t];this.newProductsContent=Object.entries(o).map(([t,s])=>({id:t,content:s}))}}},C={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},P={class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document"},T={class:"modal-content border-0"},M={class:"modal-header bg-dark text-white"},j={class:"modal-title",id:"exampleModalLabel"},N=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),L={class:"modal-body"},q={key:0},B={class:"col-12 mb-4"},E=["src"],I={class:"col-12"},S={class:"badge bg-primary rounded-pill mb-4 px-4 py-2"},U=e("p",{style:{"text-align":"justify"}},"旅遊方案行程：",-1),V=e("br",null,null,-1),$={style:{"text-align":"justify"}},D=e("br",null,null,-1);function F(o,t,s,c,l,u){return d(),r("div",C,[e("div",P,[e("div",T,[e("div",M,[e("h5",j,[e("span",null,i(s.productTitle),1)]),N]),e("div",L,[(d(!0),r(h,null,p(s.userCart,a=>(d(),r("div",{class:"row",key:a.id},[a.product.id===this.productId?(d(),r("div",q,[e("div",B,[e("img",{class:"img-fluid rounded-2 h-75",src:a.product.imageUrl,alt:"item.title"},null,8,E)]),e("div",I,[e("span",S,i(a.product.category),1),U,(d(!0),r(h,null,p(l.newProductsContent,(m,b)=>(d(),r("div",{key:b+123},[(d(!0),r(h,null,p(m.content,(f,n)=>(d(),r("p",{key:n,class:x({"mb-3":n===2,"ps-10":n!==0&&n!==3})},i(f),3))),128))]))),128)),V,e("p",$,[_(" 旅遊方案描述： "),D,_(i(a.product.description),1)])])])):k("",!0)]))),128))])])])],512)}const A=y(w,[["render",F]]);export{A as U};
