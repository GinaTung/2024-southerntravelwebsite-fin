import{_ as g,a as l,b as e,d as a,w as o,u as m,F as _,r as c,o as n,e as r}from"./index-3YyzOM4j.js";const d="https://ec-course-api.hexschool.io/v2",v={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{checkAdmin(){this.$emitter.on("loginCheck",t=>{this.userIsLoggedIn=t}),this.token&&this.axios.post(`${d}/api/user/check`).then(t=>{this.userIsLoggedIn=!0}).catch(t=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/AdminHome"})})},logout(){this.axios.post(`${d}/logout`).then(t=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(t=>{alert("管理者身分登出失敗，請稍後再點選登出按鈕")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkAdmin()}},b={class:"navbar navbar-expand-lg navbar-light bg-light"},k={class:"container"},f=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1),x={class:"collapse navbar-collapse",id:"navbarSupportedContent"},I={class:"navbar-nav ms-auto mb-2 mb-lg-0"},$={class:"nav-item"},C={class:"nav-item"};function w(t,i,L,V,u,h){const s=c("router-link"),p=c("RouterView");return n(),l(_,null,[e("nav",b,[e("div",k,[a(s,{to:"/admin/adminHome",class:"navbar-brand"},{default:o(()=>[r("後台管理")]),_:1}),f,e("div",x,[e("ul",I,[e("li",$,[a(s,{to:"/",class:"nav-link"},{default:o(()=>[r("回前台")]),_:1})]),e("li",C,[u.userIsLoggedIn===!1?(n(),m(s,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:o(()=>[r("管理者登入")]),_:1})):(n(),l("a",{key:1,class:"nav-link",type:"button",onClick:i[0]||(i[0]=y=>h.logout())},"登出"))])])])])]),a(p)],64)}const B=g(v,[["render",w]]);export{B as default};
