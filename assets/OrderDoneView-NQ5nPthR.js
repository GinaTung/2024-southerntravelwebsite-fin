import{C as u}from"./collapse-hRbz8PhC.js";import{_ as f,c as a,a as s,d as r,t as c,f as _,v as b,b as m,w as g,e as v,r as x,o as n}from"./index-i9-H0rYw.js";const p="https://two024-south-json-server-vercel.onrender.com",O={data(){return{text:123,cartId:0,cart:[],isOpen:!0,isOrderOpen:!0,headerCollapse:{},products:[],product:{},cartTotal:0,shoppingData:[],user:{payMethod:"creditCard"},product_id:""}},watch:{$route(){this.headerCollapse.hide(),this.orderCollapse.hide()}},methods:{backPage(){this.$router.go(-1)},toggleOpen(){this.isOpen=!this.isOpen},toggleOpenOrder(){this.isOrderOpen=!this.isOrderOpen},getProducts(){this.axios.get(`${p}/products`).then(t=>{this.products=t.data,this.products.forEach(o=>{o.id===this.cart.data.product_id&&(this.product=o)}),this.product_id=this.cart.data.product_id}).catch(t=>{console.log(t)})},getCart(){this.axios.get(`${p}/carts`).then(t=>{this.cart=t.data,this.cart.forEach(o=>{o.id===this.cartId&&(this.cart=o)}),this.cartTotal=this.cart.data.total}).catch(t=>{console.log(t)})},getCookie(t){const d=`; ${document.cookie}`.split(`; ${t}=`);if(d.length===2)return d.pop().split(";").shift()},getOrderData(){this.axios.get(`${p}/order?user.cartId=${this.cartId}`).then(t=>{this.shoppingData=t.data[0].user}).catch(t=>{console.log(t)})},thousand(t){return t!==void 0&&(t=t.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${t}`}},mounted(){this.cartId=this.getCookie("cartId")*1,document.cookie?this.getCart():alert("目前購物車無資料，請加入預約行程"),this.getProducts(),this.getOrderData(),this.headerCollapse=new u(this.$refs.headerCollapse,{toggle:!1}),this.orderCollapse=new u(this.$refs.orderCollapse,{toggle:!1})}},y={class:"container py-10 py-lg-30"},w=v('<div class="row"><div class="col-md-6 mx-auto pb-5 pb-lg-15"><ol class="pay-list mt-5 d-flex justify-content-between list-unstyled pe-0 position-relative"><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center number-active mb-0"> 1 </p><p class="fw-bold mb-0">確認行程</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0 number-active"> 2 </p><p class="fw-bold mb-0">訂單資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0 number-active"> 3 </p><p class="fw-bold mb-0">付款資料</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-0 number-active"> 4 </p><p class="fw-bold mb-0">訂單完成</p></li></ol></div></div><div class="text-center mb-10"><p class="fs-4"><i class="bi bi-check-circle-fill text-success"></i>感謝您！您的訂單已建立完成</p></div>',2),C={class:"row"},k={class:"mb-4 col-12 col-md-6"},D={class:"d-grid gap-2"},j=s("br",null,null,-1),E={key:0,class:"bi bi-chevron-down"},I={key:1,class:"bi bi-chevron-up"},P={class:"collapse show",id:"collapseExample",ref:"headerCollapse"},T={class:"card card-body rounded-0 order-h-size"},V={class:"row py-10"},B={class:"col-12 col-md-5"},N=["src","alt"],S={class:"col-12 col-md-7"},q={class:"mb-4 fs-5"},M={class:"mb-4 fs-5"},z={class:"mb-4 fs-5"},U={class:"mb-4 col-12 col-md-6"},A={class:"d-grid gap-2"},F=s("br",null,null,-1),G={key:0,class:"bi bi-chevron-down"},H={key:1,class:"bi bi-chevron-up"},J={class:"collapse show",id:"collapseOrder",ref:"orderCollapse"},K={class:"card card-body rounded-0",style:{height:"300px"}},L={class:"row py-10"},Q={class:"col-12 col-md-7"},R={class:"mb-4"},W={class:"mb-4"},X={class:"mb-4"},Y={class:"col-12 col-md-5"},Z={class:"mb-4"},$={class:"mb-4"},ss={class:"d-flex justify-content-between"},ts={class:"w-25"},es={class:"w-25"};function os(t,o,d,cs,e,l){const h=x("router-link");return n(),a("div",y,[w,s("div",C,[s("div",k,[s("p",D,[s("button",{class:"btn btn-primary-600 border-top",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseExample","aria-expanded":"true","aria-controls":"collapseExample",onClick:o[0]||(o[0]=(...i)=>l.toggleOpen&&l.toggleOpen(...i))},[r(" 總計："+c(e.cartTotal)+"元",1),j,r("購買清單 "),e.isOpen===!1?(n(),a("i",E)):(n(),a("i",I))])]),_(s("div",P,[s("div",T,[s("div",V,[s("div",B,[s("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid h-100 pb-4"},null,8,N)]),s("div",S,[s("h3",q,"套裝行程名稱："+c(e.product.title),1),s("h3",M,"單價："+c(l.thousand(e.product.price)),1),s("h3",z,"總計："+c(l.thousand(e.cartTotal)),1),m(h,{to:{path:"/TouristPackage/"+e.product.category+"/"+e.product.title},class:"btn-square px-2 px-md-3 w-50",type:"button"},{default:g(()=>[r("查看更多")]),_:1},8,["to"])])])])],512),[[b,e.isOpen]])]),s("div",U,[s("p",A,[s("button",{class:"btn btn-primary-600 border-top",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOrder","aria-expanded":"true","aria-controls":"collapseOrder",onClick:o[1]||(o[1]=(...i)=>l.toggleOpenOrder&&l.toggleOpenOrder(...i))},[r(" 訂單及運送資料"),F,e.isOrderOpen===!1?(n(),a("i",G)):(n(),a("i",H))])]),_(s("div",J,[s("div",K,[s("div",L,[s("div",Q,[s("h5",R,"收件人名字："+c(e.shoppingData.name),1),s("h5",W,"收件人電話："+c(e.shoppingData.tel),1),s("h5",X,"備註："+c(e.shoppingData.comment),1)]),s("div",Y,[s("h5",Z,"收件人地址："+c(e.shoppingData.address),1),s("h5",$,"運送方式："+c(e.shoppingData.shippingMethod),1)])])])],512),[[b,e.isOrderOpen]])])]),s("div",ss,[s("div",ts,[s("a",{class:"btn-cerulean w-100 fs-5 mt-4 me-1",onClick:o[2]||(o[2]=(...i)=>l.backPage&&l.backPage(...i)),type:"button"},"上一步")]),s("div",es,[m(h,{class:"btn-square mt-4 fs-5 w-100",type:"button",to:"/"},{default:g(()=>[r("回首頁")]),_:1})])])])}const as=f(O,[["render",os]]);export{as as default};
