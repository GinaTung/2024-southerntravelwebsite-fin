import{s as c}from"./sweetAlert-d966lY_V.js";import{_ as m,c as l,a as e,b as a,w as o,g as _,F as v,r as d,o as n,d as r,p as k,i as b}from"./index-jtNltQR5.js";const h="https://ec-course-api.hexschool.io/v2",f={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{checkAdmin(){this.$emitter.on("loginCheck",t=>{this.userIsLoggedIn=t}),this.token&&this.axios.post(`${h}/api/user/check`).then(t=>{this.userIsLoggedIn=!0}).catch(()=>{this.userIsLoggedIn=!1,c.threeLayerCheckType("error","管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/AdminHome"})})},logout(){this.axios.post(`${h}/logout`).then(()=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(()=>{c.threeLayerCheckType("error","管理者身分登出失敗，請稍後再點選登出按鈕")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkAdmin()}},I=t=>(k("data-v-33ea2fee"),t=t(),b(),t),x={class:"navbar navbar-expand-lg navbar-light bg-light"},$={class:"container"},C=I(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),w={class:"collapse navbar-collapse",id:"navbarSupportedContent"},L={class:"navbar-nav ms-auto mb-2 mb-lg-0"},y={class:"nav-item"},S={class:"nav-item"};function T(t,i,V,A,p,u){const s=d("router-link"),g=d("RouterView");return n(),l(v,null,[e("nav",x,[e("div",$,[a(s,{to:"/admin/adminHome",class:"navbar-brand"},{default:o(()=>[r("後台管理")]),_:1}),C,e("div",w,[e("ul",L,[e("li",y,[a(s,{to:"/",class:"nav-link"},{default:o(()=>[r("回前台")]),_:1})]),e("li",S,[p.userIsLoggedIn===!1?(n(),_(s,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:o(()=>[r("管理者登入")]),_:1})):(n(),l("a",{key:1,class:"nav-link",onClick:i[0]||(i[0]=B=>u.logout())},"登出"))])])])])]),a(g)],64)}const H=m(f,[["render",T],["__scopeId","data-v-33ea2fee"]]);export{H as default};
