import{s as i}from"./sweetAlert-ealp2peD.js";import{_ as f,c as w,a as s,b as a,w as k,r as l,o as b,n as h,p as g,f as v}from"./index-YlG8QgH9.js";const V="https://ec-course-api.hexschool.io/v2",x={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{goHome(){this.$router.push("/")},checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token&&(i.threeLayerCheckType("warning","目前已為管理者身分登入，無需再次登入"),this.$router.push({path:"/admin/AdminHome"}))},login(){this.axios.post(`${V}/admin/signin`,this.user).then(o=>{i.threeLayerCheckType("success","管理者登入成功");const{expired:e,token:m}=o.data;document.cookie=`hexToken=${m}; expires=${new Date(e)}`,this.$router.push({name:"AdminHome"}),this.$emitter.emit("loginCheck",!0)}).catch(o=>{i.threeLayerCheckType("error","管理者登入失敗")})}},mounted(){window.scrollTo(0,0),setTimeout(()=>{this.checkAdmin()},1e3)}},d=o=>(g("data-v-e3164aad"),o=o(),v(),o),y={class:"container py-10 py-lg-30"},C={class:"row justify-content-center"},A={class:"col-md-6"},T=d(()=>s("h1",{class:"h3 mb-4 text-center"},"管理者登入",-1)),$={class:"form-floating mb-4"},I=d(()=>s("label",{for:"email"},"請輸入 Email",-1)),E={class:"form-floating mb-4"},L=d(()=>s("label",{for:"userpassword"},"請輸入Password",-1)),S={class:"mt-3"};function q(o,e,m,F,r,n){const c=l("VeeField"),u=l("ErrorMessage"),_=l("VeeForm");return b(),w("div",y,[s("div",C,[s("div",A,[T,a(_,{id:"form",ref:"form",onSubmit:n.login},{default:k(({errors:p})=>[s("div",$,[a(c,{type:"email",name:"email",class:h(["form-control",{"is-invalid":p.email}]),modelValue:r.user.username,"onUpdate:modelValue":e[0]||(e[0]=t=>r.user.username=t),id:"email",placeholder:"請輸入 Email",rules:"email|required",autocomplete:"useremail"},null,8,["modelValue","class"]),I,a(u,{name:"email",class:"invalid-feedback"})]),s("div",E,[a(c,{type:"password",class:h(["form-control",{"is-invalid":p.password}]),name:"password",id:"userpassword",placeholder:"請輸入Password",rules:"min:8|alpha_dash|required",autocomplete:"current-password",modelValue:r.user.password,"onUpdate:modelValue":e[1]||(e[1]=t=>r.user.password=t)},null,8,["class","modelValue"]),L,a(u,{name:"password",class:"invalid-feedback"})]),s("button",{class:"btn-turquoise w-100 mt-3 btn-rounded",onClick:e[2]||(e[2]=(...t)=>n.login&&n.login(...t))},"登入"),s("div",S,[s("button",{class:"btn-outline-turquoise mt-3 w-100 btn-rounded",type:"button",onClick:e[3]||(e[3]=t=>n.goHome())},"回前台")])]),_:1},8,["onSubmit"])])])])}const z=f(x,[["render",q],["__scopeId","data-v-e3164aad"]]);export{z as default};
