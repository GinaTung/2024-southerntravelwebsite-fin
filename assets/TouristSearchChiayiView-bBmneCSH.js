import{_ as f,a as r,u as d,F as h,o as i,b as e,v as l,x as m,d as x,w as k,e as y,r as b}from"./index-7ZqOGiyG.js";const u="https://two024-south-json-server-vercel.onrender.com",v={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${u}/api/users/${user}`).then(t=>{this.userIsLoggedIn=!0}).catch(t=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${u}/products`).then(t=>{this.products=t.data,this.products.forEach(s=>{s.is_enabled===1&&this.enabledProducts.push(s)}),this.getNewText()}).catch(t=>{alert(`${t.message}`)})},truncateContent(t,s){return t&&t.length>s?t.substring(0,s)+"...":t},getNewText(){const t={};this.products.forEach(s=>{s.description&&s.description.split(";").forEach(p=>{const o=p.trim();t[s.id]||(t[s.id]=[]),t[s.id].push(o)})}),this.newProductsDes=Object.entries(t).map(([s,c])=>({id:s,descriptions:c}))},searchProducts(){this.axios.get(`${u}/products?category=嘉義`).then(t=>{this.products=t.data,this.products.forEach(s=>{s.is_enabled===1&&this.searchChiayi.push(s)})}).catch(t=>{alert(`${t.message}`)})}},mounted(){this.searchProducts(),this.getProducts()}},$={class:"row g-0"},w={class:"col-md-4"},P={class:"tag text-white"},T={class:"card-att-img card-att-img-2 h-100"},C=["src","alt"],N=e("div",{class:"heart3"},[e("i",{class:"bi bi-heart heart-click","data-heartStatus":"false"})],-1),D={class:"col-md-8"},E={class:"card-body px-5"},V={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title-att mb-4"},S={key:0},B={class:"card-text card-text-position"};function j(t,s,c,p,o,A){const g=b("router-link");return i(!0),r(h,null,d(o.searchChiayi,a=>(i(),r("div",{class:"card mb-3 card-att",key:a.id},[e("div",$,[e("div",w,[e("span",P,l(a.category),1),e("div",T,[e("img",{src:a.imageUrl,class:"card-img-top img-fluid",alt:a.title},null,8,C)]),N]),e("div",D,[e("div",E,[e("h4",V,l(a.title),1),(i(!0),r(h,null,d(o.newProductsDes,n=>(i(),r("div",{key:n.id},[n.id===a.id?(i(),r("div",S,[(i(!0),r(h,null,d(n.descriptions,_=>(i(),r("p",{key:_},l(_),1))),128))])):m("",!0)]))),128)),e("p",B,[x(g,{to:{name:"TouristSinglePackage",params:{category:a.category,title:a.title}},class:"fs-5"},{default:k(()=>[y("more")]),_:2},1032,["to"])])])])])]))),128)}const L=f(v,[["render",j]]);export{L as default};
