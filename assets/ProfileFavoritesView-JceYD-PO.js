import{s as d}from"./sweetAlert-MtrGzx6C.js";import{_ as m,c as i,a as e,n as u,m as h,F as g,i as b,e as y,o as r,t as f,b as _,w as k,p as w,f as C,r as I}from"./index-QI08YDY8.js";const p="https://two024-south-json-server-vercel.onrender.com",D={data(){return{userId:"",token:"",heartData:[],heartCategory:"全部",isFavorite:{},isLoading:!1}},methods:{getHeartData(a="全部"){this.heartCategory=a,a==="全部"?this.axios.get(`${p}/hearts?userId=${this.userId}&tag=旅遊景點`).then(t=>{this.heartData=t.data,t.data.forEach(c=>{this.isFavorite[c.product]=!0,this.isLoading=!1})}).catch(t=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")}):this.axios.get(`${p}/hearts?category=${a}&userId=${this.userId}&tag=旅遊景點`).then(t=>{this.heartData=t.data,t.data.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(t=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(a,t,c,v){this.token?this.axios.get(`${p}/hearts?category=${t}&userId=${this.userId}&tag=旅遊景點`).then(o=>{const n=o.data.find(l=>l.product===a);n&&this.axios.delete(`${p}/hearts/${n.id}`).then(l=>{this.isFavorite[a]=!1,d.threeLayerCheckType("success",`取消收藏 ${c} 成功`),this.getHeartData()}).catch(l=>{d.threeLayerCheckType("error","取消收藏資料失敗")})}):d.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getCookie(a){const t=document.cookie.split(";");for(let c of t){const[v,o]=c.trim().split("=");if(v===a)return o}return null}},mounted(){window.scrollTo(0,0),this.isLoading=!0;const a=this.getCookie("userId"),t=this.getCookie("hexTokenU");this.userId=a*1,this.token=t,this.getHeartData()}},x=a=>(w("data-v-0c811b57"),a=a(),C(),a),F=x(()=>e("div",{class:"d-flex justify-content-center align-items-center w-100"},[e("span",{class:"line"}),e("h5",{class:"flex-grow-1 fs-6 fs-lg-5 text-center"},"南部旅遊景點"),e("span",{class:"line"})],-1)),L={class:"d-flex justify-content-center align-items-center my-5"},T={key:0,class:"row g-3 py-8"},j=y('<div class="card card-att h-100" data-v-0c811b57><span class="tag text-white" data-v-0c811b57></span><div class="heart" data-v-0c811b57><i class="bi bi-heart heart-click" data-heartStatus="false" data-v-0c811b57></i></div><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" data-v-0c811b57><div class="card-body placeholder-glow" data-v-0c811b57><span class="placeholder w-50 text-center" data-v-0c811b57></span></div></div>',1),$=[j],q={key:1,class:"row g-3 py-8"},S={key:0,class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},H=x(()=>e("h3",{class:"text-center"},"無收藏資料",-1)),U=[H],z={class:"card h-100"},V=["src"],B={class:"tag text-white"},E=["onClick"],N={class:"card-body"},P={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title stretched-link text-center"},A=y('<div class="d-flex justify-content-center align-items-center w-100" data-v-0c811b57><span class="line" data-v-0c811b57></span><h5 class="flex-grow-1 fs-6 fs-lg-5 text-center" data-v-0c811b57>南部旅遊方案</h5><span class="line" data-v-0c811b57></span></div><div class="d-flex justify-content-center align-items-center my-5" data-v-0c811b57><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-0c811b57> 全部 </button><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-0c811b57> 嘉義 </button><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-0c811b57> 台南 </button><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-0c811b57> 高雄 </button></div>',2),G={key:2,class:"row g-3 py-8"},M=y('<div class="card card-att h-100" data-v-0c811b57><span class="tag text-white" data-v-0c811b57></span><div class="heart" data-v-0c811b57><i class="bi bi-heart heart-click" data-heartStatus="false" data-v-0c811b57></i></div><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" data-v-0c811b57><div class="card-body placeholder-glow" data-v-0c811b57><span class="placeholder w-50 text-center" data-v-0c811b57></span></div></div>',1),J=[M],K={key:3,class:"row g-3 py-8"},O=x(()=>e("div",{class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},[e("h3",{class:"text-center"},"無收藏資料")],-1)),Q=[O];function R(a,t,c,v,o,n){const l=I("router-link");return r(),i(g,null,[F,e("div",L,[e("button",{type:"button",class:u(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="全部"}]),onClick:t[0]||(t[0]=h(s=>n.getHeartData("全部"),["prevent"]))}," 全部 ",2),e("button",{type:"button",class:u(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="嘉義"}]),onClick:t[1]||(t[1]=h(s=>n.getHeartData("嘉義"),["prevent"]))}," 嘉義 ",2),e("button",{type:"button",class:u(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="台南"}]),onClick:t[2]||(t[2]=h(s=>n.getHeartData("台南"),["prevent"]))}," 台南 ",2),e("button",{type:"button",class:u(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="高雄"}]),onClick:t[3]||(t[3]=h(s=>n.getHeartData("高雄"),["prevent"]))}," 高雄 ",2)]),o.isLoading?(r(),i("div",T,[(r(),i(g,null,b(3,s=>e("div",{key:s,class:"col-12 col-md-6 col-lg-4"},$)),64))])):(r(),i("div",q,[o.heartData.length===0?(r(),i("div",S,U)):(r(!0),i(g,{key:1},b(o.heartData,s=>(r(),i("div",{class:"col-12 col-md-6 col-lg-4",key:s.id},[e("div",z,[e("img",{src:s.imageUrl,class:"img-fluid h-100 card-radius",alt:"item.title"},null,8,V),e("span",B,f(s.category),1),e("button",{class:"heart border-0",onClick:W=>n.toggleFavorite(s.product,s.category,s.title,s.imageUrl),type:"button"},[e("i",{class:u(["bi",{"bi-heart-fill":o.isFavorite[s.product],"bi-heart":!o.isFavorite[s.product]}]),style:{"font-size":"24px"}},null,2)],8,E),e("div",N,[_(l,{to:{name:"TouristSingleAttraction",params:{category:s.category,title:s.title}}},{default:k(()=>[e("h4",P,f(s.title),1)]),_:2},1032,["to"])])])]))),128))])),A,o.isLoading?(r(),i("div",G,[(r(),i(g,null,b(3,s=>e("div",{key:s,class:"col-12 col-md-6 col-lg-4"},J)),64))])):(r(),i("div",K,Q))],64)}const Z=m(D,[["render",R],["__scopeId","data-v-0c811b57"]]);export{Z as default};
