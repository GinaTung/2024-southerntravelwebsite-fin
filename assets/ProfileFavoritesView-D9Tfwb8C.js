import{s as l}from"./sweetAlert-uqvRwuY4.js";import{_ as f,c as d,a as e,n as c,m as u,F as v,h as m,e as b,o as h,t as x,b as _,w as k,p as C,i as w,r as D}from"./index-UAeLte_V.js";const g="https://two024-south-json-server-vercel.onrender.com",I={data(){return{userId:"",token:"",heartData:[],heartCategory:"全部",isFavorite:{}}},methods:{getHeartData(a="全部"){this.heartCategory=a,a==="全部"?this.axios.get(`${g}/hearts?userId=${this.userId}&tag=旅遊景點`).then(t=>{this.heartData=t.data,t.data.forEach(o=>{this.isFavorite[o.product]=!0})}).catch(t=>{l.threeLayerCheckType("error","取得愛心收藏資料失敗")}):this.axios.get(`${g}/hearts?category=${a}&userId=${this.userId}&tag=旅遊景點`).then(t=>{this.heartData=t.data,t.data.forEach(o=>{this.isFavorite[o.product]=!0})}).catch(t=>{l.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(a,t,o,p){this.token?this.axios.get(`${g}/hearts?category=${t}&userId=${this.userId}&tag=旅遊景點`).then(r=>{const n=r.data.find(i=>i.product===a);n&&this.axios.delete(`${g}/hearts/${n.id}`).then(i=>{this.isFavorite[a]=!1,l.threeLayerCheckType("success",`取消收藏 ${o} 成功`),this.getHeartData()}).catch(i=>{l.threeLayerCheckType("error","取消收藏資料失敗")})}):l.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getCookie(a){const t=document.cookie.split(";");for(let o of t){const[p,r]=o.trim().split("=");if(p===a)return r}return null}},mounted(){const a=this.getCookie("userId"),t=this.getCookie("hexTokenU");this.userId=a*1,this.token=t,this.getHeartData()}},y=a=>(C("data-v-71483253"),a=a(),w(),a),F=y(()=>e("div",{class:"d-flex justify-content-center align-items-center w-100"},[e("span",{class:"line"}),e("h5",{class:"flex-grow-1 fs-6 fs-lg-5 text-center"},"南部旅遊景點"),e("span",{class:"line"})],-1)),$={class:"d-flex justify-content-center align-items-center my-5"},q={class:"row g-3 py-8"},T={key:0,class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},j=y(()=>e("h3",{class:"text-center"},"無收藏資料",-1)),H=[j],L={class:"card h-100"},S=["src"],U={class:"tag text-white"},V=["onClick"],B={class:"card-body"},E={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title stretched-link text-center"},N=b('<div class="d-flex justify-content-center align-items-center w-100" data-v-71483253><span class="line" data-v-71483253></span><h5 class="flex-grow-1 fs-6 fs-lg-5 text-center" data-v-71483253>南部旅遊方案</h5><span class="line" data-v-71483253></span></div><div class="d-flex justify-content-center align-items-center my-5" data-v-71483253><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-71483253> 全部 </button><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-71483253> 嘉義 </button><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-71483253> 台南 </button><button type="button" class="btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1" data-v-71483253> 高雄 </button></div><div class="row g-3 py-8" data-v-71483253><div class="col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1" style="height:260px;" data-v-71483253><h3 class="text-center" data-v-71483253>無收藏資料</h3></div></div>',3);function z(a,t,o,p,r,n){const i=D("router-link");return h(),d(v,null,[F,e("div",$,[e("button",{type:"button",class:c(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="全部"}]),onClick:t[0]||(t[0]=u(s=>n.getHeartData("全部"),["prevent"]))}," 全部 ",2),e("button",{type:"button",class:c(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="嘉義"}]),onClick:t[1]||(t[1]=u(s=>n.getHeartData("嘉義"),["prevent"]))}," 嘉義 ",2),e("button",{type:"button",class:c(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="台南"}]),onClick:t[2]||(t[2]=u(s=>n.getHeartData("台南"),["prevent"]))}," 台南 ",2),e("button",{type:"button",class:c(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory==="高雄"}]),onClick:t[3]||(t[3]=u(s=>n.getHeartData("高雄"),["prevent"]))}," 高雄 ",2)]),e("div",q,[r.heartData.length===0?(h(),d("div",T,H)):(h(!0),d(v,{key:1},m(r.heartData,s=>(h(),d("div",{class:"col-12 col-md-6 col-lg-4",key:s.id},[e("div",L,[e("img",{src:s.imageUrl,class:"img-fluid h-100 card-radius",alt:"item.title"},null,8,S),e("span",U,x(s.category),1),e("button",{class:"heart border-0",onClick:A=>n.toggleFavorite(s.product,s.category,s.title,s.imageUrl),type:"button"},[e("i",{class:c(["bi",{"bi-heart-fill":r.isFavorite[s.product],"bi-heart":!r.isFavorite[s.product]}]),style:{"font-size":"24px"}},null,2)],8,V),e("div",B,[_(i,{to:{name:"TouristSingleAttraction",params:{category:s.category,title:s.title}}},{default:k(()=>[e("h4",E,x(s.title),1)]),_:2},1032,["to"])])])]))),128))]),N],64)}const G=f(I,[["render",z],["__scopeId","data-v-71483253"]]);export{G as default};
