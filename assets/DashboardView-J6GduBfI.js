import{s as c}from"./sweetAlert-ve4DQ4kY.js";import{_ as m,c as l,a as e,b as a,w as o,g as _,F as k,r as d,o as n,d as r}from"./index-CcCT7g7O.js";const h="https://ec-course-api.hexschool.io/v2",v={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{checkAdmin(){this.$emitter.on("loginCheck",t=>{this.userIsLoggedIn=t}),this.token&&this.axios.post(`${h}/api/user/check`).then(t=>{this.userIsLoggedIn=!0}).catch(()=>{this.userIsLoggedIn=!1,c.threeLayerCheckType("error","管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/AdminHome"})})},logout(){this.axios.post(`${h}/logout`).then(()=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(()=>{c.threeLayerCheckType("error","管理者身分登出失敗，請稍後再點選登出按鈕")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkAdmin()}},b={class:"navbar navbar-expand-lg navbar-light bg-light"},f={class:"container"},x=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1),I={class:"collapse navbar-collapse",id:"navbarSupportedContent"},$={class:"navbar-nav ms-auto mb-2 mb-lg-0"},C={class:"nav-item"},L={class:"nav-item"};function w(t,i,y,T,u,p){const s=d("router-link"),g=d("RouterView");return n(),l(k,null,[e("nav",b,[e("div",f,[a(s,{to:"/admin/adminHome",class:"navbar-brand"},{default:o(()=>[r("後台管理")]),_:1}),x,e("div",I,[e("ul",$,[e("li",C,[a(s,{to:"/",class:"nav-link"},{default:o(()=>[r("回前台")]),_:1})]),e("li",L,[u.userIsLoggedIn===!1?(n(),_(s,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:o(()=>[r("管理者登入")]),_:1})):(n(),l("a",{key:1,class:"nav-link",onClick:i[0]||(i[0]=V=>p.logout())},"登出"))])])])])]),a(g)],64)}const N=m(v,[["render",w]]);export{N as default};
