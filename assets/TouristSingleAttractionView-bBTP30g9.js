import{g as q,i as H,e as G,S as J,a as K,N as Q}from"./navigation-leeYaaYG.js";import{f as R,L as W}from"./LikeBlock-G_zSsD0X.js";import{M as X}from"./modal-IeYf3G6B.js";import{s as _}from"./sweetAlert-puKBlb7F.js";import{_ as D,l as Y,o,c as l,b as T,w as I,F as v,h as y,g as j,a as t,r as S,p as U,f as V,j as E,m as O,t as x,n as Z,d as B,k as F,e as N}from"./index-bTnw3Wno.js";import{B as ee}from"./BannerBlock-cfBOGLo6.js";import"./selector-engine-xTuJPB98.js";function te(a){let{swiper:e,extendParams:p,on:c}=a;p({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let i=!1,m=!1;e.thumbs={swiper:null};function u(){const r=e.thumbs.swiper;if(!r||r.destroyed)return;const s=r.clickedIndex,f=r.clickedSlide;if(f&&f.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof s>"u"||s===null)return;let n;r.params.loop?n=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10):n=s,e.params.loop?e.slideToLoop(n):e.slideTo(n)}function w(){const{thumbs:r}=e.params;if(i)return!1;i=!0;const s=e.constructor;if(r.swiper instanceof s)e.thumbs.swiper=r.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(H(r.swiper)){const f=Object.assign({},r.swiper);Object.assign(f,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new s(f),m=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",u),!0}function g(r){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const f=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():s.params.slidesPerView;let n=1;const d=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(n=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),s.slides.forEach(b=>b.classList.remove(d)),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let b=0;b<n;b+=1)G(s.slidesEl,`[data-swiper-slide-index="${e.realIndex+b}"]`).forEach(h=>{h.classList.add(d)});else for(let b=0;b<n;b+=1)s.slides[e.realIndex+b]&&s.slides[e.realIndex+b].classList.add(d);const k=e.params.thumbs.autoScrollOffset,L=k&&!s.params.loop;if(e.realIndex!==s.realIndex||L){const b=s.activeIndex;let h,M;if(s.params.loop){const $=s.slides.filter(z=>z.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];h=s.slides.indexOf($),M=e.activeIndex>e.previousIndex?"next":"prev"}else h=e.realIndex,M=h>e.previousIndex?"next":"prev";L&&(h+=M==="next"?k:-1*k),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(h)<0&&(s.params.centeredSlides?h>b?h=h-Math.floor(f/2)+1:h=h+Math.floor(f/2)-1:h>b&&s.params.slidesPerGroup,s.slideTo(h,r?0:void 0))}}c("beforeInit",()=>{const{thumbs:r}=e.params;if(!(!r||!r.swiper))if(typeof r.swiper=="string"||r.swiper instanceof HTMLElement){const s=q(),f=()=>{const d=typeof r.swiper=="string"?s.querySelector(r.swiper):r.swiper;if(d&&d.swiper)r.swiper=d.swiper,w(),g(!0);else if(d){const k=L=>{r.swiper=L.detail[0],d.removeEventListener("init",k),w(),g(!0),r.swiper.update(),e.update()};d.addEventListener("init",k)}return d},n=()=>{if(e.destroyed)return;f()||requestAnimationFrame(n)};requestAnimationFrame(n)}else w(),g(!0)}),c("slideChange update resize observerUpdate",()=>{g()}),c("setTransition",(r,s)=>{const f=e.thumbs.swiper;!f||f.destroyed||f.setTransition(s)}),c("beforeDestroy",()=>{const r=e.thumbs.swiper;!r||r.destroyed||m&&r.destroy()}),Object.assign(e.thumbs,{init:w,update:g})}const se="https://two024-south-json-server-vercel.onrender.com",ae={components:{Swiper:J,SwiperSlide:K},data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],imagesUrl:"",showModal:!1,modalImageFilePath:"",modalImageIndex:0,bigModal:null}},methods:{openModal(a,e){this.bigModal.show(),this.modalImageFilePath=a,this.modalImageIndex=e,this.showModal=!0},getAttractions(){this.axios.get(`${se}/attractions`).then(a=>{this.attractions=a.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&this.enabledAttractions.push(e)}),this.imagesUrl=this.enabledAttractions[0].imagesUrl}).catch(a=>{_.threeLayerCheckType("error","取得景點資料失敗")})}},setup(){const a=Y(null);return{thumbsSwiper:a,setThumbsSwiper:p=>{a.value=p},modules:[R,Q,te]}},mounted(){this.bigModal=new X(this.$refs.bigModal,{keyboard:!1,backdrop:"static"}),this.attractionTitle=this.$route.params.title,this.getAttractions()}},P=a=>(U("data-v-1ea3f35b"),a=a(),V(),a),ie=["src"],re=["onClick"],oe=P(()=>t("i",{class:"bi bi-zoom-in fs-2"},null,-1)),ne=[oe],le=P(()=>t("button",{class:"swiper-button-next border-0 bg-transparent"},null,-1)),ce=P(()=>t("button",{class:"swiper-button-prev border-0 bg-transparent"},null,-1)),de=["src"],pe={class:"modal fade",id:"bigModal",tabindex:"-1","aria-labelledby":"bigModalLabel","aria-hidden":"true",ref:"bigModal"},fe={class:"modal-dialog modal-dialog-centered modal-xl"},ue={class:"modal-content bg-transparent"},he={class:"modal-body p-0"},me=["src"],be=P(()=>t("button",{type:"button",class:"border-0 bg-transparent position-absolute top-3 end-3 p-3","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"bi bi-x-lg text-secondary-400 fs-3"})],-1));function ge(a,e,p,c,i,m){const u=S("swiper-slide"),w=S("swiper");return o(),l(v,null,[T(w,{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:c.thumbsSwiper},modules:c.modules,class:"mySwiper2"},{default:I(()=>[(o(!0),l(v,null,y(i.imagesUrl,(g,r)=>(o(),j(u,{key:r+123},{default:I(()=>[t("img",{src:g,class:"img-fluid"},null,8,ie),t("button",{class:"position-absolute text-white end-5 bottom-5 fs-4 bg-transparent border-0",onClick:s=>m.openModal(g,r)},ne,8,re)]),_:2},1024))),128)),le,ce]),_:1},8,["navigation","thumbs","modules"]),T(w,{onSwiper:c.setThumbsSwiper,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:c.modules,class:"mySwiper3"},{default:I(()=>[(o(!0),l(v,null,y(i.imagesUrl,(g,r)=>(o(),j(u,{key:r+123},{default:I(()=>[t("img",{src:g,class:"img-fluid"},null,8,de)]),_:2},1024))),128))]),_:1},8,["onSwiper","modules"]),t("div",pe,[t("div",fe,[t("div",ue,[t("div",he,[t("img",{src:i.modalImageFilePath,class:"modal-content position-relative"},null,8,me),be])])])],512)],64)}const ve=D(ae,[["render",ge],["__scopeId","data-v-1ea3f35b"]]),A="https://two024-south-json-server-vercel.onrender.com",we={components:{singleAttraction:ve,BannerBlock:ee,LikeBlock:W},data(){return{category:"",attractionTitle:"",attractions:[],enabledAttractions:[],newAttractionsContent:"",newAttractionsTimeOpen:"",attractionId:"",heartData:[],isFavorite:{},userId:"",token:"",isLoading:!1,attractionImageUrl:""}},methods:{redirectToA(a){this.$router.push({path:"/TouristAttractions",query:{category:a}})},getHeartData(){this.axios.get(`${A}/hearts`).then(a=>{a.data.forEach(e=>{e.userId===this.userId&&e.tag==="旅遊景點"&&(this.isFavorite[e.product]=!0)})}).catch(a=>{_.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(a,e,p,c){this.token?this.axios.get(`${A}/hearts`).then(i=>{const m=i.data.find(u=>u.product===a&&u.userId===this.userId&&u.tag==="旅遊景點");m?this.axios.delete(`${A}/hearts/${m.id}`).then(u=>{this.isFavorite[a]=!1,_.threeLayerCheckType("success",`取消收藏 ${p} 成功`),this.getHeartData()}).catch(u=>{_.threeLayerCheckType("error","取消收藏資料失敗")}):this.axios.post(`${A}/hearts`,{product:a,category:e,title:p,userId:this.userId,tag:"旅遊景點",imageUrl:c}).then(u=>{this.isFavorite[a]=!0,_.threeLayerCheckType("success",`已加入收藏 ${p} 成功`),this.getHeartData()}).catch(u=>{_.threeLayerCheckType("error","收藏資料失敗")})}).catch(i=>{_.threeLayerCheckType("error","取得愛心收藏資料失敗")}):_.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getAttractions(){this.axios.get(`${A}/attractions`).then(a=>{this.attractions=a.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&(this.enabledAttractions.push(e),this.attractionId=e.id,this.isLoading=!1,this.attractionImageUrl=e.imageUrl)}),this.getNewText(),this.getnewAttractionsTimeOpen()}).catch(()=>{_.threeLayerCheckType("error","取得景點資料失敗")})},getNewText(){const a={};this.attractions.forEach(e=>{e.content&&e.content.split(";").forEach(c=>{const i=c.trim();a[e.id]||(a[e.id]=[]),a[e.id].push(i)})}),this.newProductsContent=Object.entries(a).map(([e,p])=>({id:e,content:p}))},getnewAttractionsTimeOpen(){const a={};this.attractions.forEach(e=>{e.content&&e.timeOpen.split(";").forEach(c=>{const i=c.trim();a[e.id]||(a[e.id]=[]),a[e.id].push(i)})}),this.newAttractionsTimeOpen=Object.entries(a).map(([e,p])=>({id:e,content:p}))},getCookie(a){const e=document.cookie.split(";");for(let p of e){const[c,i]=p.trim().split("=");if(c===a)return i}return null}},mounted(){this.category=this.$route.params.category,this.attractionTitle=this.$route.params.title;const a=this.getCookie("userId"),e=this.getCookie("hexTokenU");this.userId=a*1,this.token=e,this.isLoading=!0,this.getAttractions(),this.getHeartData(),window.scrollTo(0,0)}},C=a=>(U("data-v-2af7f4fe"),a=a(),V(),a),_e={class:"container py-10 py-lg-30 px-lg-20"},ye={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-15"},ke={class:"breadcrumb mb-0 fs-5"},xe={class:"breadcrumb-item"},Te={class:"breadcrumb-item"},Ie={class:"breadcrumb-item"},Se={class:"breadcrumb-item"},Ce={key:0,class:"w-100 w-xl-95 position-relative pe-0"},Ae={class:"d-flex align-items-center mb-4 fs-3 border-start border-primary-500 border-5"},Le=C(()=>t("span",{class:"placeholder w-50 fs-4 ms-2"},null,-1)),Pe=C(()=>t("i",{class:"bi bi-heart"},null,-1)),Me=[Pe],Ee=C(()=>t("div",{class:"row"},[t("div",{class:"w-100 mb-4"},[t("div",{class:"card-att-img card-att-img-2"},[t("img",{src:"https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg",class:"img-fluid pb-4 pb-lg-0 opacity-25",alt:"Placeholder Image"})])])],-1)),Oe={class:"d-flex align-items-center mb-4 fs-3 border-start border-primary-500 border-5"},Fe={class:"fs-3 me-2 fw-bold ps-3"},je={class:"fs-3 me-4 fw-bold"},Be={key:2,class:"row g-3"},De=N('<div class="tourist-intr-content my-lg-10 my-8" data-v-2af7f4fe><div class="mb-8" data-v-2af7f4fe><p class="fs-5 fs-md-4 fw-bold mb-4" data-v-2af7f4fe>景點介紹</p><span class="placeholder w-100" data-v-2af7f4fe></span><span class="placeholder w-100" data-v-2af7f4fe></span><span class="placeholder w-75" data-v-2af7f4fe></span><span class="placeholder w-50" data-v-2af7f4fe></span></div><div class="mb-8" data-v-2af7f4fe><span class="fs-5 fs-md-4 mb-4 fw-bold" data-v-2af7f4fe>開放時間：</span><span class="placeholder w-100" data-v-2af7f4fe></span><span class="placeholder w-100" data-v-2af7f4fe></span><span class="placeholder w-50" data-v-2af7f4fe></span></div><div data-v-2af7f4fe><p class="fs-5 fs-md-4 mb-3 fw-bold" data-v-2af7f4fe>交通資訊：</p><div class="row" data-v-2af7f4fe><div class="d-flex col-12 col-lg-7 flex-column" data-v-2af7f4fe><span class="placeholder w-75 mb-3" data-v-2af7f4fe></span><span class="placeholder w-50 mb-3" data-v-2af7f4fe></span><span class="placeholder w-100" data-v-2af7f4fe></span></div><div class="col-12 col-lg-5" data-v-2af7f4fe><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid pb-4 pb-lg-0 opacity-25" alt="Placeholder Image" data-v-2af7f4fe></div></div></div></div>',1),Ue=[De],Ve={key:0},Ne={class:"tourist-intr-content my-lg-10 my-8"},$e={class:"mb-8"},ze=C(()=>t("p",{class:"fs-5 fs-md-4 fw-bold mb-4"},"景點介紹",-1)),qe={class:"fs-6 fs-md-5"},He={class:"mb-8"},Ge=C(()=>t("span",{class:"fs-5 fs-md-4 mb-4 fw-bold"},"開放時間：",-1)),Je={key:0},Ke=C(()=>t("p",{class:"fs-5 fs-md-4 mb-3 fw-bold"},"交通資訊：",-1)),Qe={class:"row"},Re={class:"d-flex col-12 col-lg-7 justify-content-between flex-column"},We={key:0},Xe={class:"col-12 col-lg-5"},Ye=["src"],Ze={key:4,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},et=N('<div class="card card-att h-100" data-v-2af7f4fe><span class="tag text-white placeholder-glow" data-v-2af7f4fe></span><button class="heart border-0" aria-label="heart" data-v-2af7f4fe><i class="bi bi-heart heart-click" data-v-2af7f4fe></i></button><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" data-v-2af7f4fe><div class="card-body" data-v-2af7f4fe><span class="placeholder w-25" data-v-2af7f4fe></span><div class="col-12 placeholder-glow" data-v-2af7f4fe><span class="placeholder w-50" data-v-2af7f4fe></span><span class="placeholder w-60" data-v-2af7f4fe></span></div></div><div class="card-footer text-end border-0 pt-0 pb-3 placeholder-glow" data-v-2af7f4fe><div class="d-flex justify-content-between" data-v-2af7f4fe><span class="placeholder w-25" data-v-2af7f4fe></span><span class="placeholder w-25" data-v-2af7f4fe></span></div></div></div>',1),tt=[et];function st(a,e,p,c,i,m){const u=S("BannerBlock"),w=S("router-link"),g=S("singleAttraction"),r=S("LikeBlock");return o(),l(v,null,[T(u),t("div",_e,[t("nav",ye,[t("ol",ke,[t("li",xe,[T(w,{to:"/",exact:"","active-class":"active-link"},{default:I(()=>[B("首頁")]),_:1})]),t("li",Te,[T(w,{exact:"","active-class":"active-link",to:{path:"/TouristAttractions",query:{category:"全部",page:"1"}}},{default:I(()=>[B(" 南部旅遊景點 ")]),_:1})]),t("li",Ie,[E(t("button",{onClick:e[0]||(e[0]=s=>m.redirectToA("台南")),class:"bg-transparent border-0 btn-hover text-dark",type:"button","aria-label":"台南"}," 台南 ",512),[[O,i.category==="台南"]]),E(t("button",{onClick:e[1]||(e[1]=s=>m.redirectToA("嘉義")),class:"bg-transparent border-0 btn-hover text-dark",type:"button","aria-label":"嘉義"}," 嘉義 ",512),[[O,i.category==="嘉義"]]),E(t("button",{onClick:e[2]||(e[2]=s=>m.redirectToA("高雄")),class:"bg-transparent border-0 btn-hover text-dark",type:"button","aria-label":"高雄"}," 高雄 ",512),[[O,i.category==="高雄"]])]),t("li",Se,x(i.attractionTitle),1)])]),i.isLoading?(o(),l("div",Ce,[t("div",Ae,[Le,t("button",{class:"border-0 heart-position-none fs-3 bg-transparent",onClick:e[3]||(e[3]=s=>m.toggleFavorite(i.attractionId,i.category,i.attractionTitle,i.attractionImageUrl)),type:"button","aria-label":"heart"},Me)]),Ee])):(o(),l(v,{key:1},[t("div",Oe,[t("span",Fe,x(i.category),1),t("p",je,x(i.attractionTitle),1),t("button",{class:"border-0 heart-position-none fs-3 bg-transparent",onClick:e[4]||(e[4]=s=>m.toggleFavorite(i.attractionId,i.category,i.attractionTitle,i.attractionImageUrl)),type:"button","aria-label":"heart"},[t("i",{class:Z(["bi",{"bi-heart-fill":i.isFavorite[i.attractionId],"bi-heart":!i.isFavorite[i.attractionId]}])},null,2)])]),T(g)],64)),i.isLoading?(o(),l("div",Be,Ue)):(o(!0),l(v,{key:3},y(i.enabledAttractions,(s,f)=>(o(),l("div",{class:"row g-3",key:s.id},[f===0?(o(),l("div",Ve,[t("div",Ne,[t("div",$e,[ze,t("p",qe,x(s.description),1)]),t("div",He,[Ge,(o(!0),l(v,null,y(i.newAttractionsTimeOpen,n=>(o(),l("div",{key:n.id},[n.id===s.id?(o(),l("div",Je,[(o(!0),l(v,null,y(n.content,d=>(o(),l("p",{key:d+123,class:"fs-6 fs-md-5 my-4"},x(d),1))),128))])):F("",!0)]))),128))]),t("div",null,[Ke,t("div",Qe,[t("div",Re,[(o(!0),l(v,null,y(a.newProductsContent,n=>(o(),l("div",{key:n.id},[n.id===s.id?(o(),l("div",We,[(o(!0),l(v,null,y(n.content,d=>(o(),l("p",{key:d,class:"fs-6 fs-md-5 my-4 mb-4"},x(d),1))),128))])):F("",!0)]))),128))]),t("div",Xe,[t("iframe",{src:s.imgMap,width:"100%",height:"100%",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,Ye)])])])])])):F("",!0)]))),128)),i.isLoading?(o(),l("div",Ze,[(o(),l(v,null,y(3,s=>t("div",{key:s,class:"col"},tt)),64))])):(o(),j(r,{key:5,adCategoryTitle:"attractions",token:i.token,"user-id":i.userId},null,8,["token","user-id"]))])],64)}const dt=D(we,[["render",st],["__scopeId","data-v-2af7f4fe"]]);export{dt as default};
