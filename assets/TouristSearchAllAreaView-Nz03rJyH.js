import{_ as m,a as i,F as n,u as d,f,o as r,b as t,v as h,x as k,d as x,w as v,e as b,r as y}from"./index-7ZqOGiyG.js";const g="https://two024-south-json-server-vercel.onrender.com",w={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${g}/api/users/${user}`).then(e=>{this.userIsLoggedIn=!0}).catch(e=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${g}/products`).then(e=>{this.products=e.data,this.products.forEach(s=>{s.is_enabled===1&&this.enabledProducts.push(s)}),this.getNewText()}).catch(e=>{alert(`${e.message}`)})},truncateContent(e,s){return e&&e.length>s?e.substring(0,s)+"...":e},getNewText(){const e={};this.products.forEach(s=>{s.description&&s.description.split(";").forEach(u=>{const o=u.trim();e[s.id]||(e[s.id]=[]),e[s.id].push(o)})}),this.newProductsDes=Object.entries(e).map(([s,c])=>({id:s,descriptions:c}))}},mounted(){this.getProducts()}},P={class:"row g-0"},$={class:"col-md-4"},T={class:"tag text-white"},N={class:"card-att-img card-att-img-2 h-100"},V=["src","alt"],C=t("div",{class:"heart3"},[t("i",{class:"bi bi-heart heart-click","data-heartStatus":"false"})],-1),D={class:"col-md-8"},S={class:"card-body px-5"},A={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title-att mb-4"},E={key:0},j={class:"card-text card-text-position"},B=f('<nav aria-label="Page navigation example " class="my-10"><ul class="pagination justify-content-center"><li class="page-item disabled"><a class="page-link page-link-radius-2">Previous</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">1</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">2</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">3</a></li><li class="page-item"><a class="page-link page-link-radius" href="#">Next</a></li></ul></nav>',1);function F(e,s,c,u,o,L){const _=y("router-link");return r(),i(n,null,[(r(!0),i(n,null,d(o.enabledProducts,a=>(r(),i("div",{class:"card mb-3 card-att",key:a.id},[t("div",P,[t("div",$,[t("span",T,h(a.category),1),t("div",N,[t("img",{src:a.imageUrl,class:"card-img-top img-fluid",alt:a.title},null,8,V)]),C]),t("div",D,[t("div",S,[t("h4",A,h(a.title),1),(r(!0),i(n,null,d(o.newProductsDes,l=>(r(),i("div",{key:l.id},[l.id===a.id?(r(),i("div",E,[(r(!0),i(n,null,d(l.descriptions,p=>(r(),i("p",{key:p},h(p),1))),128))])):k("",!0)]))),128)),t("p",j,[x(_,{to:{name:"TouristSinglePackage",params:{category:a.category,title:a.title}},class:"fs-5"},{default:v(()=>[b("more")]),_:2},1032,["to"])])])])])]))),128)),B],64)}const K=m(w,[["render",F]]);export{K as default};
