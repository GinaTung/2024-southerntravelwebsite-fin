import{_ as m,a as i,F as n,u as h,f as x,o,b as e,v as r,x as b,d as k,w as v,e as y,r as w}from"./index-r8Wn3As2.js";const u="https://two024-south-json-server-vercel.onrender.com",T={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${u}/api/users/${user}`).then(s=>{this.userIsLoggedIn=!0}).catch(s=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${u}/products`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.enabledProducts.push(t)}),this.getNewText()}).catch(s=>{alert(`${s.message}`)})},thousand(s){return s!==void 0&&(s=s.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${s}`},truncateContent(s,t){return s&&s.length>t?s.substring(0,t)+"...":s},getNewText(){const s={};this.products.forEach(t=>{t.description&&t.description.split(";").forEach(p=>{const c=p.trim();s[t.id]||(s[t.id]=[]),s[t.id].push(c)})}),this.newProductsDes=Object.entries(s).map(([t,l])=>({id:t,descriptions:l}))},searchProducts(){this.axios.get(`${u}/products?category=台南`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.serchTainan.push(t)})}).catch(s=>{console.log(s)})}},mounted(){this.searchProducts(),this.getProducts()}},$={class:"row g-0"},P={class:"col-md-4"},N={class:"tag text-white"},S={class:"card-att-img card-att-img-2 h-100"},V=["src","alt"],C={class:"col-md-8"},D={class:"card h-100 border-0 bg-transparent"},E={class:"card-body px-5"},B=e("div",{class:"heart3"},[e("i",{class:"bi bi-heart heart-click","data-heartStatus":"false"})],-1),j={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title-att mb-4"},q={class:"d-flex mb-3"},A={class:"badge rounded-pill bg-primary-200 text-primary-600 fw-bold me-1 py-1 px-4 fs-6"},F={class:"row"},L={class:"col-8 col-xl-9 my-2"},z={key:0},K={class:"col-4 col-xl-3 text-end"},M={class:"fs-2 fs-lg-3 fs-xl-2"},O=e("div",{class:"col-12"},null,-1),U={class:"card-footer bg-transparent border-0 pt-0 pb-4"},G={class:"d-flex align-items-end"},H=e("a",{class:"btn-square w-100 ms-2",href:"#",type:"button"}," 加入購物車 ",-1),J=x('<nav aria-label="Page navigation example " class="my-10"><ul class="pagination justify-content-center"><li class="page-item disabled"><a class="page-link page-link-radius-2">Previous</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">1</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">2</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">3</a></li><li class="page-item"><a class="page-link page-link-radius" href="#">Next</a></li></ul></nav>',1);function Q(s,t,l,p,c,g){const f=w("router-link");return o(),i(n,null,[(o(!0),i(n,null,h(c.serchTainan,a=>(o(),i("div",{class:"card mb-3 card-att",key:a.id},[e("div",$,[e("div",P,[e("span",N,r(a.category),1),e("div",S,[e("img",{src:a.imageUrl,class:"card-img-top img-fluid",alt:a.title},null,8,V)])]),e("div",C,[e("div",D,[e("div",E,[B,e("h4",j,r(a.title),1),e("div",q,[e("span",A,r(a.tag_2),1)]),e("div",F,[e("div",L,[(o(!0),i(n,null,h(c.newProductsDes,d=>(o(),i("div",{key:d.id},[d.id===a.id?(o(),i("div",z,[(o(!0),i(n,null,h(d.descriptions,_=>(o(),i("p",{key:_},r(_),1))),128))])):b("",!0)]))),128))]),e("div",K,[e("p",M,r(g.thousand(a.price)),1)])]),O]),e("div",U,[e("div",G,[k(f,{to:{name:"TouristSinglePackage",params:{category:a.category,title:a.title}},class:"btn-outline-square w-100 me-2",type:"button"},{default:v(()=>[y("方案介紹")]),_:2},1032,["to"]),H])])])])])]))),128)),J],64)}const W=m(T,[["render",Q]]);export{W as default};
