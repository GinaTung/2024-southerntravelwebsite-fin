import{g as G,i as H,e as X,n as V,b as j,S as Y,a as J,N as K}from"./navigation-1EcI9VrX.js";import{_ as U,k as Q,o as u,c as f,b as P,w as A,F as x,h as S,g as z,a as i,r as B,f as L,v as N,t as M,d as F,j as R}from"./index-36QR2t1j.js";function W(r){let{swiper:e,extendParams:w,on:m}=r;w({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let d=!1,_=!1;e.thumbs={swiper:null};function y(){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const t=s.clickedIndex,a=s.clickedSlide;if(a&&a.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let p;s.params.loop?p=parseInt(s.clickedSlide.getAttribute("data-swiper-slide-index"),10):p=t,e.params.loop?e.slideToLoop(p):e.slideTo(p)}function T(){const{thumbs:s}=e.params;if(d)return!1;d=!0;const t=e.constructor;if(s.swiper instanceof t)e.thumbs.swiper=s.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(H(s.swiper)){const a=Object.assign({},s.swiper);Object.assign(a,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(a),_=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",y),!0}function n(s){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const a=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let p=1;const c=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(p=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(p=1),p=Math.floor(p),t.slides.forEach(b=>b.classList.remove(c)),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let b=0;b<p;b+=1)X(t.slidesEl,`[data-swiper-slide-index="${e.realIndex+b}"]`).forEach(l=>{l.classList.add(c)});else for(let b=0;b<p;b+=1)t.slides[e.realIndex+b]&&t.slides[e.realIndex+b].classList.add(c);const h=e.params.thumbs.autoScrollOffset,k=h&&!t.params.loop;if(e.realIndex!==t.realIndex||k){const b=t.activeIndex;let l,E;if(t.params.loop){const o=t.slides.filter(C=>C.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];l=t.slides.indexOf(o),E=e.activeIndex>e.previousIndex?"next":"prev"}else l=e.realIndex,E=l>e.previousIndex?"next":"prev";k&&(l+=E==="next"?h:-1*h),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(l)<0&&(t.params.centeredSlides?l>b?l=l-Math.floor(a/2)+1:l=l+Math.floor(a/2)-1:l>b&&t.params.slidesPerGroup,t.slideTo(l,s?0:void 0))}}m("beforeInit",()=>{const{thumbs:s}=e.params;if(!(!s||!s.swiper))if(typeof s.swiper=="string"||s.swiper instanceof HTMLElement){const t=G(),a=()=>{const c=typeof s.swiper=="string"?t.querySelector(s.swiper):s.swiper;if(c&&c.swiper)s.swiper=c.swiper,T(),n(!0);else if(c){const h=k=>{s.swiper=k.detail[0],c.removeEventListener("init",h),T(),n(!0),s.swiper.update(),e.update()};c.addEventListener("init",h)}return c},p=()=>{if(e.destroyed)return;a()||requestAnimationFrame(p)};requestAnimationFrame(p)}else T(),n(!0)}),m("slideChange update resize observerUpdate",()=>{n()}),m("setTransition",(s,t)=>{const a=e.thumbs.swiper;!a||a.destroyed||a.setTransition(t)}),m("beforeDestroy",()=>{const s=e.thumbs.swiper;!s||s.destroyed||_&&s.destroy()}),Object.assign(e.thumbs,{init:T,update:n})}function Z(r){let{swiper:e,extendParams:w,emit:m,once:d}=r;w({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function _(){if(e.params.cssMode)return;const n=e.getTranslate();e.setTranslate(n),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function y(){if(e.params.cssMode)return;const{touchEventsData:n,touches:s}=e;n.velocities.length===0&&n.velocities.push({position:s[e.isHorizontal()?"startX":"startY"],time:n.touchStartTime}),n.velocities.push({position:s[e.isHorizontal()?"currentX":"currentY"],time:V()})}function T(n){let{currentPos:s}=n;if(e.params.cssMode)return;const{params:t,wrapperEl:a,rtlTranslate:p,snapGrid:c,touchEventsData:h}=e,b=V()-h.touchStartTime;if(s<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(s>-e.maxTranslate()){e.slides.length<c.length?e.slideTo(c.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(h.velocities.length>1){const v=h.velocities.pop(),g=h.velocities.pop(),q=v.position-g.position,$=v.time-g.time;e.velocity=q/$,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),($>150||V()-v.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,h.velocities.length=0;let l=1e3*t.freeMode.momentumRatio;const E=e.velocity*l;let o=e.translate+E;p&&(o=-o);let C=!1,I;const O=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let D;if(o<e.maxTranslate())t.freeMode.momentumBounce?(o+e.maxTranslate()<-O&&(o=e.maxTranslate()-O),I=e.maxTranslate(),C=!0,h.allowMomentumBounce=!0):o=e.maxTranslate(),t.loop&&t.centeredSlides&&(D=!0);else if(o>e.minTranslate())t.freeMode.momentumBounce?(o-e.minTranslate()>O&&(o=e.minTranslate()+O),I=e.minTranslate(),C=!0,h.allowMomentumBounce=!0):o=e.minTranslate(),t.loop&&t.centeredSlides&&(D=!0);else if(t.freeMode.sticky){let v;for(let g=0;g<c.length;g+=1)if(c[g]>-o){v=g;break}Math.abs(c[v]-o)<Math.abs(c[v-1]-o)||e.swipeDirection==="next"?o=c[v]:o=c[v-1],o=-o}if(D&&d("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(p?l=Math.abs((-o-e.translate)/e.velocity):l=Math.abs((o-e.translate)/e.velocity),t.freeMode.sticky){const v=Math.abs((p?-o:o)-e.translate),g=e.slidesSizesGrid[e.activeIndex];v<g?l=t.speed:v<2*g?l=t.speed*1.5:l=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&C?(e.updateProgress(I),e.setTransition(l),e.setTranslate(o),e.transitionStart(!0,e.swipeDirection),e.animating=!0,j(a,()=>{!e||e.destroyed||!h.allowMomentumBounce||(m("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(I),j(a,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(m("_freeModeNoMomentumRelease"),e.updateProgress(o),e.setTransition(l),e.setTranslate(o),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,j(a,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(o),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&m("_freeModeNoMomentumRelease");(!t.freeMode.momentum||b>=t.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:_,onTouchMove:y,onTouchEnd:T}})}const ee="https://two024-south-json-server-vercel.onrender.com",te={components:{Swiper:Y,SwiperSlide:J},data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],imagesUrl:""}},methods:{getAttractions(){this.axios.get(`${ee}/attractions`).then(r=>{this.attractions=r.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&this.enabledAttractions.push(e)}),this.imagesUrl=this.enabledAttractions[0].imagesUrl}).catch(r=>{alert(`${r.message}`)})}},setup(){const r=Q(null);return{thumbsSwiper:r,setThumbsSwiper:w=>{r.value=w},modules:[Z,K,W]}},mounted(){this.attractionTitle=this.$route.params.title,this.getAttractions()}},se=["src"],ie=["src"];function re(r,e,w,m,d,_){const y=B("swiper-slide"),T=B("swiper");return u(),f(x,null,[P(T,{spaceBetween:10,navigation:!0,thumbs:{swiper:m.thumbsSwiper},modules:m.modules,class:"mySwiper2"},{default:A(()=>[(u(!0),f(x,null,S(d.imagesUrl,(n,s)=>(u(),z(y,{key:s+123},{default:A(()=>[i("img",{src:n,class:"img-fluid"},null,8,se)]),_:2},1024))),128))]),_:1},8,["thumbs","modules"]),P(T,{onSwiper:m.setThumbsSwiper,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:m.modules,class:"mySwiper3"},{default:A(()=>[(u(!0),f(x,null,S(d.imagesUrl,(n,s)=>(u(),z(y,{key:s+123},{default:A(()=>[i("img",{src:n,class:"img-fluid"},null,8,ie)]),_:2},1024))),128))]),_:1},8,["onSwiper","modules"])],64)}const ne=U(te,[["render",re]]),oe="https://two024-south-json-server-vercel.onrender.com",ae={components:{singleAttraction:ne},data(){return{category:"",attractionTitle:"",attractions:[],enabledAttractions:[],newAttractionsContent:"",newAttractionsTimeOpen:""}},methods:{redirectToA(r){this.$router.push({path:"/TouristAttractions",query:{category:r}})},getAttractions(){this.axios.get(`${oe}/attractions`).then(r=>{this.attractions=r.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&this.enabledAttractions.push(e)}),this.getNewText(),this.getnewAttractionsTimeOpen()}).catch(()=>{sweetAlert.threeLayerCheckType("error","取得景點資料失敗")})},getNewText(){const r={};this.attractions.forEach(e=>{e.content&&e.content.split(";").forEach(m=>{const d=m.trim();r[e.id]||(r[e.id]=[]),r[e.id].push(d)})}),this.newProductsContent=Object.entries(r).map(([e,w])=>({id:e,content:w}))},getnewAttractionsTimeOpen(){const r={};this.attractions.forEach(e=>{e.content&&e.timeOpen.split(";").forEach(m=>{const d=m.trim();r[e.id]||(r[e.id]=[]),r[e.id].push(d)})}),this.newAttractionsTimeOpen=Object.entries(r).map(([e,w])=>({id:e,content:w}))}},mounted(){this.category=this.$route.params.category,this.attractionTitle=this.$route.params.title,this.getAttractions(),window.scrollTo(0,0)}},le={class:"container py-10 py-lg-30 px-lg-20"},ce={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-15"},de={class:"breadcrumb mb-0 fs-5"},ue={class:"breadcrumb-item"},me={class:"breadcrumb-item"},pe={class:"breadcrumb-item"},fe={class:"breadcrumb-item"},he={class:"intr-title d-flex align-items-center mb-4 fs-3 border-start border-primary-500 border-3"},be={class:"fs-3 me-2 fw-bold ps-3"},we={class:"fs-3 me-4 fw-bold"},ve=i("div",{class:"heart4"},[i("i",{class:"bi bi-heart"})],-1),Te={key:0},ge={class:"tourist-intr-content my-lg-10 my-5"},_e={class:"mb-8"},ye=i("p",{class:"fs-5 fs-md-4 fw-bold mb-4"},"景點介紹",-1),xe={class:"fs-6 fs-md-5"},Se={class:"mb-8"},Me=i("span",{class:"fs-5 fs-md-4 mb-4 fw-bold"},"開放時間：",-1),Ae={key:0},ke=i("p",{class:"fs-5 fs-md-4 mb-3 fw-bold"},"交通資訊：",-1),Ee={class:"row"},Ce={class:"d-flex col-12 col-lg-7 justify-content-between flex-column"},Pe={key:0},Ie={class:"col-12 col-lg-5"},Oe=["src"];function Be(r,e,w,m,d,_){const y=B("router-link"),T=B("singleAttraction");return u(),f("div",le,[i("nav",ce,[i("ol",de,[i("li",ue,[P(y,{to:"/",exact:"","active-class":"active-link"},{default:A(()=>[F("首頁")]),_:1})]),i("li",me,[P(y,{to:"/TouristAttractions",exact:"","active-class":"active-link"},{default:A(()=>[F(" 南部旅遊景點 ")]),_:1})]),i("li",pe,[L(i("a",{onClick:e[0]||(e[0]=n=>_.redirectToA("台南")),class:"navbar-brand"},"台南",512),[[N,d.category==="台南"]]),L(i("a",{onClick:e[1]||(e[1]=n=>_.redirectToA("嘉義")),class:"navbar-brand"},"嘉義",512),[[N,d.category==="嘉義"]]),L(i("a",{onClick:e[2]||(e[2]=n=>_.redirectToA("高雄")),class:"navbar-brand"},"高雄",512),[[N,d.category==="高雄"]])]),i("li",fe,M(d.attractionTitle),1)])]),i("div",he,[i("span",be,M(d.category),1),i("p",we,M(d.attractionTitle),1),ve]),P(T),(u(!0),f(x,null,S(d.enabledAttractions,(n,s)=>(u(),f("div",{class:"row g-3",key:n.id},[s===0?(u(),f("div",Te,[i("div",ge,[i("div",_e,[ye,i("p",xe,M(n.description),1)]),i("div",Se,[Me,(u(!0),f(x,null,S(d.newAttractionsTimeOpen,t=>(u(),f("div",{key:t.id},[t.id===n.id?(u(),f("div",Ae,[(u(!0),f(x,null,S(t.content,a=>(u(),f("p",{key:a+123,class:"fs-6 fs-md-5 my-4"},M(a),1))),128))])):R("",!0)]))),128))]),i("div",null,[ke,i("div",Ee,[i("div",Ce,[(u(!0),f(x,null,S(r.newProductsContent,t=>(u(),f("div",{key:t.id},[t.id===n.id?(u(),f("div",Pe,[(u(!0),f(x,null,S(t.content,a=>(u(),f("p",{key:a,class:"fs-6 fs-md-5 my-4 mb-4"},M(a),1))),128))])):R("",!0)]))),128))]),i("div",Ie,[i("iframe",{src:n.imgMap,width:"100%",height:"100%",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,Oe)])])])])])):R("",!0)]))),128))])}const je=U(ae,[["render",Be]]);export{je as default};
