import{_ as g,c as i,a as e,b as o,w as n,q as _,F as m,r as l,o as r,d as c}from"./index-NMw9zA4W.js";const d="https://ec-course-api.hexschool.io/v2",v={data(){return{user:{username:"",password:""},userIsLoggedIn:!1}},methods:{checkAdmin(){this.axios.post(`${d}/api/user/check`).then(s=>{this.$emitter.on("loginCheck",t=>{this.userIsLoggedIn=t})}).catch(s=>{this.userIsLoggedIn=!1})},logout(){this.axios.post(`${d}/logout`).then(s=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(s=>{alert(`${s.message}`)})}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s,this.checkAdmin()}},b={class:"navbar navbar-expand-lg navbar-light bg-light"},k={class:"container"},f=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1),x={class:"collapse navbar-collapse",id:"navbarSupportedContent"},$={class:"navbar-nav ms-auto mb-2 mb-lg-0"},I={class:"nav-item"},C={class:"nav-item"};function w(s,t,V,L,u,h){const a=l("router-link"),p=l("RouterView");return r(),i(m,null,[e("nav",b,[e("div",k,[o(a,{to:"/admin",class:"navbar-brand"},{default:n(()=>[c("後台管理")]),_:1}),f,e("div",x,[e("ul",$,[e("li",I,[o(a,{to:"/",class:"nav-link"},{default:n(()=>[c("回前台")]),_:1})]),e("li",C,[u.userIsLoggedIn===!1?(r(),_(a,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:n(()=>[c("管理者登入")]),_:1})):(r(),i("a",{key:1,class:"nav-link",type:"button",onClick:t[0]||(t[0]=y=>h.logout())},"登出"))])])])])]),o(p)],64)}const T=g(v,[["render",w]]);export{T as default};
