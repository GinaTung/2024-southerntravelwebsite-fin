import{_ as f,c as w,a as e,b as s,w as u,r as i,o as k,n as p,d as g}from"./index-bsa4QZMk.js";const x="https://ec-course-api.hexschool.io/v2",b={data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:""}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token&&(alert("目前已為管理者身分登入，無需再次登入"),this.$router.push({path:"/admin/AdminHome"}))},login(){this.axios.post(`${x}/admin/signin`,this.user).then(t=>{console.log(t),alert("管理者登入成功");const{expired:o,token:l}=t.data;document.cookie=`hexToken=${l}; expires=${new Date(o)}`,this.$router.push({name:"AdminHome"}),this.$emitter.emit("loginCheck",!0)}).catch(t=>{console.log(t),alert("管理者登入失敗")})}},mounted(){window.scrollTo(0,0),setTimeout(()=>{this.checkAdmin()},1e3)}},V={class:"container py-10 py-lg-30"},v={class:"row justify-content-center"},y={class:"col-md-6"},A=e("h1",{class:"h3 mb-4 text-center"},"管理者登入",-1),$={class:"form-floating mb-4"},C=e("label",{for:"email"},"請輸入 Email",-1),E={class:"form-floating mb-4"},T=e("label",{for:"userpassword"},"請輸入Password",-1),q={class:"mt-3"};function F(t,o,l,B,a,r){const d=i("VeeField"),c=i("ErrorMessage"),h=i("router-link"),_=i("VeeForm");return k(),w("div",V,[e("div",v,[e("div",y,[A,s(_,{id:"form",ref:"form",onSubmit:r.login},{default:u(({errors:m})=>[e("div",$,[s(d,{type:"email",name:"email",class:p(["form-control",{"is-invalid":m.email}]),modelValue:a.user.username,"onUpdate:modelValue":o[0]||(o[0]=n=>a.user.username=n),id:"email",placeholder:"請輸入 Email",rules:"email|required",autocomplete:"useremail"},null,8,["modelValue","class"]),C,s(c,{name:"email",class:"invalid-feedback"})]),e("div",E,[s(d,{type:"password",class:p(["form-control",{"is-invalid":m.password}]),name:"password",id:"userpassword",placeholder:"請輸入Password",rules:"min:8|alpha_dash|required",autocomplete:"current-password",modelValue:a.user.password,"onUpdate:modelValue":o[1]||(o[1]=n=>a.user.password=n)},null,8,["class","modelValue"]),T,s(c,{name:"password",class:"invalid-feedback"})]),e("a",{class:"btn-turquoise w-100 mt-3 text-center",type:"button",onClick:o[2]||(o[2]=(...n)=>r.login&&r.login(...n))}," 登入 "),e("div",q,[s(h,{to:"/",class:"btn-outline-turquoise w-100 text-center",type:"button"},{default:u(()=>[g("回前台")]),_:1})])]),_:1},8,["onSubmit"])])])])}const z=f(b,[["render",F]]);export{z as default};
