import{_,a as g,b as e,d as o,w as c,r as u,o as f,e as n,v as l}from"./index-_OSt2I-Q.js";const r="https://two024-south-json-server-vercel.onrender.com",m={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${r}/api/users/${user}`).then(s=>{this.userIsLoggedIn=!0}).catch(s=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${r}/products`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.enabledProducts.push(t)}),this.getNewText()}).catch(s=>{console.log(s)})},truncateContent(s,t){return s&&s.length>t?s.substring(0,t)+"...":s},getNewText(){const s={};this.products.forEach(t=>{t.description&&t.description.split(";").forEach(h=>{const a=h.trim();s[t.id]||(s[t.id]=[]),s[t.id].push(a)})}),this.newProductsDes=Object.entries(s).map(([t,d])=>({id:t,descriptions:d}))},searchProducts(){this.axios.get(`${r}/products?category=嘉義`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.searchChiayi.push(t)})}).catch(s=>{alert(`${s.message}`)}),this.axios.get(`${r}/products?category=台南`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.serchTainan.push(t)}),console.log(this.serchTainan)}).catch(s=>{alert(`${s.message}`)}),this.axios.get(`${r}/products?category=高雄`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.searchKaohsiung.push(t)})}).catch(s=>{alert(`${s.message}`)})}},mounted(){this.searchProducts(),this.getProducts()}},b={class:"container py-10 py-lg-30"},k={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-15"},v={class:"breadcrumb mb-0 fs-5"},x={class:"breadcrumb-item"},w=e("li",{class:"breadcrumb-item","aria-current":"page"},"南部旅遊方案",-1),y={class:"tourist-list"},T={class:"row"},P={class:"col-12 col-md-3 mb-5 mb-md-6 mb-lg-0 d-none d-lg-flex"},$={class:"border-info2 border-1 border w-100"},C=e("p",{class:"fs-4 p-5 bg-primary-500 text-white"},"地區篩選",-1),E={class:"nav flex-column"},j={class:"nav-item"},N={class:""},D={class:"nav-item"},I={class:""},K={class:"nav-item"},V={class:""},B={class:"nav-item"},A={class:""},z={class:"col-12 col-lg-9"};function L(s,t,d,h,a,M){const i=u("router-link"),p=u("router-view");return f(),g("div",b,[e("nav",k,[e("ol",v,[e("li",x,[o(i,{to:"/",class:"navbar-brand py-6"},{default:c(()=>[n(" 首頁 ")]),_:1})]),w])]),e("div",y,[e("div",T,[e("div",P,[e("div",$,[C,e("ul",E,[e("li",j,[o(i,{class:"nav-link p-5 fs-5 link-color d-flex justify-content-between","data-name":"全部","aria-current":"page",to:"/TouristPackage/all"},{default:c(()=>[n("全部區域"),e("span",N,l(a.enabledProducts.length),1)]),_:1})]),e("li",D,[o(i,{class:"nav-link p-5 fs-5 link-color d-flex justify-content-between",to:"/TouristPackage/searchChiayi","data-name":"嘉義"},{default:c(()=>[n("嘉義"),e("span",I,l(a.searchChiayi.length),1)]),_:1})]),e("li",K,[o(i,{class:"nav-link p-5 fs-5 link-color d-flex justify-content-between",to:"/TouristPackage/searchTainan","data-name":"台南"},{default:c(()=>[n("台南"),e("span",V,l(a.serchTainan.length),1)]),_:1})]),e("li",B,[o(i,{class:"nav-link p-5 fs-5 link-color d-flex justify-content-between",to:"/TouristPackage/searchKaohsiung","data-name":"高雄"},{default:c(()=>[n("高雄"),e("span",A,l(a.searchKaohsiung.length),1)]),_:1})])])])]),e("div",z,[o(p)])])])])}const S=_(m,[["render",L]]);export{S as default};
