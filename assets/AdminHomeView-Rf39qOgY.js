import{A as r}from"./AdminSidebar-CSIiJ0Yo.js";import{_ as d,c as l,a as t,b as h,t as c,d as e,n as a,e as _,o as p,r as u}from"./index-vzW9V7O9.js";const g="https://ec-course-api.hexschool.io/v2",i="https://two024-south-json-server-vercel.onrender.com",m={components:{AdminSidebar:r},data(){return{token:"",attractions:[],attraction:[],attractionsLength:0,products:[],productsLength:0,product:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?this.axios.post(`${g}/api/user/check`).then(o=>{this.userIsLoggedIn=!0}).catch(o=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})}):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getAttractions(){this.axios.get(`${i}/attractions`).then(o=>{this.attractions=o.data,this.attractionsLength=this.attractions.length,this.getAttraction()}).catch(o=>{alert(`${err}`)})},getAttraction(){this.attraction=this.attractions[this.attractionsLength-1]},getProducts(){this.axios.get(`${i}/products`).then(o=>{this.products=o.data,this.productsLength=this.products.length,this.getProduct()}).catch(o=>{alert(`${err.data.message}`)})},getProduct(){this.product=this.products[this.productsLength-1]}},mounted(){setTimeout(()=>{this.checkAdmin()},500),this.getAttractions(),this.getProducts()}},b={class:"container"},v=t("h1",{class:"my-4"},"後台首頁",-1),f={class:"row"},x={class:"col-3"},A={class:"col-9"},k={class:"accordion",id:"accordionExample"},y={class:"accordion-item"},w=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," 最新景點建立資訊 ")],-1),T={id:"collapseOne",class:"accordion-collapse collapse show","data-bs-parent":"#accordionExample"},L={class:"accordion-body"},E={class:"row"},S={class:"col-12 col-md-5"},V=["src"],I={class:"col-12 col-md-7"},N={class:"fs-5"},P=t("br",null,null,-1),B={class:"fs-6"},O=t("br",null,null,-1),z={class:"d-flex"},C=t("strong",{class:"fs-6"},"上架：",-1),U={class:"accordion-item"},$=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," 最新產品建立資訊 ")],-1),j={id:"collapseTwo",class:"accordion-collapse collapse","data-bs-parent":"#accordionExample"},D={class:"accordion-body"},H={class:"row"},q={class:"col-12 col-md-5"},F=["src"],G={class:"col-12 col-md-7"},J={class:"fs-5"},K=t("br",null,null,-1),M={class:"fs-6"},Q=t("br",null,null,-1),R={class:"d-flex"},W=t("strong",{class:"fs-6"},"上架：",-1),X=_('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree"> 留言 </button></h2><div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample"><div class="accordion-body"> 目前無資料 </div></div></div>',1);function Y(o,Z,tt,st,s,ot){const n=u("AdminSidebar");return p(),l("div",b,[v,t("div",f,[t("div",x,[h(n)]),t("div",A,[t("div",k,[t("div",y,[w,t("div",T,[t("div",L,[t("div",E,[t("div",S,[t("img",{src:s.attraction.imageUrl,alt:"",class:"img-fluid"},null,8,V)]),t("div",I,[t("strong",N,"景點名稱："+c(s.attraction.title),1),e(),P,t("strong",B,"分類："+c(s.attraction.category),1),e(),O,t("div",z,[C,t("strong",{class:a(["fs-6",{"text-success":s.attraction.is_enabled===1,"text-danger":s.attraction.is_enabled===0}])},c(s.attraction.is_enabled?"啟用":"未啟用"),3)])])])])])]),t("div",U,[$,t("div",j,[t("div",D,[t("div",H,[t("div",q,[t("img",{src:s.product.imageUrl,alt:"",class:"img-fluid"},null,8,F)]),t("div",G,[t("strong",J,"景點名稱："+c(s.product.title),1),e(),K,t("strong",M,"分類："+c(s.product.category),1),e(),Q,t("div",R,[W,t("strong",{class:a(["fs-6",{"text-success":s.product.is_enabled===1,"text-danger":s.product.is_enabled===0}])},c(s.product.is_enabled?"啟用":"未啟用"),3)])])])])])]),X])])])])}const at=d(m,[["render",Y]]);export{at as default};
