import{s as _}from"./sweetAlert-MtrGzx6C.js";import{C as $}from"./collapse-o9O3KHmS.js";import{_ as m,o as h,c as p,a as s,b as o,w as i,d,e as k,r as g,p as x,f as y,g as I,v as T,t as L,F as A}from"./index-QI08YDY8.js";import"./selector-engine-sEXksG40.js";const C="/2024-southerntravelwebsite-fin/assets/logo-WY09ya8o.png",N={methods:{redirectToA(t){this.$root.navigatedFromHeader=!0,this.$router.push({path:"/TouristPackage",query:{category:t}})},redirectToB(t){this.$root.navigatedFromHeader=!0,this.$router.push({path:"/TouristAttractions",query:{category:t}})}}},S=t=>(x("data-v-661259dd"),t=t(),y(),t),F={class:"bg-light"},q={class:"container py-10 justify-content-between"},B={class:"navbar mb-10 flex-column flex-lg-row py-0"},H=S(()=>s("img",{src:C,alt:"南部輕旅遊網站"},null,-1)),O={class:"navbar-nav flex-column flex-lg-row"},U={class:"nav-item"},V={class:"nav-item"},j=k('<ul class="navbar-nav flex-row" data-v-661259dd><li class="nav-item" data-v-661259dd><a class="nav-link py-0 ps-1" href="#" data-v-661259dd><i class="bi bi-youtube img-lg" data-v-661259dd></i></a></li><li class="nav-item" data-v-661259dd><a class="nav-link py-0 ps-6" href="#" data-v-661259dd><i class="bi bi-instagram img-lg" data-v-661259dd></i></a></li><li class="nav-item" data-v-661259dd><a class="nav-link py-0 ps-6" href="#" data-v-661259dd><i class="bi bi-facebook img-lg" data-v-661259dd></i></a></li></ul>',1),D=k('<div class="d-flex text-center flex-column align-items-center" data-v-661259dd><p class="fw-bold text-dark mb-1" data-v-661259dd>南部輕旅行 「完美套裝」</p><p class="fw-bold text-dark mb-1" data-v-661259dd>輕鬆省心，玩得盡興！</p><p class="text-dark mb-10" data-v-661259dd>景點探索 + 美食巡禮 + 便捷交通 + 舒適住宿</p><p class="text-dark2 text-center fs-7 fs-lg-6" data-v-661259dd> 本網站僅供個人作品使用，不提供商業用途<br data-v-661259dd> 資料來源<br data-v-661259dd><a href="https://www.taiwan.net.tw/" class="fw-bold fs-7" target="_blank" data-v-661259dd>臺灣觀光資訊網</a><br data-v-661259dd><a href="https://www.swcoast-nsa.gov.tw/zh-tw" class="fw-bold fs-7" target="_blank" data-v-661259dd>雲嘉南濱海國家風景區管理處網站</a><br data-v-661259dd><a href="https://khh.travel/" target="_blank" class="fw-bold fs-7" data-v-661259dd>高雄旅遊網</a>、<a href="https://travel.chiayi.gov.tw/" target="_blank" class="fw-bold fs-7" data-v-661259dd>嘉義市觀光旅遊網</a></p></div>',1),E={class:"navbar-nav text-end"},P={class:"nav-item"};function z(t,e,n,a,c,l){const r=g("router-link");return h(),p("div",F,[s("div",q,[s("nav",B,[o(r,{to:"/",class:"navbar-brand mb-3 mb-lg-0 py-0 mx-0"},{default:i(()=>[H]),_:1}),s("ul",O,[s("li",U,[o(r,{to:"/TouristAttractions",class:"nav-link px-5 px-xl-10 fs-6 fs-lg-5 text-dark mb-3 mb-lg-0",onClick:e[0]||(e[0]=f=>l.redirectToB("全部"))},{default:i(()=>[d("南部旅遊景點")]),_:1})]),s("li",V,[o(r,{to:"/TouristPackage",class:"nav-link px-5 px-xl-10 fs-6 fs-lg-5 text-dark mb-3 mb-lg-0",onClick:e[1]||(e[1]=f=>l.redirectToA("全部"))},{default:i(()=>[d("南部旅遊方案")]),_:1})])]),j]),D,s("ul",E,[s("li",P,[o(r,{to:"/admin/adminlogin",class:"nav-link"},{default:i(()=>[d("後台管理")]),_:1})])])])])}const G=m(N,[["render",z],["__scopeId","data-v-661259dd"]]),b="https://two024-south-json-server-vercel.onrender.com",J={components:{FrontLayoutFooter:G},data(){return{headerCollapse:{},isNavbarOpen:!1,userIsLoggedIn2:!1,token:"",carts:[],userCarts:[],cartsLength:0,userCartsNum:[],transCartNumberStatus:!1,userIsLogOut:!1,isloading:!1}},created(){this.updateCart(),this.getCarts(),this.token&&this.getHeartData()},watch:{$route(){this.headerCollapse.hide()}},methods:{updateCart(){this.$emitter.on("adminUpdateCart",this.getCarts),this.$emitter.on("updateCart",t=>{this.cartsLength=t}),this.$emitter.on("updateCartNum",t=>{this.cartsLength=t})},redirectToA(t){this.$root.navigatedFromHeader=!0,this.$router.push({path:"/TouristPackage",query:{category:t}})},redirectToB(t){this.$root.navigatedFromHeader=!0,this.$router.push({path:"/TouristAttractions",query:{category:t}})},checkLoggedInUser(){this.$emitter.on("loginCheck2",t=>{this.userIsLoggedIn2=t}),this.token?this.userIsLoggedIn2=!0:this.userIsLoggedIn2=!1},toggleNavbar(){this.isNavbarOpen=!this.isNavbarOpen},logout(){this.deleteAllCookies(),this.userIsLoggedIn2=!1,_.threeLayerCheckType("success","會員登出成功"),this.isloading=!0,this.$route.path==="/"?(this.isloading=!1,this.$router.go(0)):(this.isloading=!1,this.$router.push("/"))},getHeartData(){this.axios.get(`${b}/hearts`).then(t=>{t.data.forEach(e=>{e.userId===this.userId&&e.tag==="旅遊景點"&&(this.isFavorite[e.product]=!0)})}).catch(t=>{_.threeLayerCheckType("error","取得愛心收藏資料失敗")})},getCarts(){this.axios.get(`${b}/carts`).then(t=>{this.carts=t.data,this.carts.forEach(a=>{a.userId===this.userId&&this.userCarts.push(a)});const e=[],n=new Set;this.userCarts.forEach(a=>{n.has(a.productId)||(n.add(a.productId),e.push(a))}),this.userCarts=e,this.cartsLength=this.userCarts.length}).catch(()=>{_.threeLayerCheckType("error","取得購物車資料失敗")})},deleteAllCookies(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var n=t[e],a=n.indexOf("="),c=a>-1?n.substr(0,a):n;document.cookie=c+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}},getCookie(t){const e=document.cookie.split(";");for(let n of e){const[a,c]=n.trim().split("=");if(a===t)return c}return null}},mounted(){this.headerCollapse=new $(this.$refs.headerCollapse,{toggle:!1}),this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexTokenU\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkLoggedInUser();const t=this.getCookie("userId");this.userId=t*1}},v=t=>(x("data-v-d0fe6425"),t=t(),y(),t),M={class:"navbar navbar-expand-lg bg-white py-0 sticky-top bg-opacity-90"},W={class:"container"},Y=v(()=>s("img",{src:C,alt:"南部輕旅遊網站"},null,-1)),K=v(()=>s("i",{class:"bi bi-list",style:{"font-size":"3rem",color:"#0ea0a6"}},null,-1)),Q=[K],R={class:"collapse navbar-collapse py-10 py-lg-0",id:"navbarSupportedContent",ref:"headerCollapse"},X={key:0,class:"navbar-nav m-auto mb-lg-0 align-items-center"},Z={class:"nav-item mb-10 mb-lg-0"},tt={class:"nav-item mb-10 mb-lg-0"},et={key:1,class:"navbar-nav m-auto mb-lg-0 align-items-center"},st={class:"nav-item mb-10 mb-lg-0 ps-xl-15"},at={class:"nav-item mb-10 mb-lg-0"},ot={key:2,class:"navbar-nav d-flex pt-5 pt-lg-0 flex-row justify-content-center"},rt={class:"nav-item"},it={class:"nav-item"},nt={key:3,class:"navbar-nav d-flex pt-5 pt-lg-0 flex-row justify-content-center align-items-center"},lt={class:"nav-item py-0"},dt={class:"btn-outline-turquoise position-relative px-6",href:"#/cart"},ct=v(()=>s("i",{class:"bi bi-cart-fill"},null,-1)),ut={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},ht=v(()=>s("span",{class:"visually-hidden"},"unread messages",-1)),pt=v(()=>s("li",{class:"nav-item py-0"},[s("a",{class:"btn-outline-turquoise ms-3 px-6",href:"#/profile"},[s("i",{class:"bi bi-person-fill"})])],-1)),vt={class:"nav-item"};function gt(t,e,n,a,c,l){const r=g("router-link"),f=g("router-view"),w=g("front-layout-footer");return h(),p(A,null,[s("nav",M,[s("div",W,[o(r,{to:"/",class:"navbar-brand py-6"},{default:i(()=>[Y]),_:1}),s("button",{class:"navbar-toggler border-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:e[0]||(e[0]=(...u)=>l.toggleNavbar&&l.toggleNavbar(...u))},Q),I(s("div",R,[c.userIsLoggedIn2===!1?(h(),p("ul",X,[s("li",Z,[o(r,{to:"/TouristAttractions",class:"nav-link px-5 px-xl-10 fs-5 text-dark",onClick:e[1]||(e[1]=u=>l.redirectToB("全部"))},{default:i(()=>[d("南部旅遊景點")]),_:1})]),s("li",tt,[o(r,{to:"/TouristPackage",class:"nav-link px-5 px-xl-10 fs-5 text-dark",onClick:e[2]||(e[2]=u=>l.redirectToA("全部"))},{default:i(()=>[d("南部旅遊方案")]),_:1})])])):(h(),p("ul",et,[s("li",st,[o(r,{to:"/TouristAttractions",class:"nav-link px-5 px-xl-10 fs-5 text-dark",onClick:e[3]||(e[3]=u=>l.redirectToB("全部"))},{default:i(()=>[d("南部旅遊景點")]),_:1})]),s("li",at,[o(r,{to:"/TouristPackage",class:"nav-link px-5 px-xl-10 fs-5 text-dark",onClick:e[4]||(e[4]=u=>l.redirectToA("全部"))},{default:i(()=>[d("南部旅遊方案")]),_:1})])])),c.userIsLoggedIn2===!1?(h(),p("ul",ot,[s("li",rt,[o(r,{to:"/login",class:"btn-outline-turquoise"},{default:i(()=>[d("登入")]),_:1})]),s("li",it,[o(r,{to:"/signup",class:"btn-turquoise ms-3"},{default:i(()=>[d("註冊")]),_:1})])])):(h(),p("ul",nt,[s("li",lt,[s("a",dt,[ct,s("span",ut,[d(L(c.cartsLength)+" ",1),ht])])]),pt,s("li",vt,[s("a",{href:"#",onClick:e[5]||(e[5]=u=>l.logout()),class:"ms-3 btn-outline-turquoise px-5"},"登出")])]))],512),[[T,c.isNavbarOpen]])])]),o(f),o(w)],64)}const kt=m(J,[["render",gt],["__scopeId","data-v-d0fe6425"]]);export{kt as default};
