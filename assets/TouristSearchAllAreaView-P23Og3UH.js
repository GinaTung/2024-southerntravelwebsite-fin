import{_ as m,a as i,F as l,u,f as x,o,b as s,v as n,x as b,d as k,w as v,e as y,r as w}from"./index-Xioykskf.js";const g="https://two024-south-json-server-vercel.onrender.com",T={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${g}/api/users/${user}`).then(e=>{this.userIsLoggedIn=!0}).catch(e=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${g}/products`).then(e=>{this.products=e.data,this.products.forEach(t=>{t.is_enabled===1&&this.enabledProducts.push(t)}),this.getNewText()}).catch(e=>{alert(`${e.message}`)})},thousand(e){return e!==void 0&&(e=e.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${e}`},truncateContent(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},getNewText(){const e={};this.products.forEach(t=>{t.description&&t.description.split(";").forEach(p=>{const r=p.trim();e[t.id]||(e[t.id]=[]),e[t.id].push(r)})}),this.newProductsDes=Object.entries(e).map(([t,c])=>({id:t,descriptions:c}))}},mounted(){this.getProducts()}},P={class:"row g-0"},N={class:"col-md-4"},$={class:"tag text-white"},C={class:"card-att-img h-100"},S=["src","alt"],V={class:"col-md-8"},D={class:"card h-100 border-0 bg-transparent"},j={class:"card-body px-3 px-md-4"},A=s("div",{class:"heart3"},[s("i",{class:"bi bi-heart heart-click","data-heartStatus":"false"})],-1),B={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title-att mb-4 pe-8"},E={class:"d-flex mb-4"},q={class:"badge rounded-pill bg-primary-200 text-primary-600 fw-bold me-1 py-1 px-4 fs-6"},F={class:"row"},L={class:"col-12 col-sm-8 my-2"},z={key:0},K={class:"col-12 col-sm-4"},M={class:"d-flex flex-column"},O={class:"fs-4 fs-lg-5 fs-xl-4 text-decoration-line-through text-end"},U={class:"d-flex flex-sm-column align-items-end justify-content-end"},G=s("p",{class:"text-danger fw-bold d-none d-sm-block"},"促銷價",-1),H={class:"fs-2 fs-sm-3 fs-lg-4 fs-xl-2 text-danger"},J=s("div",{class:"col-12"},null,-1),Q={class:"card-footer bg-transparent border-0 pt-0 pb-4 px-3 px-md-4"},R={class:"d-flex align-items-end"},W=s("a",{class:"btn-square w-100 ms-2 px-2 px-md-3",href:"#",type:"button"},"預約套裝行程",-1),X=x('<nav aria-label="Page navigation example " class="my-10"><ul class="pagination justify-content-center"><li class="page-item disabled"><a class="page-link page-link-radius-2">Previous</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">1</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">2</a></li><li class="page-item"><a class="page-link page-link-0 rounded-0" href="#">3</a></li><li class="page-item"><a class="page-link page-link-radius" href="#">Next</a></li></ul></nav>',1);function Y(e,t,c,p,r,d){const f=w("router-link");return o(),i(l,null,[(o(!0),i(l,null,u(r.enabledProducts,a=>(o(),i("div",{class:"card mb-4 card-att",key:a.id},[s("div",P,[s("div",N,[s("span",$,n(a.category),1),s("div",C,[s("img",{src:a.imageUrl,class:"card-img-top img-fluid",alt:a.title},null,8,S)])]),s("div",V,[s("div",D,[s("div",j,[A,s("h4",B,n(a.title),1),s("div",E,[s("span",q,n(a.tag_2),1)]),s("div",F,[s("div",L,[(o(!0),i(l,null,u(r.newProductsDes,h=>(o(),i("div",{key:h.id},[h.id===a.id?(o(),i("div",z,[(o(!0),i(l,null,u(h.descriptions,_=>(o(),i("p",{key:_},n(d.truncateContent(_,85)),1))),128))])):b("",!0)]))),128))]),s("div",K,[s("div",M,[s("p",O,"NT"+n(d.thousand(a.origin_price)),1),s("div",U,[G,s("p",H,"NT"+n(d.thousand(a.price)),1)])])])]),J]),s("div",Q,[s("div",R,[k(f,{to:{name:"TouristSinglePackage",params:{category:a.category,title:a.title}},class:"btn-outline-square w-100 me-2 px-2 px-md-3",type:"button"},{default:v(()=>[y("行程介紹")]),_:2},1032,["to"]),W])])])])])]))),128)),X],64)}const I=m(T,[["render",Y]]);export{I as default};
