import{b as K,c as G,d as Q,f as Z,n as O,h as V,S as ee,a as te,N as ae}from"./navigation-H513CZp-.js";import{s as q}from"./sweetAlert-IAz4HaCA.js";import{_ as se,o as S,c as A,a as o,t as B,b as j,w as F,F as N,i as W,h as X,l as Y,d as ie,r as U,p as ne,f as le}from"./index-Hdjk0-b4.js";function z(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function re(i){let{swiper:e,extendParams:L,on:m,emit:v}=i;const d="swiper-pagination";L({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),e.pagination={el:null,bullets:[]};let P,x=0;const n=a=>(Array.isArray(a)||(a=[a].filter(t=>!!t)),a);function y(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(a,t){const{bulletActiveClass:s}=e.params.pagination;a&&(a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${s}-${t}`),a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${s}-${t}-${t}`)))}function $(a){const t=a.target.closest(z(e.params.pagination.bulletClass));if(!t)return;a.preventDefault();const s=G(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===s)return;const l=e.getSlideIndexByData(s),p=e.getSlideIndexByData(e.realIndex);l>e.slides.length-e.loopedSlides&&e.loopFix({direction:l>p?"next":"prev",activeSlideIndex:l,slideTo:!1}),e.slideToLoop(s)}else e.slideTo(s)}function w(){const a=e.rtl,t=e.params.pagination;if(y())return;let s=e.pagination.el;s=n(s);let l,p;const M=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,h=e.params.loop?Math.ceil(M/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(p=e.previousRealIndex||0,l=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(l=e.snapIndex,p=e.previousSnapIndex):(p=e.previousIndex||0,l=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let T,f,E;if(t.dynamicBullets&&(P=K(r[0],e.isHorizontal()?"width":"height",!0),s.forEach(u=>{u.style[e.isHorizontal()?"width":"height"]=`${P*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&p!==void 0&&(x+=l-(p||0),x>t.dynamicMainBullets-1?x=t.dynamicMainBullets-1:x<0&&(x=0)),T=Math.max(l-x,0),f=T+(Math.min(r.length,t.dynamicMainBullets)-1),E=(f+T)/2),r.forEach(u=>{const g=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(b=>`${t.bulletActiveClass}${b}`)].map(b=>typeof b=="string"&&b.includes(" ")?b.split(" "):b).flat();u.classList.remove(...g)}),s.length>1)r.forEach(u=>{const g=G(u);g===l?u.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&u.setAttribute("part","bullet"),t.dynamicBullets&&(g>=T&&g<=f&&u.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),g===T&&c(u,"prev"),g===f&&c(u,"next"))});else{const u=r[l];if(u&&u.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&r.forEach((g,b)=>{g.setAttribute("part",b===l?"bullet-active":"bullet")}),t.dynamicBullets){const g=r[T],b=r[f];for(let D=T;D<=f;D+=1)r[D]&&r[D].classList.add(...`${t.bulletActiveClass}-main`.split(" "));c(g,"prev"),c(b,"next")}}if(t.dynamicBullets){const u=Math.min(r.length,t.dynamicMainBullets+4),g=(P*u-P)/2-E*P,b=a?"right":"left";r.forEach(D=>{D.style[e.isHorizontal()?b:"top"]=`${g}px`})}}s.forEach((r,T)=>{if(t.type==="fraction"&&(r.querySelectorAll(z(t.currentClass)).forEach(f=>{f.textContent=t.formatFractionCurrent(l+1)}),r.querySelectorAll(z(t.totalClass)).forEach(f=>{f.textContent=t.formatFractionTotal(h)})),t.type==="progressbar"){let f;t.progressbarOpposite?f=e.isHorizontal()?"vertical":"horizontal":f=e.isHorizontal()?"horizontal":"vertical";const E=(l+1)/h;let u=1,g=1;f==="horizontal"?u=E:g=E,r.querySelectorAll(z(t.progressbarFillClass)).forEach(b=>{b.style.transform=`translate3d(0,0,0) scaleX(${u}) scaleY(${g})`,b.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(r.innerHTML=t.renderCustom(e,l+1,h),T===0&&v("paginationRender",r)):(T===0&&v("paginationRender",r),v("paginationUpdate",r)),e.params.watchOverflow&&e.enabled&&r.classList[e.isLocked?"add":"remove"](t.lockClass)})}function _(){const a=e.params.pagination;if(y())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let s=e.pagination.el;s=n(s);let l="";if(a.type==="bullets"){let p=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&p>t&&(p=t);for(let M=0;M<p;M+=1)a.renderBullet?l+=a.renderBullet.call(e,M,a.bulletClass):l+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?l=a.renderFraction.call(e,a.currentClass,a.totalClass):l=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?l=a.renderProgressbar.call(e,a.progressbarFillClass):l=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],s.forEach(p=>{a.type!=="custom"&&(p.innerHTML=l||""),a.type==="bullets"&&e.pagination.bullets.push(...p.querySelectorAll(z(a.bulletClass)))}),a.type!=="custom"&&v("paginationRender",s[0])}function C(){e.params.pagination=Q(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let t;typeof a.el=="string"&&e.isElement&&(t=e.el.querySelector(a.el)),!t&&typeof a.el=="string"&&(t=[...document.querySelectorAll(a.el)]),t||(t=a.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(a.el)],t.length>1&&(t=t.filter(s=>Z(s,".swiper")[0]===e.el)[0])),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=n(t),t.forEach(s=>{a.type==="bullets"&&a.clickable&&s.classList.add(a.clickableClass),s.classList.add(a.modifierClass+a.type),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(s.classList.add(`${a.modifierClass}${a.type}-dynamic`),x=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&s.classList.add(a.progressbarOppositeClass),a.clickable&&s.addEventListener("click",$),e.enabled||s.classList.add(a.lockClass)}))}function I(){const a=e.params.pagination;if(y())return;let t=e.pagination.el;t&&(t=n(t),t.forEach(s=>{s.classList.remove(a.hiddenClass),s.classList.remove(a.modifierClass+a.type),s.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&s.removeEventListener("click",$)})),e.pagination.bullets&&e.pagination.bullets.forEach(s=>s.classList.remove(...a.bulletActiveClass.split(" ")))}m("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:t}=e.pagination;t=n(t),t.forEach(s=>{s.classList.remove(a.horizontalClass,a.verticalClass),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),m("init",()=>{e.params.pagination.enabled===!1?k():(C(),_(),w())}),m("activeIndexChange",()=>{typeof e.snapIndex>"u"&&w()}),m("snapIndexChange",()=>{w()}),m("snapGridLengthChange",()=>{_(),w()}),m("destroy",()=>{I()}),m("enable disable",()=>{let{el:a}=e.pagination;a&&(a=n(a),a.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),m("lock unlock",()=>{w()}),m("click",(a,t)=>{const s=t.target,l=n(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&l&&l.length>0&&!s.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&s===e.navigation.nextEl||e.navigation.prevEl&&s===e.navigation.prevEl))return;const p=l[0].classList.contains(e.params.pagination.hiddenClass);v(p===!0?"paginationShow":"paginationHide"),l.forEach(M=>M.classList.toggle(e.params.pagination.hiddenClass))}});const H=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=n(a),a.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),C(),_(),w()},k=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=n(a),a.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),I()};Object.assign(e.pagination,{enable:H,disable:k,render:_,update:w,init:C,destroy:I})}function oe(i){let{swiper:e,extendParams:L,emit:m,once:v}=i;L({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function d(){if(e.params.cssMode)return;const n=e.getTranslate();e.setTranslate(n),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function P(){if(e.params.cssMode)return;const{touchEventsData:n,touches:y}=e;n.velocities.length===0&&n.velocities.push({position:y[e.isHorizontal()?"startX":"startY"],time:n.touchStartTime}),n.velocities.push({position:y[e.isHorizontal()?"currentX":"currentY"],time:O()})}function x(n){let{currentPos:y}=n;if(e.params.cssMode)return;const{params:c,wrapperEl:$,rtlTranslate:w,snapGrid:_,touchEventsData:C}=e,H=O()-C.touchStartTime;if(y<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(y>-e.maxTranslate()){e.slides.length<_.length?e.slideTo(_.length-1):e.slideTo(e.slides.length-1);return}if(c.freeMode.momentum){if(C.velocities.length>1){const h=C.velocities.pop(),r=C.velocities.pop(),T=h.position-r.position,f=h.time-r.time;e.velocity=T/f,e.velocity/=2,Math.abs(e.velocity)<c.freeMode.minimumVelocity&&(e.velocity=0),(f>150||O()-h.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=c.freeMode.momentumVelocityRatio,C.velocities.length=0;let k=1e3*c.freeMode.momentumRatio;const a=e.velocity*k;let t=e.translate+a;w&&(t=-t);let s=!1,l;const p=Math.abs(e.velocity)*20*c.freeMode.momentumBounceRatio;let M;if(t<e.maxTranslate())c.freeMode.momentumBounce?(t+e.maxTranslate()<-p&&(t=e.maxTranslate()-p),l=e.maxTranslate(),s=!0,C.allowMomentumBounce=!0):t=e.maxTranslate(),c.loop&&c.centeredSlides&&(M=!0);else if(t>e.minTranslate())c.freeMode.momentumBounce?(t-e.minTranslate()>p&&(t=e.minTranslate()+p),l=e.minTranslate(),s=!0,C.allowMomentumBounce=!0):t=e.minTranslate(),c.loop&&c.centeredSlides&&(M=!0);else if(c.freeMode.sticky){let h;for(let r=0;r<_.length;r+=1)if(_[r]>-t){h=r;break}Math.abs(_[h]-t)<Math.abs(_[h-1]-t)||e.swipeDirection==="next"?t=_[h]:t=_[h-1],t=-t}if(M&&v("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(w?k=Math.abs((-t-e.translate)/e.velocity):k=Math.abs((t-e.translate)/e.velocity),c.freeMode.sticky){const h=Math.abs((w?-t:t)-e.translate),r=e.slidesSizesGrid[e.activeIndex];h<r?k=c.speed:h<2*r?k=c.speed*1.5:k=c.speed*2.5}}else if(c.freeMode.sticky){e.slideToClosest();return}c.freeMode.momentumBounce&&s?(e.updateProgress(l),e.setTransition(k),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating=!0,V($,()=>{!e||e.destroyed||!C.allowMomentumBounce||(m("momentumBounce"),e.setTransition(c.speed),setTimeout(()=>{e.setTranslate(l),V($,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(m("_freeModeNoMomentumRelease"),e.updateProgress(t),e.setTransition(k),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,V($,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(t),e.updateActiveIndex(),e.updateSlidesClasses()}else if(c.freeMode.sticky){e.slideToClosest();return}else c.freeMode&&m("_freeModeNoMomentumRelease");(!c.freeMode.momentum||H>=c.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:d,onTouchMove:P,onTouchEnd:x}})}const J="https://two024-south-json-server-vercel.onrender.com",ce={components:{Swiper:ee,SwiperSlide:te},props:["adCategoryTitle","token","userId","currentDate"],data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],adTitle:{attractions:"探索旅遊景點",packages:"探索旅遊方案"},isFavorite:{},linkPath:"",enabledProducts:[]}},methods:{goRouter(i){return`#/TouristAttractions/${i.category}/${i.title}`},goRouterProduct(i){return`#/TouristPackage/${i.category}/${i.title}`},getAttractions(){this.axios.get(`${J}/attractions`).then(i=>{this.attractions=i.data,this.enabledAttractions=this.attractions.filter(e=>e.is_enabled===1),this.removeAttractionWithTitle(this.attractionTitle)}).catch(i=>{console.log(i),q.threeLayerCheckType("error","取得景點資料失敗")})},removeAttractionWithTitle(i){i&&(this.enabledAttractions=this.enabledAttractions.filter(e=>e.title!==i))},getProducts(){this.axios.get(`${J}/products`).then(i=>{i.data.forEach(e=>{e.is_enabled===1&&this.enabledProducts.push(e)}),this.removeProductsWithTitle(this.attractionTitle)}).catch(()=>{this.isLoading=!1,q.threeLayerCheckType("error","取得產品資料失敗")})},removeProductsWithTitle(i){i&&(this.enabledProducts=this.enabledProducts.filter(e=>e.title!==i))},truncateContent(i,e){return i&&i.length>e?i.substring(0,e)+"...":i},thousand(i){return i!==void 0&&(i=i.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),`$ ${i}`}},setup(){return{modules:[oe,re,ae]}},mounted(){this.attractionTitle=this.$route.params.title,this.linkPath=this.$route.name,this.getAttractions(),this.getProducts()}},R=i=>(ne("data-v-20f06214"),i=i(),le(),i),de={key:0,class:"mt-10"},pe={class:"card h-100"},ue={class:"tag text-white"},fe={class:"card-header p-0 border-0 h-100"},me=["href"],he=["src"],ge={class:"card-body",style:{transform:"rotate(0)"}},ve={class:"text-center flex-grow-1 h-35"},be=["href"],ye={class:"fs-6 pb-7"},_e=R(()=>o("button",{class:"swiper-button-next border-0 bg-transparent","aria-label":"arrow-next"},null,-1)),xe=R(()=>o("button",{class:"swiper-button-prev border-0 bg-transparent","aria-label":"arrow-prev"},null,-1)),Ce={key:1,class:"mt-10"},Te={class:"card h-100 flex-grow-1"},we={class:"tag text-white"},ke={class:"card-header p-0 border-0"},Me=["href"],Be=["src"],Pe={class:"card-body",style:{transform:"rotate(0)"}},Se={class:"text-center flex-grow-1 h-45"},Le=["href"],Ae={class:"fs-6"},$e={class:"card-footer border-0",style:{transform:"rotate(0)"}},De={class:"d-flex align-items-center pb-4"},Ee=["href"],ze={key:0},Re={class:"d-flex align-items-center mt-1"},Ie=R(()=>o("h5",{class:"text-danger fw-bold me-2"},"促銷價",-1)),Fe={class:"text-danger"},He={key:1,class:"text-danger py-3"},Oe=R(()=>o("button",{class:"swiper-button-next border-0 bg-transparent","aria-label":"arrow-next"},null,-1)),Ve=R(()=>o("button",{class:"swiper-button-prev border-0 bg-transparent","aria-label":"arrow-prev"},null,-1));function Ne(i,e,L,m,v,d){const P=U("swiper-slide"),x=U("swiper");return S(),A(N,null,[v.linkPath==="TouristSingleAttraction"?(S(),A("div",de,[o("h2",null,B(v.adTitle[L.adCategoryTitle]),1),j(x,{slidesPerView:1,spaceBetween:10,breakpoints:{768:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{clickable:!0},modules:m.modules,class:"mySwiper4"},{default:F(()=>[(S(!0),A(N,null,W(v.enabledAttractions,(n,y)=>(S(),X(P,{key:y+123},{default:F(()=>[o("div",pe,[o("span",ue,B(n.category),1),o("div",fe,[o("a",{href:d.goRouter(n),target:"_blank"},[o("img",{src:n.imageUrl,class:"img-fluid h-100",alt:"attractionItem.title"},null,8,he)],8,me)]),o("div",ge,[o("div",ve,[o("a",{href:d.goRouter(n),target:"_blank",class:"card-title fs-5 fw-bold text-primary-700 text-center stretched-link"},B(n.title),9,be)]),o("p",ye,B(d.truncateContent(n.description,52)),1)])])]),_:2},1024))),128)),_e,xe]),_:1},8,["navigation","modules"])])):Y("",!0),v.linkPath==="TouristSinglePackage"?(S(),A("div",Ce,[o("h2",null,B(v.adTitle[L.adCategoryTitle]),1),j(x,{slidesPerView:1,spaceBetween:10,breakpoints:{768:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{clickable:!0},modules:m.modules,class:"mySwiper4"},{default:F(()=>[(S(!0),A(N,null,W(v.enabledProducts,(n,y)=>(S(),X(P,{key:y+123},{default:F(()=>[o("div",Te,[o("span",we,B(n.category),1),o("div",ke,[o("a",{href:d.goRouterProduct(n),target:"_blank"},[o("img",{src:n.imageUrl,class:"img-fluid",alt:"productsItem.title"},null,8,Be)],8,Me)]),o("div",Pe,[o("div",Se,[o("a",{href:d.goRouterProduct(n),target:"_blank",class:"card-title fs-5 fw-bold text-primary-700 text-center stretched-link"},B(n.title),9,Le)]),o("p",Ae,B(d.truncateContent(n.description,48)),1)]),o("div",$e,[o("div",De,[o("a",{href:d.goRouterProduct(n),target:"_blank",class:"stretched-link"},[L.currentDate<=n.endDate?(S(),A("h6",ze,[ie(" 預約期間： "+B(n.startDate)+" 至 "+B(n.endDate)+" ",1),o("div",Re,[Ie,o("h5",Fe,"NT"+B(d.thousand(n.price)),1)])])):(S(),A("h5",He,"預約時間已截止"))],8,Ee)])])])]),_:2},1024))),128)),Oe,Ve]),_:1},8,["navigation","modules"])])):Y("",!0)],64)}const We=se(ce,[["render",Ne],["__scopeId","data-v-20f06214"]]);export{We as L,oe as f};
