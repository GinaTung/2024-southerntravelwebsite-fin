import{C as b}from"./bootstrap.esm-5N2xjcMB.js";import{A as f}from"./AdminSidebar-X3ar9Ukj.js";import{s as d}from"./sweetAlert-v5bt2MnZ.js";import{_ as k}from"./logo-D-Af0tqc.js";import{_ as C,c as h,a as e,b as n,w as l,g as x,F as I,r as i,o as c,d as m,p as w,f as N}from"./index--UaHxLc5.js";const p="https://ec-course-api.hexschool.io/v2",A={components:{AdminSidebar:f},data(){return{user:{username:"",password:""},userIsLoggedIn:!1,token:"",navCollapse:null}},methods:{toggleNavbar(){this.$refs.navbar.classList.contains("show")?this.navCollapse.hide():this.navCollapse.show()},checkAdmin(){this.$emitter.on("loginCheck",a=>{this.userIsLoggedIn=a}),this.token&&this.axios.post(`${p}/api/user/check`).then(a=>{this.userIsLoggedIn=!0}).catch(()=>{this.userIsLoggedIn=!1,d.threeLayerCheckType("error","管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/AdminHome"})})},logout(){this.axios.post(`${p}/logout`).then(()=>{document.cookie="hexToken=; expires=",this.$router.push({path:"/"}),this.userIsLoggedIn=!1}).catch(()=>{d.threeLayerCheckType("error","管理者身分登出失敗，請稍後再點選登出按鈕")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.checkAdmin(),this.navCollapse=new b(this.$refs.navbar,{toggle:!1})}},g=a=>(w("data-v-79d0baba"),a=a(),N(),a),L={class:"navbar navbar-expand-lg navbar-light bg-light"},S={class:"container"},y=g(()=>e("img",{src:k,alt:"南部輕旅遊網站"},null,-1)),$=g(()=>e("span",{class:"navbar-toggler-icon"},null,-1)),T=[$],V={class:"collapse navbar-collapse",id:"navbarSupportedContent",ref:"navbar"},B={class:"navbar-nav ms-auto mb-2 mb-lg-0"},F={class:"container"},H={class:"row flex-column flex-md-row"},R={class:"col-12 col-md-3"},z={class:"col-12 col-md-9"};function D(a,s,E,j,u,o){const r=i("router-link"),v=i("AdminSidebar"),_=i("RouterView");return c(),h(I,null,[e("nav",L,[e("div",S,[n(r,{to:"/admin/adminHome",class:"navbar-brand"},{default:l(()=>[y]),_:1}),e("button",{class:"navbar-toggler",type:"button","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:s[0]||(s[0]=(...t)=>o.toggleNavbar&&o.toggleNavbar(...t))},T),e("div",V,[e("ul",B,[e("li",{class:"nav-item",onClick:s[1]||(s[1]=(...t)=>o.toggleNavbar&&o.toggleNavbar(...t))},[n(r,{to:"/",class:"nav-link"},{default:l(()=>[m("回前台")]),_:1})]),e("li",{class:"nav-item",onClick:s[3]||(s[3]=(...t)=>o.toggleNavbar&&o.toggleNavbar(...t))},[u.userIsLoggedIn===!1?(c(),x(r,{key:0,to:"/admin/adminlogin",class:"nav-link"},{default:l(()=>[m("管理者登入")]),_:1})):(c(),h("a",{key:1,class:"nav-link",onClick:s[2]||(s[2]=t=>o.logout())},"登出"))])])],512)])]),e("div",F,[e("div",H,[e("div",R,[n(v)]),e("div",z,[n(_)])])])],64)}const O=C(A,[["render",D],["__scopeId","data-v-79d0baba"]]);export{O as default};
