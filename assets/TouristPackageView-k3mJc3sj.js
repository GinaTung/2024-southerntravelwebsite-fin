import{_ as p,c as _,a as e,b as a,w as c,e as m,r as h,o as f,d as n}from"./index-Pkf9mfWJ.js";const r="http://localhost:3000",b={data(){return{text:"南部旅遊方案",products:[],user:"",newProductsDes:"",enabledProducts:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[]}},methods:{checkAdmin(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),this.axios.defaults.headers.common.Authorization=this.token,this.token?(console.log(token,user),this.axios.post(`${r}/api/users/${user}`).then(s=>{this.userIsLoggedIn=!0}).catch(s=>{this.userIsLoggedIn=!1,alert("管理者身分驗證失敗，自動跳轉至登入頁面"),this.$router.push({path:"/admin/adminlogin"})})):(alert("目前未登入管理者身分，請重新登入"),this.$router.push({path:"/admin/adminlogin"}))},getProducts(){this.axios.get(`${r}/products`).then(s=>{console.log(s),this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.enabledProducts.push(t)}),this.getNewText()}).catch(s=>{console.log(s)})},truncateContent(s,t){return s&&s.length>t?s.substring(0,t)+"...":s},getNewText(){const s={};this.products.forEach(t=>{t.description&&t.description.split(";").forEach(l=>{const d=l.trim();s[t.id]||(s[t.id]=[]),s[t.id].push(d)})}),this.newProductsDes=Object.entries(s).map(([t,o])=>({id:t,descriptions:o}))},searchProducts(){this.axios.get(`${r}/products?category=嘉義`).then(s=>{this.products=s.data,this.products.forEach(t=>{t.is_enabled===1&&this.searchChiayi.push(t)}),console.log(this.searchChiayi)}).catch(s=>{alert(`${s.message}`)})}},mounted(){this.getProducts()}},g={class:"container py-10 py-lg-30"},v={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-20"},k={class:"breadcrumb mb-0 fs-5"},x={class:"breadcrumb-item"},w=e("li",{class:"breadcrumb-item active","aria-current":"page"},"南部旅遊方案",-1),y={class:"tourist-list"},$={class:"row"},T={class:"col-12 col-md-3 mb-5 mb-md-6 mb-lg-0 d-none d-md-flex"},P={class:"border-info2 border-1 border"},N=e("p",{class:"fs-4 p-5 bg-primary-500 text-white"},"地區篩選",-1),C={class:"nav flex-column attractions-select"},j={class:"nav-item"},E=e("span",{class:"attractionsNum2"},null,-1),V={class:"nav-item"},I=m('<li class="nav-item"><a class="nav-link p-5 fs-5 link-color d-flex justify-content-between" href="#" data-name="台南">台南<span class="attractionsNum2">0</span></a></li><li class="nav-item"><a class="nav-link p-5 fs-5 link-color d-flex justify-content-between" data-name="高雄">高雄<span class="attractionsNum2">0</span></a></li>',2),B={class:"col-12 col-md-9"};function D(s,t,o,l,d,A){const i=h("router-link"),u=h("router-view");return f(),_("div",g,[e("nav",v,[e("ol",k,[e("li",x,[a(i,{to:"/",class:"navbar-brand py-6"},{default:c(()=>[n(" 首頁 ")]),_:1})]),w])]),e("div",y,[e("div",$,[e("div",T,[e("div",P,[N,e("ul",C,[e("li",j,[a(i,{class:"nav-link p-5 fs-5 link-color active d-flex justify-content-between","data-name":"全部","aria-current":"page",to:"/TouristPackage/all"},{default:c(()=>[n("全部區域"),E]),_:1})]),e("li",V,[a(i,{class:"nav-link p-5 fs-5 link-color d-flex justify-content-between",to:"/TouristPackage/searchChiayi","data-name":"嘉義"},{default:c(()=>[n("嘉義")]),_:1})]),I])])]),e("div",B,[a(u)])])])])}const K=p(b,[["render",D]]);export{K as default};
