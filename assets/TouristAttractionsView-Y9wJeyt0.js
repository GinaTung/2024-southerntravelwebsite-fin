import{_ as P,c as o,b as p,a as t,w as f,g as x,t as n,j as A,F as g,h as b,n as u,A as _,r as C,o as r,d as y}from"./index-36QR2t1j.js";const v="https://two024-south-json-server-vercel.onrender.com",w={data(){return{allAttractions:[],enabledAttractions:[],searchChiayi:[],serchTainan:[],searchKaohsiung:[],fullPath:"",currentURL:"",selectedCategory:"全部",currentPage:1,limitPage:6,pageTotal:0,attractionsCategory:[],isLoading:!1,status:{loadingItem:!1},category:"全部"}},computed:{filterCategory(){const s=this.attractionsCategory.map(c=>c.category),e=[...new Set(s)];return e.unshift("全部"),e},filterCateNum(){const s={};return this.attractionsCategory.forEach(e=>{s[e.category]?s[e.category]+=1:s[e.category]=1}),s.全部=this.attractionsCategory.length,s},filteredProducts(){return this.selectedCategory==="全部"||!this.selectedCategory?this.enabledAttractions:this.enabledAttractions.filter(s=>s.category===this.selectedCategory)}},watch:{$route(s,e){this.currentURL=s.fullPath,this.$root.navigatedFromHeader&&s.fullPath!=="/TouristAttractions"&&(this.selectedCategory="全部",this.status.loadingItem=!0,this.getAttractions(),this.$root.navigatedFromHeader=!1)}},created(){this.category=this.$route.query.category,this.selectedCategory=this.category,this.getAttractions()},methods:{getAttractions(s=1){this.axios.get(`${v}/attractions`).then(e=>{this.attractionsCategory=e.data.filter(c=>c.is_enabled===1),setTimeout(()=>{this.isLoading=!1},1e3)}).catch(e=>{alert(`${e.message}`)}),this.selectedCategory==="全部"||!this.selectedCategory?this.axios.get(`${v}/attractions?_limit=${this.limitPage}&_page=${s}`).then(e=>{var c=parseInt(e.headers["x-total-count"]);this.pageTotal=Math.ceil(c/this.limitPage),this.currentPage=s,this.allAttractions=e.data,this.enabledAttractions=this.allAttractions.filter(d=>d.is_enabled===1),this.status.loadingItem=!1,this.$router.push({path:"/TouristAttractions",query:{category:this.selectedCategory,page:this.currentPage}}),window.scrollTo(0,0)}).catch(e=>{alert(`${e.message}`)}):this.axios.get(`${v}/attractions?category=${this.selectedCategory}&_limit=${this.limitPage}&_page=${s}`).then(e=>{var c=parseInt(e.headers["x-total-count"]);this.pageTotal=Math.ceil(c/this.limitPage),this.currentPage=s,this.allAttractions=e.data,this.enabledAttractions=this.allAttractions.filter(d=>d.is_enabled===1),this.status.loadingItem=!1,this.$router.push({path:"/TouristAttractions",query:{category:this.selectedCategory,page:this.currentPage}}),window.scrollTo(0,0)}).catch(e=>{alert(`${e.message}`)})},filterProducts(s){this.selectedCategory=s,this.status.loadingItem=!0,this.getAttractions()},truncateContent(s,e){return s&&s.length>e?s.substring(0,e)+"...":s}},mounted(){this.isLoading=!0,this.getAttractions(),window.scrollTo(0,0),this.fullPath=this.$route.fullPath}},T={class:"container py-10 py-lg-30"},L={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-15"},N={class:"breadcrumb mb-0 fs-5"},V={class:"breadcrumb-item"},j={class:"breadcrumb-item","aria-current":"page"},q={key:1},B={key:0,class:"breadcrumb-item","aria-current":"page"},F={class:"tourist-list"},I={class:"row"},M={class:"col-12 col-md-3 mb-5 mb-md-6 mb-lg-0 d-none d-lg-flex"},S={class:"border-1 border w-100 rounded-1 h-100"},U=t("p",{class:"fs-4 p-5 bg-primary-500 text-white"},"地區篩選",-1),z={class:"nav flex-column"},E=["onClick"],H={class:"col-12 col-lg-9"},R={key:0,class:"text-center",style:{margin:"150px"}},D=t("div",{class:"spinner-border",role:"status",style:{width:"3rem",height:"3rem",color:"#43b8bd"}},[t("span",{class:"visually-hidden"},"Loading...")],-1),K=[D],$={key:1},G={class:"row g-3"},J={class:"card card-att h-100"},O={class:"tag text-white"},Q={class:"card-att-img"},W=["src"],X=t("div",{class:"heart3"},[t("i",{class:"bi bi-heart heart-click"})],-1),Y={style:{transform:"rotate(0)"}},Z={class:"card-body card-body-att"},tt={class:"card-title d-flex justify-content-between align-items-center card-title-att"},et={class:"fs-5 fs-xl-4 fw-bold text-primary-700 card-title-att"},st={class:"card-text card-font-truncate"},at={class:"card-footer text-end border-0"},it={"aria-label":"Page navigation example",class:"my-10"},rt={class:"pagination justify-content-center"},ot=["onClick"];function ct(s,e,c,d,a,l){const k=C("VueLoading"),m=C("router-link");return r(),o(g,null,[p(k,{active:a.isLoading,class:"text-center","z-index":1060},null,8,["active"]),t("div",T,[t("nav",L,[t("ol",N,[t("li",V,[p(m,{to:"/",exact:"","active-class":"active-link"},{default:f(()=>[y("首頁")]),_:1})]),t("li",j,[a.fullPath!=="/TouristAttractions"?(r(),x(m,{key:0,to:{path:"/TouristAttractions"},exact:"","active-class":"active-link"},{default:f(()=>[y(" 南部旅遊景點 ")]),_:1})):(r(),o("span",q," 南部旅遊景點 "))]),a.selectedCategory!=="全部"?(r(),o("li",B,[t("span",null,n(a.selectedCategory),1)])):A("",!0)])]),t("div",F,[t("div",I,[t("div",M,[t("div",S,[U,t("ul",z,[(r(!0),o(g,null,b(l.filterCategory,(i,h)=>(r(),o("li",{class:"nav-item",key:h},[t("a",{class:u(["nav-link p-5 fs-5 link-color d-flex justify-content-between",{"active-category":a.selectedCategory===i}]),href:"#","aria-current":"page",onClick:_(lt=>l.filterProducts(i),["prevent"])},[y(n(i)+" ",1),t("span",null,n(l.filterCateNum[i]),1)],10,E)]))),128))])])]),t("div",H,[a.status.loadingItem?(r(),o("div",R,K)):(r(),o("div",$,[t("div",G,[(r(!0),o(g,null,b(l.filteredProducts,(i,h)=>(r(),o("div",{class:"col-12 col-md-6 col-lg-4",key:h+123},[t("div",J,[t("span",O,n(i.category),1),t("div",Q,[t("img",{src:i.imageUrl,class:"img-fluid",alt:""},null,8,W)]),X,t("div",Y,[t("div",Z,[t("div",tt,[t("h4",et,n(i.title),1)]),t("p",st,n(l.truncateContent(i.description,65)),1)]),t("div",at,[p(m,{to:{name:"TouristSingleAttraction",params:{category:i.category,title:i.title}},class:"fs-5 stretched-link"},{default:f(()=>[y("more")]),_:2},1032,["to"])])])])]))),128))]),t("nav",it,[t("ul",rt,[t("li",{class:u(["page-item",{disabled:!a.currentPage||a.currentPage===1}])},[t("button",{class:"page-link page-link-radius-2",onClick:e[0]||(e[0]=_(i=>a.currentPage>1&&l.getAttractions(a.currentPage-1),["prevent"]))}," 上一頁 ")],2),(r(!0),o(g,null,b(a.pageTotal,i=>(r(),o("li",{class:"page-item",key:`page-${i}`},[t("button",{class:u(["page-link page-link-0 rounded-0",{active:i===a.currentPage}]),onClick:_(h=>l.getAttractions(i),["prevent"])},n(i),11,ot)]))),128)),t("li",{class:u(["page-item",{disabled:!a.currentPage||a.currentPage===a.pageTotal}])},[t("button",{class:"page-link page-link-radius",onClick:e[1]||(e[1]=_(i=>a.currentPage<a.pageTotal&&l.getAttractions(a.currentPage+1),["prevent"]))}," 下一頁 ")],2)])])]))])])])])],64)}const dt=P(w,[["render",ct]]);export{dt as default};
