import{g as q,i as H,e as G,S as J,a as K,N as Q}from"./navigation-ctqqT1Jd.js";import{f as R,L as W}from"./LikeBlock-hmfulwW7.js";import{M as X}from"./modal-Qs8p7S99.js";import{s as _}from"./sweetAlert-v5bt2MnZ.js";import{_ as D,l as Y,o,c as l,b as I,w as S,F as g,h as y,g as j,a as t,r as C,p as U,f as V,j as E,m as O,t as T,n as Z,d as B,k as F,e as N}from"./index--UaHxLc5.js";import{B as ee}from"./BannerBlock-Rn5I6nXJ.js";import"./selector-engine-E2wE97Q_.js";function te(a){let{swiper:e,extendParams:p,on:d}=a;p({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let i=!1,b=!1;e.thumbs={swiper:null};function u(){const r=e.thumbs.swiper;if(!r||r.destroyed)return;const s=r.clickedIndex,h=r.clickedSlide;if(h&&h.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof s>"u"||s===null)return;let n;r.params.loop?n=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10):n=s,e.params.loop?e.slideToLoop(n):e.slideTo(n)}function w(){const{thumbs:r}=e.params;if(i)return!1;i=!0;const s=e.constructor;if(r.swiper instanceof s)e.thumbs.swiper=r.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(H(r.swiper)){const h=Object.assign({},r.swiper);Object.assign(h,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new s(h),b=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",u),!0}function v(r){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const h=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():s.params.slidesPerView;let n=1;const c=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(n=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),s.slides.forEach(f=>f.classList.remove(c)),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let f=0;f<n;f+=1)G(s.slidesEl,`[data-swiper-slide-index="${e.realIndex+f}"]`).forEach(m=>{m.classList.add(c)});else for(let f=0;f<n;f+=1)s.slides[e.realIndex+f]&&s.slides[e.realIndex+f].classList.add(c);const x=e.params.thumbs.autoScrollOffset,L=x&&!s.params.loop;if(e.realIndex!==s.realIndex||L){const f=s.activeIndex;let m,M;if(s.params.loop){const $=s.slides.filter(z=>z.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];m=s.slides.indexOf($),M=e.activeIndex>e.previousIndex?"next":"prev"}else m=e.realIndex,M=m>e.previousIndex?"next":"prev";L&&(m+=M==="next"?x:-1*x),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(m)<0&&(s.params.centeredSlides?m>f?m=m-Math.floor(h/2)+1:m=m+Math.floor(h/2)-1:m>f&&s.params.slidesPerGroup,s.slideTo(m,r?0:void 0))}}d("beforeInit",()=>{const{thumbs:r}=e.params;if(!(!r||!r.swiper))if(typeof r.swiper=="string"||r.swiper instanceof HTMLElement){const s=q(),h=()=>{const c=typeof r.swiper=="string"?s.querySelector(r.swiper):r.swiper;if(c&&c.swiper)r.swiper=c.swiper,w(),v(!0);else if(c){const x=L=>{r.swiper=L.detail[0],c.removeEventListener("init",x),w(),v(!0),r.swiper.update(),e.update()};c.addEventListener("init",x)}return c},n=()=>{if(e.destroyed)return;h()||requestAnimationFrame(n)};requestAnimationFrame(n)}else w(),v(!0)}),d("slideChange update resize observerUpdate",()=>{v()}),d("setTransition",(r,s)=>{const h=e.thumbs.swiper;!h||h.destroyed||h.setTransition(s)}),d("beforeDestroy",()=>{const r=e.thumbs.swiper;!r||r.destroyed||b&&r.destroy()}),Object.assign(e.thumbs,{init:w,update:v})}const se="https://two024-south-json-server-vercel.onrender.com",ae={components:{Swiper:J,SwiperSlide:K},data(){return{attractionTitle:"",attractions:[],enabledAttractions:[],imagesUrl:"",showModal:!1,modalImageFilePath:"",modalImageIndex:0,bigModal:null}},methods:{openModal(a,e){this.bigModal.show(),this.modalImageFilePath=a,this.modalImageIndex=e,this.showModal=!0},getAttractions(){this.axios.get(`${se}/attractions`).then(a=>{this.attractions=a.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&this.enabledAttractions.push(e)}),this.imagesUrl=this.enabledAttractions[0].imagesUrl}).catch(a=>{_.threeLayerCheckType("error","取得景點資料失敗")})}},setup(){const a=Y(null);return{thumbsSwiper:a,setThumbsSwiper:p=>{a.value=p},modules:[R,Q,te]}},mounted(){this.bigModal=new X(this.$refs.bigModal,{keyboard:!1,backdrop:"static"}),this.attractionTitle=this.$route.params.title,this.getAttractions()}},P=a=>(U("data-v-1ea3f35b"),a=a(),V(),a),ie=["src"],re=["onClick"],oe=P(()=>t("i",{class:"bi bi-zoom-in fs-2"},null,-1)),ne=[oe],le=P(()=>t("button",{class:"swiper-button-next border-0 bg-transparent"},null,-1)),de=P(()=>t("button",{class:"swiper-button-prev border-0 bg-transparent"},null,-1)),ce=["src"],pe={class:"modal fade",id:"bigModal",tabindex:"-1","aria-labelledby":"bigModalLabel","aria-hidden":"true",ref:"bigModal"},he={class:"modal-dialog modal-dialog-centered modal-xl"},ue={class:"modal-content bg-transparent"},me={class:"modal-body p-0"},be=["src"],fe=P(()=>t("button",{type:"button",class:"border-0 bg-transparent position-absolute top-3 end-3 p-3","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"bi bi-x-lg text-secondary-400 fs-3"})],-1));function ve(a,e,p,d,i,b){const u=C("swiper-slide"),w=C("swiper");return o(),l(g,null,[I(w,{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:d.thumbsSwiper},modules:d.modules,class:"mySwiper2"},{default:S(()=>[(o(!0),l(g,null,y(i.imagesUrl,(v,r)=>(o(),j(u,{key:r+123},{default:S(()=>[t("img",{src:v,class:"img-fluid"},null,8,ie),t("button",{class:"position-absolute text-white end-5 bottom-5 fs-4 bg-transparent border-0",onClick:s=>b.openModal(v,r)},ne,8,re)]),_:2},1024))),128)),le,de]),_:1},8,["navigation","thumbs","modules"]),I(w,{onSwiper:d.setThumbsSwiper,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:d.modules,class:"mySwiper3"},{default:S(()=>[(o(!0),l(g,null,y(i.imagesUrl,(v,r)=>(o(),j(u,{key:r+123},{default:S(()=>[t("img",{src:v,class:"img-fluid"},null,8,ce)]),_:2},1024))),128))]),_:1},8,["onSwiper","modules"]),t("div",pe,[t("div",he,[t("div",ue,[t("div",me,[t("img",{src:i.modalImageFilePath,class:"modal-content position-relative"},null,8,be),fe])])])],512)],64)}const ge=D(ae,[["render",ve],["__scopeId","data-v-1ea3f35b"]]),A="https://two024-south-json-server-vercel.onrender.com",we={components:{singleAttraction:ge,BannerBlock:ee,LikeBlock:W},data(){return{category:"",attractionTitle:"",attractions:[],enabledAttractions:[],newAttractionsContent:"",newAttractionsTimeOpen:"",attractionId:"",heartData:[],isFavorite:{},userId:"",token:"",isLoading:!1,attractionImageUrl:""}},methods:{redirectToA(a){this.$router.push({path:"/TouristAttractions",query:{category:a}})},getHeartData(){this.axios.get(`${A}/hearts`).then(a=>{a.data.forEach(e=>{e.userId===this.userId&&e.tag==="旅遊景點"&&(this.isFavorite[e.product]=!0)})}).catch(a=>{_.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(a,e,p,d){this.token?this.axios.get(`${A}/hearts`).then(i=>{const b=i.data.find(u=>u.product===a&&u.userId===this.userId&&u.tag==="旅遊景點");b?this.axios.delete(`${A}/hearts/${b.id}`).then(u=>{this.isFavorite[a]=!1,_.threeLayerCheckType("success",`取消收藏 ${p} 成功`),this.getHeartData()}).catch(u=>{_.threeLayerCheckType("error","取消收藏資料失敗")}):this.axios.post(`${A}/hearts`,{product:a,category:e,title:p,userId:this.userId,tag:"旅遊景點",imageUrl:d}).then(u=>{this.isFavorite[a]=!0,_.threeLayerCheckType("success",`已加入收藏 ${p} 成功`),this.getHeartData()}).catch(u=>{_.threeLayerCheckType("error","收藏資料失敗")})}).catch(i=>{_.threeLayerCheckType("error","取得愛心收藏資料失敗")}):_.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getAttractions(){this.axios.get(`${A}/attractions`).then(a=>{this.attractions=a.data,this.attractions.forEach(e=>{e.is_enabled===1&&this.attractionTitle===e.title&&(this.enabledAttractions.push(e),this.attractionId=e.id,this.isLoading=!1,this.attractionImageUrl=e.imageUrl)}),this.getNewText(),this.getnewAttractionsTimeOpen()}).catch(()=>{_.threeLayerCheckType("error","取得景點資料失敗")})},getNewText(){const a={};this.attractions.forEach(e=>{e.content&&e.content.split(";").forEach(d=>{const i=d.trim();a[e.id]||(a[e.id]=[]),a[e.id].push(i)})}),this.newProductsContent=Object.entries(a).map(([e,p])=>({id:e,content:p}))},getnewAttractionsTimeOpen(){const a={};this.attractions.forEach(e=>{e.content&&e.timeOpen.split(";").forEach(d=>{const i=d.trim();a[e.id]||(a[e.id]=[]),a[e.id].push(i)})}),this.newAttractionsTimeOpen=Object.entries(a).map(([e,p])=>({id:e,content:p}))},getCookie(a){const e=document.cookie.split(";");for(let p of e){const[d,i]=p.trim().split("=");if(d===a)return i}return null}},mounted(){this.category=this.$route.params.category,this.attractionTitle=this.$route.params.title;const a=this.getCookie("userId"),e=this.getCookie("hexTokenU");this.userId=a*1,this.token=e,this.isLoading=!0,this.getAttractions(),this.getHeartData(),window.scrollTo(0,0)}},k=a=>(U("data-v-3547da98"),a=a(),V(),a),_e={class:"container py-10 py-lg-30 px-lg-20"},ye={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"pb-5 pb-lg-15"},ke={class:"breadcrumb mb-0 fs-5"},xe={class:"breadcrumb-item"},Te={class:"breadcrumb-item"},Ie={class:"breadcrumb-item"},Se={class:"breadcrumb-item"},Ce={key:0,class:"d-flex"},Ae=k(()=>t("div",{class:"w-5 d-none d-xl-flex"},[t("i",{class:"bi bi-geo-alt-fill position-relative fs-5"},[t("div",{class:"line"}),t("i",{class:"bi bi-arrow-down-circle-fill arrow"})])],-1)),Le={class:"w-100 w-xl-95 position-relative pe-0"},Pe={class:"d-flex align-items-center mb-4 fs-3 border-start border-primary-500 border-5"},Me=k(()=>t("span",{class:"placeholder w-50 fs-4 ms-2"},null,-1)),Ee=k(()=>t("i",{class:"bi bi-heart"},null,-1)),Oe=[Ee],Fe=k(()=>t("div",{class:"row"},[t("div",{class:"w-100 mb-4"},[t("div",{class:"card-att-img card-att-img-2"},[t("img",{src:"https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg",class:"img-fluid pb-4 pb-lg-0 opacity-25",alt:"Placeholder Image"})])])],-1)),je={class:"d-flex align-items-center mb-4 fs-3 border-start border-primary-500 border-5"},Be={class:"fs-3 me-2 fw-bold ps-3"},De={class:"fs-3 me-4 fw-bold"},Ue={key:2,class:"row g-3"},Ve=N('<div class="tourist-intr-content my-lg-10 my-8" data-v-3547da98><div class="mb-8" data-v-3547da98><p class="fs-5 fs-md-4 fw-bold mb-4" data-v-3547da98>景點介紹</p><span class="placeholder w-100" data-v-3547da98></span><span class="placeholder w-100" data-v-3547da98></span><span class="placeholder w-75" data-v-3547da98></span><span class="placeholder w-50" data-v-3547da98></span></div><div class="mb-8" data-v-3547da98><span class="fs-5 fs-md-4 mb-4 fw-bold" data-v-3547da98>開放時間：</span><span class="placeholder w-100" data-v-3547da98></span><span class="placeholder w-100" data-v-3547da98></span><span class="placeholder w-50" data-v-3547da98></span></div><div data-v-3547da98><p class="fs-5 fs-md-4 mb-3 fw-bold" data-v-3547da98>交通資訊：</p><div class="row" data-v-3547da98><div class="d-flex col-12 col-lg-7 flex-column" data-v-3547da98><span class="placeholder w-75 mb-3" data-v-3547da98></span><span class="placeholder w-50 mb-3" data-v-3547da98></span><span class="placeholder w-100" data-v-3547da98></span></div><div class="col-12 col-lg-5" data-v-3547da98><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid pb-4 pb-lg-0 opacity-25" alt="Placeholder Image" data-v-3547da98></div></div></div></div>',1),Ne=[Ve],$e={key:0},ze={class:"tourist-intr-content my-lg-10 my-8"},qe={class:"mb-8"},He=k(()=>t("p",{class:"fs-5 fs-md-4 fw-bold mb-4"},"景點介紹",-1)),Ge={class:"fs-6 fs-md-5"},Je={class:"mb-8"},Ke=k(()=>t("span",{class:"fs-5 fs-md-4 mb-4 fw-bold"},"開放時間：",-1)),Qe={key:0},Re=k(()=>t("p",{class:"fs-5 fs-md-4 mb-3 fw-bold"},"交通資訊：",-1)),We={class:"row"},Xe={class:"d-flex col-12 col-lg-7 justify-content-between flex-column"},Ye={key:0},Ze={class:"col-12 col-lg-5"},et=["src"],tt={key:4,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},st=N('<div class="card card-att h-100" data-v-3547da98><span class="tag text-white placeholder-glow" data-v-3547da98></span><button class="heart border-0" aria-label="heart" data-v-3547da98><i class="bi bi-heart heart-click" data-v-3547da98></i></button><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" data-v-3547da98><div class="card-body" data-v-3547da98><span class="placeholder w-25" data-v-3547da98></span><div class="col-12 placeholder-glow" data-v-3547da98><span class="placeholder w-50" data-v-3547da98></span><span class="placeholder w-60" data-v-3547da98></span></div></div><div class="card-footer text-end border-0 pt-0 pb-3 placeholder-glow" data-v-3547da98><div class="d-flex justify-content-between" data-v-3547da98><span class="placeholder w-25" data-v-3547da98></span><span class="placeholder w-25" data-v-3547da98></span></div></div></div>',1),at=[st];function it(a,e,p,d,i,b){const u=C("BannerBlock"),w=C("router-link"),v=C("singleAttraction"),r=C("LikeBlock");return o(),l(g,null,[I(u),t("div",_e,[t("nav",ye,[t("ol",ke,[t("li",xe,[I(w,{to:"/",exact:"","active-class":"active-link"},{default:S(()=>[B("首頁")]),_:1})]),t("li",Te,[I(w,{exact:"","active-class":"active-link",to:{path:"/TouristAttractions",query:{category:"全部",page:"1"}}},{default:S(()=>[B(" 南部旅遊景點 ")]),_:1})]),t("li",Ie,[E(t("button",{onClick:e[0]||(e[0]=s=>b.redirectToA("台南")),class:"bg-transparent border-0 btn-hover text-dark",type:"button","aria-label":"台南"}," 台南 ",512),[[O,i.category==="台南"]]),E(t("button",{onClick:e[1]||(e[1]=s=>b.redirectToA("嘉義")),class:"bg-transparent border-0 btn-hover text-dark",type:"button","aria-label":"嘉義"}," 嘉義 ",512),[[O,i.category==="嘉義"]]),E(t("button",{onClick:e[2]||(e[2]=s=>b.redirectToA("高雄")),class:"bg-transparent border-0 btn-hover text-dark",type:"button","aria-label":"高雄"}," 高雄 ",512),[[O,i.category==="高雄"]])]),t("li",Se,T(i.attractionTitle),1)])]),i.isLoading?(o(),l("div",Ce,[Ae,t("div",Le,[t("div",Pe,[Me,t("button",{class:"border-0 heart-position-none fs-3 bg-transparent",onClick:e[3]||(e[3]=s=>b.toggleFavorite(i.attractionId,i.category,i.attractionTitle,i.attractionImageUrl)),type:"button","aria-label":"heart"},Oe)]),Fe])])):(o(),l(g,{key:1},[t("div",je,[t("span",Be,T(i.category),1),t("p",De,T(i.attractionTitle),1),t("button",{class:"border-0 heart-position-none fs-3 bg-transparent",onClick:e[4]||(e[4]=s=>b.toggleFavorite(i.attractionId,i.category,i.attractionTitle,i.attractionImageUrl)),type:"button","aria-label":"heart"},[t("i",{class:Z(["bi",{"bi-heart-fill":i.isFavorite[i.attractionId],"bi-heart":!i.isFavorite[i.attractionId]}])},null,2)])]),I(v)],64)),i.isLoading?(o(),l("div",Ue,Ne)):(o(!0),l(g,{key:3},y(i.enabledAttractions,(s,h)=>(o(),l("div",{class:"row g-3",key:s.id},[h===0?(o(),l("div",$e,[t("div",ze,[t("div",qe,[He,t("p",Ge,T(s.description),1)]),t("div",Je,[Ke,(o(!0),l(g,null,y(i.newAttractionsTimeOpen,n=>(o(),l("div",{key:n.id},[n.id===s.id?(o(),l("div",Qe,[(o(!0),l(g,null,y(n.content,c=>(o(),l("p",{key:c+123,class:"fs-6 fs-md-5 my-4"},T(c),1))),128))])):F("",!0)]))),128))]),t("div",null,[Re,t("div",We,[t("div",Xe,[(o(!0),l(g,null,y(a.newProductsContent,n=>(o(),l("div",{key:n.id},[n.id===s.id?(o(),l("div",Ye,[(o(!0),l(g,null,y(n.content,c=>(o(),l("p",{key:c,class:"fs-6 fs-md-5 my-4 mb-4"},T(c),1))),128))])):F("",!0)]))),128))]),t("div",Ze,[t("iframe",{src:s.imgMap,width:"100%",height:"100%",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,et)])])])])])):F("",!0)]))),128)),i.isLoading?(o(),l("div",tt,[(o(),l(g,null,y(3,s=>t("div",{key:s,class:"col"},at)),64))])):(o(),j(r,{key:5,adCategoryTitle:"attractions",token:i.token,"user-id":i.userId},null,8,["token","user-id"]))])],64)}const ht=D(we,[["render",it],["__scopeId","data-v-3547da98"]]);export{ht as default};
