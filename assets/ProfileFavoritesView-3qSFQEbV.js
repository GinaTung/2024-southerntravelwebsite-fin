import{s as d}from"./sweetAlert-b0-4TDdF.js";import{_ as w,c as a,a as e,F as l,i as u,o as i,n as y,g as b,t as g,b as k,w as m,p as I,f as D,r as C,e as x}from"./index-GO2aMmAA.js";const p="https://two024-south-json-server-vercel.onrender.com",F={data(){return{userId:"",token:"",heartData:[],heartData2:[],heartCategory:"全部",heartCategory2:"全部",isFavorite:{},isLoading:!1,pageName:"",status:{loadingItem:!1,loadingItem2:!1}}},methods:{getHeartData(s="全部"){this.status.loadingItem2=!0,this.pageName="旅遊景點",this.heartCategory=s,s==="全部"?this.axios.get(`${p}/hearts?userId=${this.userId}&tag=旅遊景點`).then(r=>{this.heartData=r.data,this.isLoading=!1,this.status.loadingItem2=!1,this.heartData.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(r=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")}):this.axios.get(`${p}/hearts?category=${s}&userId=${this.userId}&tag=旅遊景點`).then(r=>{this.heartData=r.data,this.status.loadingItem2=!1,this.heartData.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(r=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")})},getHeartData2(s="全部"){this.status.loadingItem=!0,this.heartCategory2=s,this.pageName="旅遊方案",s==="全部"?this.axios.get(`${p}/hearts?userId=${this.userId}&tag=旅遊方案`).then(r=>{this.heartData2=r.data,this.isLoading=!1,this.status.loadingItem=!1,this.heartData2.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(r=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")}):this.axios.get(`${p}/hearts?category=${s}&userId=${this.userId}&tag=旅遊方案`).then(r=>{this.heartData2=r.data,this.status.loadingItem=!1,this.heartData2.forEach(c=>{this.isFavorite[c.product]=!0})}).catch(r=>{d.threeLayerCheckType("error","取得愛心收藏資料失敗")})},toggleFavorite(s,r,c,v){this.token?this.axios.get(`${p}/hearts?category=${r}&userId=${this.userId}&tag=${v}`).then(o=>{const n=o.data.find(h=>h.product===s);n&&this.axios.delete(`${p}/hearts/${n.id}`).then(h=>{this.isFavorite[s]=!1,d.threeLayerCheckType("success",`取消收藏 ${c} 成功`),this.getHeartData(),this.getHeartData2()}).catch(h=>{d.threeLayerCheckType("error","取消收藏資料失敗")})}):d.threeLayerCheckType("warning","請登入會員後，才能加入收藏")},getCookie(s){const r=document.cookie.split(";");for(let c of r){const[v,o]=c.trim().split("=");if(v===s)return o}return null}},mounted(){window.scrollTo(0,0),this.isLoading=!0;const s=this.getCookie("userId"),r=this.getCookie("hexTokenU");this.userId=s*1,this.token=r,this.getHeartData(),this.getHeartData2()}},_=s=>(I("data-v-8b84516d"),s=s(),D(),s),L=_(()=>e("div",{class:"d-flex justify-content-center align-items-center w-100"},[e("span",{class:"line"}),e("h5",{class:"flex-grow-1 fs-6 fs-lg-5 text-center"},"南部旅遊景點"),e("span",{class:"line"})],-1)),T={class:"d-flex justify-content-center align-items-center my-5"},j=["onClick"],S={key:0,class:"row g-3 py-8"},H=x('<div class="card card-att h-100" data-v-8b84516d><span class="tag text-white" data-v-8b84516d></span><div class="heart" data-v-8b84516d><i class="bi bi-heart heart-click" data-heartStatus="false" data-v-8b84516d></i></div><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" style="height:180px;" data-v-8b84516d><div class="card-body placeholder-glow" data-v-8b84516d><span class="placeholder w-50 text-center" data-v-8b84516d></span></div></div>',1),N=[H],$={key:1,class:"row g-3 py-8"},z={key:0,class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},E=_(()=>e("h3",{class:"text-center"},"無收藏資料",-1)),P=[E],U={key:0,class:"text-center py-20"},V=_(()=>e("div",{class:"spinner-border",role:"status",style:{width:"3rem",height:"3rem",color:"#43b8bd"}},[e("span",{class:"visually-hidden"},"Loading...")],-1)),B=[V],q={class:"card h-100"},A=["src"],G={class:"tag text-white"},M=["onClick"],J={class:"card-body"},K={class:"fs-6 fs-xl-5 fw-bold text-primary-700 card-title stretched-link text-center"},O=_(()=>e("div",{class:"d-flex justify-content-center align-items-center w-100"},[e("span",{class:"line"}),e("h5",{class:"flex-grow-1 fs-6 fs-lg-5 text-center"},"南部旅遊方案"),e("span",{class:"line"})],-1)),Q={class:"d-flex justify-content-center align-items-center my-5"},R=["onClick"],W={key:2,class:"row g-3 py-8"},X=x('<div class="card card-att h-100" data-v-8b84516d><span class="tag text-white" data-v-8b84516d></span><div class="heart" data-v-8b84516d><i class="bi bi-heart heart-click" data-heartStatus="false" data-v-8b84516d></i></div><img src="https://raw.githubusercontent.com/GinaTung/2024-southerntravelwebsite-fin/dev/public/products/duck.jpg" class="img-fluid opacity-25 first-img z-index-1" alt="Placeholder Image" style="height:180px;" data-v-8b84516d><div class="card-body placeholder-glow" data-v-8b84516d><span class="placeholder w-50 text-center" data-v-8b84516d></span></div></div>',1),Y=[X],Z={key:3,class:"row g-3 py-8"},tt={key:0,class:"col-12 w-100 bg-primary-200 d-flex align-items-center justify-content-center rounded-1",style:{height:"260px"}},et=_(()=>e("h3",{class:"text-center"},"無收藏資料",-1)),st=[et],at={key:0,class:"text-center py-20"},it=_(()=>e("div",{class:"spinner-border",role:"status",style:{width:"3rem",height:"3rem",color:"#43b8bd"}},[e("span",{class:"visually-hidden"},"Loading...")],-1)),rt=[it],ot={class:"card h-100"},ct=["src"],lt={class:"tag text-white"},nt=["onClick"],dt={class:"card-body"},ht={class:"fs-6 fs-xl-5 fw-bold text-primary-700 card-title stretched-link text-center",style:{}};function ut(s,r,c,v,o,n){const h=C("router-link");return i(),a(l,null,[L,e("div",T,[(i(),a(l,null,u(["全部","嘉義","台南","高雄"],t=>e("button",{key:t,type:"button",class:y(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory===t}]),onClick:b(f=>n.getHeartData(t),["prevent"])},g(t),11,j)),64))]),o.isLoading&o.pageName==="旅遊景點"?(i(),a("div",S,[(i(),a(l,null,u(3,t=>e("div",{key:t,class:"col-12 col-md-6 col-lg-4"},N)),64))])):(i(),a("div",$,[o.heartData.length===0?(i(),a("div",z,P)):(i(),a(l,{key:1},[o.status.loadingItem2?(i(),a("div",U,B)):(i(!0),a(l,{key:1},u(o.heartData,t=>(i(),a("div",{class:"col-12 col-md-6 col-lg-4",key:t.id},[e("div",q,[e("img",{src:t.imageUrl,class:"img-fluid h-100 card-radius",alt:"item.title",style:{height:"180px"}},null,8,A),e("span",G,g(t.category),1),e("button",{class:"heart border-0",onClick:f=>n.toggleFavorite(t.product,t.category,t.title,"旅遊景點"),type:"button"},[e("i",{class:y(["bi",{"bi-heart-fill":o.isFavorite[t.product],"bi-heart":!o.isFavorite[t.product]}]),style:{"font-size":"24px"}},null,2)],8,M),e("div",J,[k(h,{to:{name:"TouristSingleAttraction",params:{category:t.category,title:t.title}}},{default:m(()=>[e("h4",K,g(t.title),1)]),_:2},1032,["to"])])])]))),128))],64))])),O,e("div",Q,[(i(),a(l,null,u(["全部","嘉義","台南","高雄"],t=>e("button",{key:t,type:"button",class:y(["btn-outline-turquoise px-lg-10 mx-2 mx-lg-4 rounded-1",{active:this.heartCategory2===t}]),onClick:b(f=>n.getHeartData2(t),["prevent"])},g(t),11,R)),64))]),o.isLoading&o.pageName==="旅遊方案"?(i(),a("div",W,[(i(),a(l,null,u(3,t=>e("div",{key:t,class:"col-12 col-md-6 col-lg-4"},Y)),64))])):(i(),a("div",Z,[o.heartData2.length===0?(i(),a("div",tt,st)):(i(),a(l,{key:1},[o.status.loadingItem?(i(),a("div",at,rt)):(i(!0),a(l,{key:1},u(o.heartData2,t=>(i(),a("div",{class:"col-12 col-md-6 col-lg-4",key:t.id},[e("div",ot,[e("img",{src:t.imageUrl,class:"img-fluid h-100 card-radius",alt:"item.title",style:{height:"180px"}},null,8,ct),e("span",lt,g(t.category),1),e("button",{class:"heart border-0",onClick:f=>n.toggleFavorite(t.product,t.category,t.title,"旅遊方案"),type:"button"},[e("i",{class:y(["bi",{"bi-heart-fill":o.isFavorite[t.product],"bi-heart":!o.isFavorite[t.product]}]),style:{"font-size":"24px"}},null,2)],8,nt),e("div",dt,[k(h,{to:{name:"TouristSinglePackage",params:{category:t.category,title:t.title}}},{default:m(()=>[e("h4",ht,g(t.title),1)]),_:2},1032,["to"])])])]))),128))],64))]))],64)}const _t=w(F,[["render",ut],["__scopeId","data-v-8b84516d"]]);export{_t as default};
